<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="BO.SrmboLwrnkCompMgr">
	<typeAlias  alias="commMap" type="com.devwork.common.map.CommonMap"/>



	<!-- 페이징 Header -->
	<sql id="pagingHeader">
	<isNotEmpty property="firstIndex">
		<isNotEmpty property="lastIndex">
		<![CDATA[
		SELECT *
		  FROM (
				SELECT A.*
				     , ROWNUM  AS RNUM
				  FROM (
		]]>
			</isNotEmpty>
		</isNotEmpty>
	</sql>

	<!-- 페이징 Footer -->
	<sql id="pagingFooter">
		<isNotEmpty property="firstIndex">
			<isNotEmpty property="lastIndex">
		<![CDATA[
                       ) A	WHERE ROWNUM <= #lastIndex#
		       ) WHERE RNUM >= #firstIndex#
		]]>
			</isNotEmpty>
		</isNotEmpty>
	</sql>

	<!-- 하위업체관리 목록 건수 -->
	<select id="selectLwrnkCompTotCnt" parameterClass="java.util.HashMap" resultClass="int">
		<![CDATA[
		SELECT   COUNT(SUPP_COMP_ID)
		FROM
		(
			SELECT   A.SUPP_COMP_ID,
	                 A.BCNC_NM,
	                 A.SUPP_COMP_DIV_CD,
	                 B.PAVLN_ID,
	                 B.PAVLN_DIV_CD,
	                 DECODE(B.PAVLN_DIV_CD,'05','전통시장','08','패션B2B') AS PAVLN_DIV_NM,
	                 (SELECT COMN_CD_NM FROM CM_COMN_CD WHERE CD_GRP_ID='SUPP_COMP_DIV_CD' AND COMN_CD_ID=A.SUPP_COMP_DIV_CD) AS SUPP_COMP_DIV_CD_NM,
	                 A.BCNC_CNTRAC_NO,
	                 A.PRSDT_NM,
	                 A.COMPREG_NO,
	                 A.CORP_SSN,
	                 A.ENTRPS,
	                 A.INDUTY,
	                 A.TELNO,
	                 A.FAXNO,
	                 B.SUPP_COMP_STUS_CD,
	                 (SELECT COMN_CD_NM FROM CM_COMN_CD WHERE CD_GRP_ID='SUPP_COMP_STUS_CD' AND COMN_CD_ID=B.SUPP_COMP_STUS_CD) AS SUPP_COMP_STUS_NM
	        FROM     CO_SUPP_COMP_MAST A, CO_PAVLN_MGT B, CO_PAVLN_MAST C
	        WHERE    A.SUPP_COMP_ID = B.SUPP_COMP_ID
	        AND      B.PAVLN_ID     = C.PAVLN_ID
	        AND      B.PAVLN_DIV_CD IN ('05','08')
	        AND      A.SUPP_COMP_DIV_CD NOT IN ('08')
			]]>
			<!-- 검색구분 -->
			<isNotEmpty property="searchTxt">
				<isEqual property="searchType" compareValue="bcncNm">
					AND A.BCNC_NM LIKE '%'||#searchTxt#||'%'
				</isEqual>
				<isEqual property="searchType" compareValue="suppCompId">
					AND A.SUPP_COMP_ID LIKE '%'||#searchTxt#||'%'
				</isEqual>
				<isEqual property="searchType" compareValue="bcncCntracNo">
					AND A.BCNC_CNTRAC_NO LIKE '%'||#searchTxt#||'%'
				</isEqual>
				<isEqual property="searchType" compareValue="compregNo">
					AND A.COMPREG_NO LIKE '%'||#searchTxt#||'%'
				</isEqual>
				<isEqual property="searchType" compareValue="pavlnNm">
					AND C.PAVLN_NM LIKE '%'||#searchTxt#||'%'
				</isEqual>
			</isNotEmpty>
			<isNotEmpty property="searchSuppCompDivCd">
				AND A.SUPP_COMP_DIV_CD = #searchSuppCompDivCd#
			</isNotEmpty>
			<isNotEmpty property="searchSuppCompStus">
				AND B.SUPP_COMP_STUS_CD = #searchSuppCompStus#
			</isNotEmpty>

		)Z
		WHERE 1 = 1
		<isNotEmpty property="searchPavlnDivCd">
			AND PAVLN_DIV_CD = #searchPavlnDivCd#
		</isNotEmpty>
	</select>

	<!-- 하위업체관리 목록 조회 -->
	<select id="selectLwrnkCompList" parameterClass="java.util.HashMap" resultClass="commMap">
		<include refid="pagingHeader"/>
		<![CDATA[
		SELECT   SUPP_COMP_ID,
                 BCNC_NM,
                 SUPP_COMP_DIV_CD,
                 PAVLN_ID,
                 PAVLN_NM,
                 PAVLN_DIV_CD,
                 PAVLN_DIV_NM,
                 SUPP_COMP_DIV_CD_NM,
                 BCNC_CNTRAC_NO,
                 PRSDT_NM,
                 COMPREG_NO,
                 CORP_SSN,
                 ENTRPS,
                 INDUTY,
                 TELNO,
                 FAXNO,
                 SUPP_COMP_STUS_CD,
                 SUPP_COMP_STUS_NM,
                 (SELECT SUPP_COMP_ACCESS_NAME FROM MB_SUPP_COMP_MEM_MAST WHERE SUPP_COMP_ID = Z.SUPP_COMP_ID AND JOB_DUTY_CD = '001' AND ROWNUM = 1) AS MEM_ID1,
                 (SELECT ADMINNM FROM MB_SUPP_COMP_MEM_MAST WHERE SUPP_COMP_ID = Z.SUPP_COMP_ID AND JOB_DUTY_CD = '001' AND ROWNUM = 1) AS MEM_NM1,
                 (SELECT EMAIL_ADDR FROM MB_SUPP_COMP_MEM_MAST WHERE SUPP_COMP_ID = Z.SUPP_COMP_ID AND JOB_DUTY_CD = '001' AND ROWNUM = 1) AS MEM_EMAIL1,
                 (SELECT TEL_NO FROM MB_SUPP_COMP_MEM_MAST WHERE SUPP_COMP_ID = Z.SUPP_COMP_ID AND JOB_DUTY_CD = '001' AND ROWNUM = 1) AS MEM_TELNO1,
                 (SELECT FAX_NO FROM MB_SUPP_COMP_MEM_MAST WHERE SUPP_COMP_ID = Z.SUPP_COMP_ID AND JOB_DUTY_CD = '001' AND ROWNUM = 1) AS MEM_FAXNO1,
                 (SELECT MOBILE_NO FROM MB_SUPP_COMP_MEM_MAST WHERE SUPP_COMP_ID = Z.SUPP_COMP_ID AND JOB_DUTY_CD = '001' AND ROWNUM = 1) AS MEM_MOBNO1,
                 (SELECT SUPP_COMP_ACCESS_NAME FROM MB_SUPP_COMP_MEM_MAST WHERE SUPP_COMP_ID = Z.SUPP_COMP_ID AND JOB_DUTY_CD = '002' AND ROWNUM = 1) AS MEM_ID2,
                 (SELECT ADMINNM FROM MB_SUPP_COMP_MEM_MAST WHERE SUPP_COMP_ID = Z.SUPP_COMP_ID AND JOB_DUTY_CD = '002' AND ROWNUM = 1) AS MEM_NM2,
                 (SELECT EMAIL_ADDR FROM MB_SUPP_COMP_MEM_MAST WHERE SUPP_COMP_ID = Z.SUPP_COMP_ID AND JOB_DUTY_CD = '002' AND ROWNUM = 1) AS MEM_EMAIL2,
                 (SELECT TEL_NO FROM MB_SUPP_COMP_MEM_MAST WHERE SUPP_COMP_ID = Z.SUPP_COMP_ID AND JOB_DUTY_CD = '002' AND ROWNUM = 1) AS MEM_TELNO2,
                 (SELECT FAX_NO FROM MB_SUPP_COMP_MEM_MAST WHERE SUPP_COMP_ID = Z.SUPP_COMP_ID AND JOB_DUTY_CD = '002' AND ROWNUM = 1) AS MEM_FAXNO2,
                 (SELECT MOBILE_NO FROM MB_SUPP_COMP_MEM_MAST WHERE SUPP_COMP_ID = Z.SUPP_COMP_ID AND JOB_DUTY_CD = '002' AND ROWNUM = 1) AS MEM_MOBNO2,
                 (SELECT HRNK_PAVLN_ID FROM CO_PAVLN_MAST WHERE PAVLN_ID = Z.PAVLN_ID) AS UPER_SUPP_COMP_ID ,
                 (SELECT BCNC_NM FROM CO_SUPP_COMP_MAST WHERE SUPP_COMP_ID = (SELECT HRNK_PAVLN_ID FROM CO_PAVLN_MAST WHERE PAVLN_ID = Z.PAVLN_ID)) AS UPER_SUPP_COMP_NM,
                 AREA_CD,
                 SIDO_CD,
                 (SELECT COMN_CD_NM FROM CM_COMN_CD WHERE CD_GRP_ID = 'AREA_CD' AND COMN_CD_ID = Z.AREA_CD) AS AREA_NM,
                 (SELECT COMN_CD_NM FROM CM_COMN_CD WHERE CD_GRP_ID = 'SIDO_CD' AND COMN_CD_ID = Z.SIDO_CD) AS SIDO_NM
		FROM
		(
			SELECT   A.SUPP_COMP_ID,
	                 A.BCNC_NM,
	                 A.SUPP_COMP_DIV_CD,
	                 B.PAVLN_ID,
	                 B.PAVLN_DIV_CD,
	                 C.PAVLN_NM,
	                 DECODE(B.PAVLN_DIV_CD,'05','전통시장','08','패션B2B') AS PAVLN_DIV_NM,
	                 (SELECT COMN_CD_NM FROM CM_COMN_CD WHERE CD_GRP_ID='SUPP_COMP_DIV_CD' AND COMN_CD_ID=A.SUPP_COMP_DIV_CD) AS SUPP_COMP_DIV_CD_NM,
	                 A.BCNC_CNTRAC_NO,
	                 A.PRSDT_NM,
	                 A.COMPREG_NO,
	                 A.CORP_SSN,
	                 A.ENTRPS,
	                 A.INDUTY,
	                 A.TELNO,
	                 A.FAXNO,
	                 A.ZIPCD,
	                 A.ADDR1,
	                 A.ADDR2,
	                 B.SUPP_COMP_STUS_CD,
	                 (SELECT COMN_CD_NM FROM CM_COMN_CD WHERE CD_GRP_ID='SUPP_COMP_STUS_CD' AND COMN_CD_ID=B.SUPP_COMP_STUS_CD) AS SUPP_COMP_STUS_NM,
	                 C.AREA_CD,
                	 C.SIDO_CD
	        FROM     CO_SUPP_COMP_MAST A, CO_PAVLN_MGT B, CO_PAVLN_MAST C
	        WHERE    A.SUPP_COMP_ID = B.SUPP_COMP_ID
	        AND      B.PAVLN_ID     = C.PAVLN_ID
	        AND      B.PAVLN_DIV_CD IN ('05','08')
	        AND      A.SUPP_COMP_DIV_CD NOT IN ('08')
			]]>
			<!-- 검색구분 -->
			<isNotEmpty property="searchTxt">
				<isEqual property="searchType" compareValue="bcncNm">
					AND A.BCNC_NM LIKE '%'||#searchTxt#||'%'
				</isEqual>
				<isEqual property="searchType" compareValue="suppCompId">
					AND A.SUPP_COMP_ID LIKE '%'||#searchTxt#||'%'
				</isEqual>
				<isEqual property="searchType" compareValue="bcncCntracNo">
					AND A.BCNC_CNTRAC_NO LIKE '%'||#searchTxt#||'%'
				</isEqual>
				<isEqual property="searchType" compareValue="compregNo">
					AND A.COMPREG_NO LIKE '%'||#searchTxt#||'%'
				</isEqual>
				<isEqual property="searchType" compareValue="compregNo">
					AND A.COMPREG_NO LIKE '%'||#searchTxt#||'%'
				</isEqual>
				<isEqual property="searchType" compareValue="pavlnNm">
					AND C.PAVLN_NM LIKE '%'||#searchTxt#||'%'
				</isEqual>
			</isNotEmpty>
			<isNotEmpty property="searchSuppCompDivCd">
				AND A.SUPP_COMP_DIV_CD = #searchSuppCompDivCd#
			</isNotEmpty>
			<isNotEmpty property="searchSuppCompStus">
				AND B.SUPP_COMP_STUS_CD = #searchSuppCompStus#
			</isNotEmpty>

		) Z
		WHERE 1 = 1
		<isNotEmpty property="searchPavlnDivCd">
			AND PAVLN_DIV_CD = #searchPavlnDivCd#
		</isNotEmpty>
		<include refid="pagingFooter"/>
	</select>

	<select id="selectLwrnkCompInfo" parameterClass="java.util.HashMap" resultClass="commMap">
		<![CDATA[
		SELECT  PAVLN_ID,
				PAVLN_DIV_CD,
				AREA_CD,
				SIDO_CD,
				(SELECT COMN_CD_NM FROM CM_COMN_CD WHERE CD_GRP_ID = 'AREA_CD' AND COMN_CD_ID = Z.AREA_CD) AS AREA_NM,
                (SELECT COMN_CD_NM FROM CM_COMN_CD WHERE CD_GRP_ID = 'SIDO_CD' AND COMN_CD_ID = Z.SIDO_CD) AS SIDO_NM,
				PAVLN_NM,
				PAVLN_INTRCN,
				TELNO,
				ZIPCD,
				ADDR1,
				ADDR2,
				HRNK_PAVLN_ID,
				USE_YN,
				ITEMDESC,
				ADD_FILE1 AS BCNC_LOGO_IMAGE_FILE_ID,
				(SELECT FILE_STRE_PATH FROM CM_FILE_MGT WHERE ATTCHFILE_ID = Z.ADD_FILE1) AS LOGO_FILE_PATH,
			  	(SELECT STRE_FILE_NM FROM CM_FILE_MGT WHERE ATTCHFILE_ID = Z.ADD_FILE1) AS LOGO_STR_FILE_NM,
                (SELECT ORIG_FILE_NM FROM CM_FILE_MGT WHERE ATTCHFILE_ID = Z.ADD_FILE1) AS LOGO_ORI_FILE_NM,
				ADD_FILE2 AS BCNC_BASIC_IMAGE_FILE_ID,
                (SELECT FILE_STRE_PATH FROM CM_FILE_MGT WHERE ATTCHFILE_ID = Z.ADD_FILE2) AS BASIC_FILE_PATH,
			  	(SELECT STRE_FILE_NM FROM CM_FILE_MGT WHERE ATTCHFILE_ID = Z.ADD_FILE2) AS BASIC_STR_FILE_NM,
                (SELECT ORIG_FILE_NM FROM CM_FILE_MGT WHERE ATTCHFILE_ID = Z.ADD_FILE2) AS BASIC_ORI_FILE_NM,
                DSPY_NM,
				URL,
				SALES_DATE,
				CLOSED_YMD,
				FAXNO,
				REG_DATE,
				CHG_DATE,
				REGER_ID,
				CHGER_ID,
				DDM_PAVLN_ID
		FROM    CO_PAVLN_MAST Z
		WHERE   PAVLN_ID = #pavlnId#

		]]>
	</select>
	<insert id="lwrnkCompRegist" parameterClass="java.util.HashMap">
		<![CDATA[
		INSERT INTO CO_SUPP_COMP_MAST
		  (
		   SUPP_COMP_ID,
		   SUPP_COMP_DIV_CD,
		   ENTRPS,
		   INDUTY,
		   BCNC_NM,
		   PRSDT_NM,
		   COMPREG_NO,
		   CORP_SSN,
		   ZIPCD,
		   ADDR1,
		   ADDR2,
		   REG_DATE,
		   CHG_DATE,
		   REGER_ID,
		   CHGER_ID
		  )
		VALUES
		  (
		   #suppCompId#,
		   #suppCompDivCd#,
		   #entrps#,
		   #induty#,
		   #bcncNm#,
		   #prsdtNm#,
		   #compregNo#,
		   #corpSsn#,
		   #zipcd#,
		   #addr1#,
		   #addr2#,
		   SYSDATE,
		   SYSDATE,
		   #userId#,
		   #userId#
		   )
		]]>

<!-- 		BCNC_CNTRAC_NO, -->
<!-- 		TO_CHAR(SYSDATE, 'YYYYMMDD') || #suppCompId#, -->
	</insert>

	<!-- 공급업체 전시 정보 등록 -->
	<insert id="insertSupplyPavln" parameterClass="java.util.HashMap">
		<![CDATA[
			INSERT INTO CO_PAVLN_MGT
				(
				PAVLN_ID,
				SUPP_COMP_ID,
				PAVLN_DIV_CD,
				REG_DATE,
				CHG_DATE,
				REGER_ID,
				CHGER_ID
				 )
			VALUES
				(
				#pavlnid#,
				#suppCompId#,
				#pavlnDivCd#,
				SYSDATE,
				SYSDATE,
				#userId#,
				#userId#
          		)
            ]]>
	</insert>

	<!-- 공급업체 정보 이력 등록 -->
	<insert id="insertSupplyHistor" parameterClass="java.util.HashMap">
		<![CDATA[
			INSERT INTO CO_SUPP_COMP_HISTOR
				(
				SUPP_COMP_ID,
			   	SUPP_COMP_DIV_CD,
			   	ENTRPS,
			   	INDUTY,
			   	BCNC_NM,
			   	PRSDT_NM,
			   	COMPREG_NO,
			   	CORP_SSN,
			   	ZIPCD,
			   	ADDR1,
			   	ADDR2,
			   	BCNC_CNTRAC_NO,
			   	REG_DATE,
			    CHG_DATE,
			    REGER_ID,
			    CHGER_ID ,
			    SUPP_COMP_CHG_DATE
				)
			SELECT
				SUPP_COMP_ID,
			   	SUPP_COMP_DIV_CD,
			   	ENTRPS,
			   	INDUTY,
			   	BCNC_NM,
			   	PRSDT_NM,
			   	COMPREG_NO,
			   	CORP_SSN,
			   	ZIPCD,
			   	ADDR1,
			   	ADDR2,
			   	BCNC_CNTRAC_NO,
			   	REG_DATE,
		        CHG_DATE,
		        REGER_ID,
		        CHGER_ID,
		        SYSDATE
			FROM CO_SUPP_COMP_MAST
			WHERE SUPP_COMP_ID = #suppCompId#
            ]]>
	</insert>

	<update id="lwrnkCompUpdate" parameterClass="java.util.HashMap">
		<![CDATA[
		UPDATE 	CO_SUPP_COMP_MAST
		SET    	SUPP_COMP_DIV_CD   = #suppCompDivCd#,
				ENTRPS             = #entrps#,
				INDUTY             = #induty#,
				BCNC_NM            = #bcncNm#,
				PRSDT_NM           = #prsdtNm#,
				COMPREG_NO         = #compregNo#,
				CORP_SSN           = #corpSsn#,
				ZIPCD              = #zipcd#,
				ADDR1              = #addr1#,
				ADDR2              = #addr2#,
				CHG_DATE           = SYSDATE,
				CHGER_ID           = #userId#
		WHERE 	SUPP_COMP_ID       = #suppCompId#
		]]>
	</update>

	<update id="updateSupplyPavln" parameterClass="java.util.HashMap">
		<![CDATA[
		UPDATE 	CO_PAVLN_MGT
		SET    	PAVLN_DIV_CD   = #pavlnDivCd#,
				CHG_DATE       = SYSDATE,
				CHGER_ID       = #userId#
		WHERE 	SUPP_COMP_ID   = #suppCompId#
		]]>
	</update>

	<select id="selectSuppCompInfo" parameterClass="java.util.HashMap" resultClass="commMap">
		<![CDATA[
		SELECT  SUPP_COMP_ID,
                BCNC_NM,
                COMPREG_NO,
                PRSDT_MOBILE_NO,
                EMAIL,
                PAVLN_ID,
                (SELECT Q.PAVLN_NM FROM CO_PAVLN_MAST Q WHERE Q.PAVLN_ID = Z.PAVLN_ID) AS PAVLN_NM,
                PAVLN_DIV_CD,
                (SELECT COMN_CD_NM FROM CM_COMN_CD WHERE CD_GRP_ID='PAVLN_DIV_CD' AND COMN_CD_ID=Z.PAVLN_DIV_CD) AS PAVLN_DIV_NM,
                PO_ECODE,
                RCOCD,
                MPOREGIPOCD,
                (SELECT PONM FROM PICMT0060 WHERE USEYN='Y' AND DSCDPOYN='N' AND  PODIVCD ='02' AND RCOCD = Z.RCOCD) AS POSTOFFICE,
                (SELECT PONM FROM PICMT0060 WHERE USEYN='Y' AND DSCDPOYN='N' AND PODIVCD IN ('05', '06', '10', '18') AND RCOCD = Z.RCOCD AND REGIPOCD = Z.MPOREGIPOCD) AS POSTNAME,
                (SELECT PONM FROM PICMT0060 WHERE EDPSCD = Z.PO_ECODE AND USEYN='Y' AND DSCDPOYN = 'N'  AND ROWNUM = 1   )  AS PO_ECODE_NM,
                (SELECT POADDR FROM PICMT0060 WHERE EDPSCD = Z.PO_ECODE AND USEYN='Y' AND DSCDPOYN = 'N'  AND ROWNUM = 1   )  AS PO_ECODE_ADDR,
                PRSDT_NM,
                CORP_SSN,
                ENTRPS,
                INDUTY,
                TELNO,
                FAXNO,
                ZIPCD,
                ADDR1,
                ADDR2,
                EMS_CNTRAC_NO,
                BCNC_NM_CN,
                PRSDT_NM_CN,
                BCNC_NM_JP,
                PRSDT_NM_JP,
                BCNC_NM_US,
                PRSDT_NM_US,
                SEND_ZIPCD,
                SEND_ADDR,
                SEND_DTAIL_ADDR,
                RETRNGD_DLVY_ZIPCD,
                RETRNGD_DLVY_POSTADDR,
                RETRNGD_DLVY_DTAILADDR,
                PO_HDRY_CNTRAC_NO,
                HDRYCO_CD,
                ADJ_BANK_CD,
                (SELECT COMN_CD_NM FROM CM_COMN_CD WHERE CD_GRP_ID='BANK_CD' AND COMN_CD_ID=Z.ADJ_BANK_CD) AS ADJ_BANK_NM,
                ADJ_DPSTR,
                ADJ_ACC_NO,
                REG_DATE,
                CHG_DATE,
                REGER_ID,
                CHGER_ID,
                CUST_NO,
                PRC_PAY_DIV_CD,
                SEND_MEAN_MBY_DIV_CD,
                COMM_SELL_RPRT_NO,
                BCNC_LOGO_IMAGE_FILE_ID,
                (SELECT FILE_STRE_PATH FROM CM_FILE_MGT WHERE ATTCHFILE_ID = Z.BCNC_LOGO_IMAGE_FILE_ID) AS FILE_PATH,
                (SELECT STRE_FILE_NM FROM CM_FILE_MGT WHERE ATTCHFILE_ID = Z.BCNC_LOGO_IMAGE_FILE_ID) AS STR_FILE_NM,
                (SELECT ORIG_FILE_NM FROM CM_FILE_MGT WHERE ATTCHFILE_ID = Z.BCNC_LOGO_IMAGE_FILE_ID) AS ORI_FILE_NM,
                (SELECT SUPP_COMP_ACCESS_NAME FROM MB_SUPP_COMP_MEM_MAST WHERE SUPP_COMP_ID = Z.SUPP_COMP_ID AND SUPP_COMP_ACCESS_NAME = #userId#) AS SUPP_COMP_ACCESS_NAME
        FROM(
                SELECT  A.SUPP_COMP_ID,
                        A.BCNC_NM,
                        A.COMPREG_NO,
                        A.PRSDT_MOBILE_NO,
                        A.EMAIL,
                        (SELECT Q.PAVLN_ID FROM CO_PAVLN_MGT Q WHERE Q.SUPP_COMP_ID = A.SUPP_COMP_ID AND ROWNUM = 1) AS PAVLN_ID,
                        (SELECT Q.PAVLN_DIV_CD FROM CO_PAVLN_MGT Q WHERE Q.SUPP_COMP_ID = A.SUPP_COMP_ID AND ROWNUM = 1) AS PAVLN_DIV_CD,
                        A.PO_ECODE,
                        (SELECT RCOCD FROM PICMT0060 WHERE EDPSCD = A.PO_ECODE AND USEYN='Y' AND DSCDPOYN = 'N' AND ROWNUM = 1) AS RCOCD,
                        (SELECT MPOREGIPOCD FROM PICMT0060 WHERE EDPSCD = A.PO_ECODE AND USEYN='Y' AND DSCDPOYN = 'N' AND ROWNUM = 1) AS MPOREGIPOCD,
                        A.PRSDT_NM,
                        A.CORP_SSN,
                        A.ENTRPS,
                        A.INDUTY,
                        A.TELNO,
                        A.FAXNO,
                        A.ZIPCD,
                        A.ADDR1,
                        A.ADDR2,
                        A.EMS_CNTRAC_NO,
                        A.BCNC_NM_CN,
                        A.PRSDT_NM_CN,
                        A.BCNC_NM_JP,
                        A.PRSDT_NM_JP,
                        A.BCNC_NM_US,
                        A.PRSDT_NM_US,
                        A.SEND_ZIPCD,
                        A.SEND_ADDR,
                        A.SEND_DTAIL_ADDR,
                        A.RETRNGD_DLVY_ZIPCD,
                        A.RETRNGD_DLVY_POSTADDR,
                        A.RETRNGD_DLVY_DTAILADDR,
                        A.PO_HDRY_CNTRAC_NO,
                        A.HDRYCO_CD,
                        A.ADJ_BANK_CD,
                        A.ADJ_DPSTR,
                        A.ADJ_ACC_NO,
                        TO_CHAR(A.REG_DATE,'YYYY-MM-DD HH24:MM') AS REG_DATE,
                        TO_CHAR(A.CHG_DATE,'YYYY-MM-DD HH24:MM') AS CHG_DATE,
                        A.REGER_ID,
                        A.CHGER_ID,
                        A.CUST_NO,
                        A.PRC_PAY_DIV_CD,
                        A.SEND_MEAN_MBY_DIV_CD,
                        A.COMM_SELL_RPRT_NO,
                        (SELECT BCNC_LOGO_IMAGE_FILE_ID FROM CO_SUPP_COMP_DTAIL_INFO where SUPP_COMP_ID = A.SUPP_COMP_ID) AS BCNC_LOGO_IMAGE_FILE_ID
                FROM    CO_SUPP_COMP_MAST A
                WHERE   A.SUPP_COMP_ID = #suppCompId#
                AND		ROWNUM = 1
        ) Z
		]]>
	</select>

	<update id="updateSuppComp" parameterClass="java.util.HashMap">
		<![CDATA[
		UPDATE 	CO_SUPP_COMP_MAST
		SET    	TELNO = #telno#,
				FAXNO = #faxno#,
				ZIPCD = #zipcd#,
				ADDR1 = #addr1#,
				ADDR2 = #addr2#,
				EMS_CNTRAC_NO = #emsCntracNo#,
				BCNC_NM_US = #bcncNmUs#,
				PRSDT_NM_US = #prsdtNmUs#,
				BCNC_NM_JP = #bcncNmJp#,
				PRSDT_NM_JP = #prsdtNmJp#,
				BCNC_NM_CN = #bcncNmCn#,
				PRSDT_NM_CN = #prsdtNmCn#,
				SEND_ZIPCD = #sendZipcd#,
				SEND_ADDR = #sendAddr#,
				SEND_DTAIL_ADDR = #sendDtailAddr#,
				RETRNGD_DLVY_ZIPCD = #retrngdDlvyZipcd#,
				RETRNGD_DLVY_POSTADDR = #retrngdDlvyPostaddr#,
				RETRNGD_DLVY_DTAILADDR = #retrngdDlvyDtailaddr#,
				HDRYCO_CD = #hdrycoCd#,
				ADJ_BANK_CD = #adjBankCd#,
				ADJ_DPSTR = #adjDpstr#,
				ADJ_ACC_NO = #adjAccNo#,
				CUST_NO = #custNo#,
				PRC_PAY_DIV_CD = #prcPayDivCd#,
				SEND_MEAN_MBY_DIV_CD = #sendMeanMbyDivCd#,
				PO_HDRY_CNTRAC_NO = #poHdryCntracNo#,
				COMM_SELL_RPRT_NO = #commSellRprtNo#,
				BCNC_NM = #bcncNm#,
				COMPREG_NO = #compregNo#,
				PRSDT_NM = #prsdtNm#,
				CORP_SSN = #corpSsn#,
				ENTRPS = #entrps#,
				INDUTY = #induty#,
				CHG_DATE = SYSDATE,
				CHGER_ID = #userId#
		WHERE 	SUPP_COMP_ID       = #suppCompId#
		]]>
	</update>

	<update id="updateSuppCompPassword" parameterClass="java.util.HashMap">
		UPDATE	MB_SUPP_COMP_MEM_MAST
		SET 	PASSWD = #password#
				,PASSWD_LOCK_YN = 'N'
				,PASSWD_CTNU_FAIL_CNT = 0
				,LAST_PASSWD_CHG_DATE = SYSDATE
				,CHG_DATE = SYSDATE
				,CHGER_ID = #loginId#
		WHERE 	SUPP_COMP_ID = #suppCompId#
	</update>

	<!-- 공급업체 정보 이력 등록 -->
	<insert id="insertSupplyHistorUpd" parameterClass="java.util.HashMap">
		<![CDATA[
			INSERT INTO CO_SUPP_COMP_HISTOR
				( SUPP_COMP_ID             ,
				SUPP_COMP_CHG_DATE         ,
				SUPP_COMP_IMPRTY_REASN     ,
				MOV_REG_DIV_CD             ,
				SUPP_COMP_DIV_CD           ,
				COMPREG_NO                 ,
				CORP_REG_NO                ,
				COMM_SELL_RPRT_NO          ,
				SUPP_PO_ID                 ,
				PO_ECODE                   ,
				BCNC_NM                    ,
				TAX_CALDOC_COMP_NM         ,
				INDUTY                     ,
				ENTRPS                     ,
				PRSDT_NM                   ,
				BCNC_GRADE_CD              ,
				PRSDT_GRADE_CD             ,
				PRSDT_MOBILE_NO            ,
				CORP_SSN                   ,
				BIZFLD_AEA                 ,
				EMPEE_CNT                  ,
				SUPP_COMP_INTRCN           ,
				CUST_NO                    ,
				JOIN_NO                    ,
				TAXT_DIV_CD                ,
				NATION_CD                  ,
				BIZFLD_LOC                 ,
				HDOFC_LOC                  ,
				SUPP_COMP_URL              ,
				EMAIL                      ,
				TELNO                      ,
				FAXNO                      ,
				ZIPCD                      ,
				ADDR1                      ,
				ADDR2                      ,
				SEND_ZIPCD                 ,
				SEND_ADDR                  ,
				SEND_DTAIL_ADDR            ,
				SEND_NO                    ,
				SEND_TELNO                 ,
				RETRNGD_DLVY_ZIPCD         ,
				RETRNGD_DLVY_POSTADDR      ,
				RETRNGD_DLVY_DTAILADDR     ,
				CNTRAC_STRT_YY             ,
				CNTRAC_REQ_YMD             ,
				OPN_YMD                    ,
				CNTRAC_REASN               ,
				CNTRAC_STOP_STRT_YMD       ,
				CNTRAC_STOP_END_YMD        ,
				CNTRAC_CANCEL_YMD          ,
				CNTRAC_DSUSE_YMD           ,
				CNTRAC_STOP_REASN          ,
				CNTRAC_END_REASN           ,
				CNTRAC_CANCEL_REASN        ,
				CNTRAC_DSUSE_REASN         ,
				BCNC_CNTRAC_NO             ,
				LWRNK_BCNC_NO              ,
				PO_HDRY_CNTRAC_NO          ,
				HDRYCO_CD                  ,
				EMS_CNTRAC_NO              ,
				ADJ_BANK_CD                ,
				ADJ_ACC_NO                 ,
				ADJ_DPSTR                  ,
				ADJ_AUTO_YN                ,
				ADJ_TYP_CD                 ,
				ADJ_INFO_DIV               ,
				ADJ_VAT_ADD_YN             ,
				PRC_PAY_DIV_CD             ,
				SUPPO_RGIST_POCD           ,
				COPRTN_FEE_AGREE_TURF      ,
				COPRTN_FEE_TURF_CHG_REQ    ,
				COPRTN_FEE_CHG_STUS_CD     ,
				COPRTN_FEE_CHG_REQ_YMD     ,
				COPRTN_FEE_CHG_APPR_YMD    ,
				SUPP_COMP_PO_ACC_NO        ,
				BCNC_NM_US                 ,
				BCNC_NM_JP                 ,
				BCNC_NM_CN                 ,
				PRSDT_NM_US                ,
				PRSDT_NM_JP                ,
				PRSDT_NM_CN                ,
				TRMNL_ID                   ,
				FLWR_DELIV_COMP_DSTB       ,
				AFTPMN_TREAT_APPR_NO       ,
				ACCOUNT                    ,
				INET_NOTIC_USE_YN          ,
				NOW_SUPP_COMP_CD           ,
				SUPP_COMP_SEQ              ,
				CNTRAC_STRT_YM             ,
				REG_DATE                   ,
				CHG_DATE                   ,
				REGER_ID                   ,
				CHGER_ID                   ,
				BUNDSEND_CONDSUB_NONPAY    ,
				SEND_MEAN_MBY_DIV_CD       ,
				CHG_ITEM                   ,
				CHG_RSN
				)
			SELECT
				SUPP_COMP_ID             ,
				SYSDATE         ,
				SUPP_COMP_IMPRTY_REASN     ,
				MOV_REG_DIV_CD             ,
				SUPP_COMP_DIV_CD           ,
				COMPREG_NO                 ,
				CORP_REG_NO                ,
				COMM_SELL_RPRT_NO          ,
				SUPP_PO_ID                 ,
				PO_ECODE                   ,
				BCNC_NM                    ,
				TAX_CALDOC_COMP_NM         ,
				INDUTY                     ,
				ENTRPS                     ,
				PRSDT_NM                   ,
				BCNC_GRADE_CD              ,
				PRSDT_GRADE_CD             ,
				PRSDT_MOBILE_NO            ,
				CORP_SSN                   ,
				BIZFLD_AEA                 ,
				EMPEE_CNT                  ,
				SUPP_COMP_INTRCN           ,
				CUST_NO                    ,
				JOIN_NO                    ,
				TAXT_DIV_CD                ,
				NATION_CD                  ,
				BIZFLD_LOC                 ,
				HDOFC_LOC                  ,
				SUPP_COMP_URL              ,
				EMAIL                      ,
				TELNO                      ,
				FAXNO                      ,
				ZIPCD                      ,
				ADDR1                      ,
				ADDR2                      ,
				SEND_ZIPCD                 ,
				SEND_ADDR                  ,
				SEND_DTAIL_ADDR            ,
				SEND_NO                    ,
				SEND_TELNO                 ,
				RETRNGD_DLVY_ZIPCD         ,
				RETRNGD_DLVY_POSTADDR      ,
				RETRNGD_DLVY_DTAILADDR     ,
				CNTRAC_STRT_YY             ,
				CNTRAC_REQ_YMD             ,
				OPN_YMD                    ,
				CNTRAC_REASN               ,
				CNTRAC_STOP_STRT_YMD       ,
				CNTRAC_STOP_END_YMD        ,
				CNTRAC_CANCEL_YMD          ,
				CNTRAC_DSUSE_YMD           ,
				CNTRAC_STOP_REASN          ,
				CNTRAC_END_REASN           ,
				CNTRAC_CANCEL_REASN        ,
				CNTRAC_DSUSE_REASN         ,
				BCNC_CNTRAC_NO             ,
				LWRNK_BCNC_NO              ,
				PO_HDRY_CNTRAC_NO          ,
				HDRYCO_CD                  ,
				EMS_CNTRAC_NO              ,
				ADJ_BANK_CD                ,
				ADJ_ACC_NO                 ,
				ADJ_DPSTR                  ,
				ADJ_AUTO_YN                ,
				ADJ_TYP_CD                 ,
				ADJ_INFO_DIV               ,
				ADJ_VAT_ADD_YN             ,
				PRC_PAY_DIV_CD             ,
				SUPPO_RGIST_POCD           ,
				COPRTN_FEE_AGREE_TURF      ,
				COPRTN_FEE_TURF_CHG_REQ    ,
				COPRTN_FEE_CHG_STUS_CD     ,
				COPRTN_FEE_CHG_REQ_YMD     ,
				COPRTN_FEE_CHG_APPR_YMD    ,
				SUPP_COMP_PO_ACC_NO        ,
				BCNC_NM_US                 ,
				BCNC_NM_JP                 ,
				BCNC_NM_CN                 ,
				PRSDT_NM_US                ,
				PRSDT_NM_JP                ,
				PRSDT_NM_CN                ,
				TRMNL_ID                   ,
				FLWR_DELIV_COMP_DSTB       ,
				AFTPMN_TREAT_APPR_NO       ,
				ACCOUNT                    ,
				INET_NOTIC_USE_YN          ,
				NOW_SUPP_COMP_CD           ,
				SUPP_COMP_SEQ              ,
				CNTRAC_STRT_YM             ,
				REG_DATE                   ,
				CHG_DATE                   ,
				REGER_ID                   ,
				CHGER_ID                   ,
				BUNDSEND_CONDSUB_NONPAY    ,
				SEND_MEAN_MBY_DIV_CD       ,
				#chgItem#                  ,
				#chgRsn#
			FROM CO_SUPP_COMP_MAST
			WHERE SUPP_COMP_ID = #suppCompId#
            ]]>
	</insert>


	<update id="updateSuppCompFile" parameterClass="java.util.HashMap">
		<![CDATA[
		UPDATE 	CO_SUPP_COMP_DTAIL_INFO
		SET     BCNC_LOGO_IMAGE_FILE_ID = #attchfileId#,
				CHGER_ID				= #userId#,
				CHG_DATE	            = SYSDATE
		WHERE 	SUPP_COMP_ID       		= #suppCompId#
		]]>
	</update>

	<insert id="insertSuppCompFile" parameterClass="java.util.HashMap">
		<![CDATA[
		INSERT INTO CO_SUPP_COMP_DTAIL_INFO
			(
			SUPP_COMP_ID,
			BCNC_LOGO_IMAGE_FILE_ID,
			REG_DATE,
			REGER_ID
			)
		VALUES
			(
			#suppCompId#,
			#attchfileId#,
			SYSDATE,
			#userId#
			)
    	]]>
	</insert>

	<update id="updateSuppCompLogoDel" parameterClass="java.util.HashMap">
		<![CDATA[
		UPDATE 	CO_SUPP_COMP_DTAIL_INFO
		SET     BCNC_LOGO_IMAGE_FILE_ID = '',
				CHGER_ID				= #userId#,
				CHG_DATE	            = SYSDATE
		WHERE 	SUPP_COMP_ID       		= #suppCompId#
		]]>
	</update>

	<delete id="deleteCommonFile" parameterClass="java.util.HashMap">
		<![CDATA[
		DELETE FROM CM_FILE_MGT WHERE ATTCHFILE_ID = #delFileId#
		]]>
	</delete>

	<select id="selectSuppCompFileCnt" parameterClass="java.util.HashMap" resultClass="int">
		<![CDATA[
		SELECT COUNT(*) FROM CO_SUPP_COMP_DTAIL_INFO WHERE SUPP_COMP_ID = #suppCompId#
		]]>
	</select>

	<select id="selectLwrnkCompHistoryList" parameterClass="java.util.HashMap" resultClass="commMap">
		<include refid="pagingHeader"/>
		<![CDATA[
		SELECT 	TO_CHAR(CHG_DATE,'YYYY-MM-DD HH24:MM:MI') AS CHG_DATE,
				CHGER_ID,
				CHG_ITEM,
				CHG_RSN
        FROM 	CO_SUPP_COMP_HISTOR
        WHERE  	SUPP_COMP_ID =  #suppCompId#
        ORDER BY CHG_DATE DESC
		]]>
		<include refid="pagingFooter"/>
	</select>

	<select id="selectLwrnkCompHistoryListTotCnt" parameterClass="java.util.HashMap" resultClass="int">
         <![CDATA[
		SELECT 	COUNT(*)
        FROM 	CO_SUPP_COMP_HISTOR
        WHERE  	SUPP_COMP_ID =  #suppCompId#
        ORDER BY CHG_DATE DESC
		]]>
	</select>

	<!-- 공급업체관리 리스트 조회 -->
	<select id="selectSupplyMgrList" parameterClass ="java.util.HashMap" resultClass="commMap">
		<include refid="pagingHeader"/>
		SELECT *
		FROM (
				SELECT	A.SUPP_COMP_DIV_CD
						,F_GET_COMN_CD_NM('SUPP_COMP_DIV_CD',A.SUPP_COMP_DIV_CD) AS SUPP_COMP_DIV_CD_NM
						,(SELECT COMN_CD_NM FROM CM_COMN_CD WHERE CD_GRP_ID='RCO_CD' AND COMN_CD_ID= (   SELECT  RCOCD  FROM PICMT0060 where  REGIPOCD = A.SUPPO_RGIST_POCD AND USEYN = 'Y' AND DSCDPOYN = 'N' and rownum = 1)) AS RCONM
						,(SELECT PONM FROM PICMT0060 WHERE REGIPOCD = A.SUPPO_RGIST_POCD AND USEYN='Y' and DSCDPOYN = 'N'  and rownum = 1   )  AS POSTNAME
						,(SELECT PONM FROM PICMT0060 WHERE  REGIPOCD = (SELECT HRNKORREGIPOCD FROM PICMT0060 WHERE REGIPOCD = A.SUPPO_RGIST_POCD AND USEYN = 'Y' AND DSCDPOYN = 'N' AND ROWNUM = 1)  AND USEYN = 'Y' AND DSCDPOYN = 'N' AND ROWNUM = 1  ) AS POSTOFFICE
						,(SELECT	SUBSTR(XMLAGG(XMLELEMENT(A, ','||P.SUPP_COMP_ACCESS_NAME  )).EXTRACT('//text()').GETSTRINGVAL(),2)
							FROM	MB_SUPP_COMP_MEM_MAST P
							WHERE	P.SUPP_COMP_ID = A.SUPP_COMP_ID
						)SUPP_COMP_ACCESS_NAME
						,A.PO_ECODE
						,A.BCNC_NM
						,A.SUPP_COMP_ID
						,A.PRSDT_NM
						,A.COMPREG_NO
						,A.CNTRAC_REQ_YMD
						,A.ENTRPS
						,A.INDUTY
						,A.TELNO
						,A.FAXNO
						,A.ADDR1
						,A.PRSDT_MOBILE_NO
						,A.CNTRAC_DSUSE_YMD
						,A.CNTRAC_STOP_END_YMD
						,B.SUPP_COMP_STUS_CD
						,F_GET_COMN_CD_NM('SUPP_COMP_STUS_CD',B.SUPP_COMP_STUS_CD) AS SUPP_COMP_STUS_NM
						,A.CNTRAC_STOP_REASN
						,A.REGER_ID
						,A.REG_DATE
						,A.CHGER_ID
						,A.CHG_DATE
						,B.PAVLN_DIV_CD
						,F_GET_COMN_CD_NM('PAVLN_DIV_CD',B.PAVLN_DIV_CD) AS PAVLN_DIV_NM
				FROM CO_SUPP_COMP_MAST A, CO_PAVLN_MGT B
				WHERE A.SUPP_COMP_ID = B.SUPP_COMP_ID(+)
				<!-- 매장구분 -->
				<isNotEmpty property="pavlnDivCd">
					AND B.PAVLN_DIV_CD = #pavlnDivCd#
				</isNotEmpty>
				<!-- 계약상태 -->
				<isNotEmpty property="cntracStusCd">
					AND B.SUPP_COMP_STUS_CD = #cntracStusCd#
				</isNotEmpty>
				<!-- 청별 -->
				<isNotEmpty property="postname">
					AND A.SUPPO_RGIST_POCD IN (SELECT REGIPOCD FROM PICMT0060 WHERE RCOCD = #postname# AND USEYN='Y')
				</isNotEmpty>
				<!-- 총괄국 -->
				<isNotEmpty property="postoffice">
					AND A.SUPPO_RGIST_POCD IN (SELECT REGIPOCD FROM PICMT0060 WHERE HRNKORREGIPOCD = #postoffice# AND USEYN='Y')
				</isNotEmpty>
				<!-- 검색구분 -->
				<isNotEmpty property="searchTxt">
					<isEqual property="searchType" compareValue="01">
						AND A.BCNC_NM LIKE '%'||#searchTxt#||'%'
					</isEqual>
					<isEqual property="searchType" compareValue="02">
						AND A.SUPP_COMP_ID LIKE '%'||#searchTxt#||'%'
					</isEqual>
				</isNotEmpty>
				ORDER BY A.REG_DATE DESC NULLS LAST
			)
			<isNotEmpty property="searchTxt">
				<isEqual property="searchType" compareValue="03">
					WHERE SUPP_COMP_ACCESS_NAME LIKE '%'||#searchTxt#||'%'
				</isEqual>
			</isNotEmpty>
		<include refid="pagingFooter"/>
	</select>
	<!-- 공급업체관리 리스트 조회 -->
	<select id="selectSupplyMgrExcelList" parameterClass ="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT *
		FROM (
				SELECT	ROW_NUMBER () OVER (ORDER BY A.REG_DATE DESC NULLS LAST) RNUM
						,A.SUPP_COMP_DIV_CD
						,F_GET_COMN_CD_NM('SUPP_COMP_DIV_CD',A.SUPP_COMP_DIV_CD) AS SUPP_COMP_DIV_CD_NM
						,(SELECT COMN_CD_NM FROM CM_COMN_CD WHERE CD_GRP_ID='RCO_CD' AND COMN_CD_ID= (   SELECT  RCOCD  FROM PICMT0060 where  REGIPOCD = A.SUPPO_RGIST_POCD AND USEYN = 'Y' AND DSCDPOYN = 'N' and rownum = 1)) AS RCONM
						,(SELECT PONM FROM PICMT0060 WHERE REGIPOCD = A.SUPPO_RGIST_POCD AND USEYN='Y' and DSCDPOYN = 'N'  and rownum = 1   )  AS POSTNAME
						,(SELECT PONM FROM PICMT0060 WHERE  REGIPOCD = (SELECT HRNKORREGIPOCD FROM PICMT0060 WHERE REGIPOCD = A.SUPPO_RGIST_POCD AND USEYN = 'Y' AND DSCDPOYN = 'N' AND ROWNUM = 1)  AND USEYN = 'Y' AND DSCDPOYN = 'N' AND ROWNUM = 1  ) AS POSTOFFICE
						,(SELECT	SUBSTR(XMLAGG(XMLELEMENT(A, ','||P.SUPP_COMP_ACCESS_NAME  )).EXTRACT('//text()').GETSTRINGVAL(),2)
							FROM	MB_SUPP_COMP_MEM_MAST P
							WHERE	P.SUPP_COMP_ID = A.SUPP_COMP_ID
						)SUPP_COMP_ACCESS_NAME
						,A.PO_ECODE
						,A.BCNC_NM
						,A.SUPP_COMP_ID
						,A.PRSDT_NM
						,A.COMPREG_NO
						,A.CNTRAC_REQ_YMD
						,A.ENTRPS
						,A.INDUTY
						,A.TELNO
						,A.FAXNO
						,A.ADDR1
						,A.PRSDT_MOBILE_NO
						,A.CNTRAC_DSUSE_YMD
						,A.CNTRAC_STOP_END_YMD
						,B.SUPP_COMP_STUS_CD
						,F_GET_COMN_CD_NM('SUPP_COMP_STUS_CD',B.SUPP_COMP_STUS_CD) AS SUPP_COMP_STUS_NM
						,A.CNTRAC_STOP_REASN
						,A.REGER_ID
						,A.REG_DATE
						,A.CHGER_ID
						,A.CHG_DATE
						,B.PAVLN_DIV_CD
						,F_GET_COMN_CD_NM('PAVLN_DIV_CD',B.PAVLN_DIV_CD) AS PAVLN_DIV_NM
				FROM CO_SUPP_COMP_MAST A, CO_PAVLN_MGT B
				WHERE A.SUPP_COMP_ID = B.SUPP_COMP_ID (+)
				<!-- 매장구분 -->
				<isNotEmpty property="pavlnDivCd">
					AND B.PAVLN_DIV_CD = #pavlnDivCd#
				</isNotEmpty>
				<!-- 계약상태 -->
				<isNotEmpty property="cntracStusCd">
					AND B.SUPP_COMP_STUS_CD = #cntracStusCd#
				</isNotEmpty>
				<!-- 청별 -->
				<isNotEmpty property="postname">
					AND A.SUPPO_RGIST_POCD IN (SELECT REGIPOCD FROM PICMT0060 WHERE RCOCD = #postname# AND USEYN='Y')
				</isNotEmpty>
				<!-- 총괄국 -->
				<isNotEmpty property="postoffice">
					AND A.SUPPO_RGIST_POCD IN (SELECT REGIPOCD FROM PICMT0060 WHERE HRNKORREGIPOCD = #postoffice# AND USEYN='Y')
				</isNotEmpty>
				<!-- 검색구분 -->
				<isNotEmpty property="searchTxt">
					<isEqual property="searchType" compareValue="01">
						AND A.BCNC_NM LIKE '%'||#searchTxt#||'%'
					</isEqual>
					<isEqual property="searchType" compareValue="02">
						AND A.SUPP_COMP_ID LIKE '%'||#searchTxt#||'%'
					</isEqual>
				</isNotEmpty>
			)
			<isNotEmpty property="searchTxt">
				<isEqual property="searchType" compareValue="03">
					WHERE SUPP_COMP_ACCESS_NAME LIKE '%'||#searchTxt#||'%'
				</isEqual>
			</isNotEmpty>
		ORDER BY RNUM ASC
	</select>

	<!-- 공급업체관리 리스트 카운트 -->
	<select id="selectSupplyMgrListTotCnt" parameterClass="java.util.HashMap" resultClass="int">
		SELECT COUNT(*)
		FROM (
			SELECT A.SUPP_COMP_ID
				,(SELECT	SUBSTR(XMLAGG(XMLELEMENT(A, ','||P.SUPP_COMP_ACCESS_NAME  )).EXTRACT('//text()').GETSTRINGVAL(),2)
							FROM	MB_SUPP_COMP_MEM_MAST P
							WHERE	P.SUPP_COMP_ID = A.SUPP_COMP_ID
						)SUPP_COMP_ACCESS_NAME
			FROM CO_SUPP_COMP_MAST A, CO_PAVLN_MGT B
			WHERE A.SUPP_COMP_ID = B.SUPP_COMP_ID(+)
				<!-- 매장구분 -->
				<isNotEmpty property="pavlnDivCd">
					AND B.PAVLN_DIV_CD = #pavlnDivCd#
				</isNotEmpty>
				<!-- 계약상태 -->
				<isNotEmpty property="cntracStusCd">
					AND B.SUPP_COMP_STUS_CD = #cntracStusCd#
				</isNotEmpty>
				<!-- 청별 -->
				<isNotEmpty property="postname">
					AND A.SUPPO_RGIST_POCD IN (SELECT REGIPOCD FROM PICMT0060 WHERE RCOCD = #postname# AND USEYN='Y')
				</isNotEmpty>
				<!-- 총괄국 -->
				<isNotEmpty property="postoffice">
					AND A.SUPPO_RGIST_POCD IN (SELECT REGIPOCD FROM PICMT0060 WHERE HRNKORREGIPOCD = #postoffice# AND USEYN='Y')
				</isNotEmpty>
				<!-- 검색구분 -->
				<isNotEmpty property="searchTxt">
					<isEqual property="searchType" compareValue="01">
						AND A.BCNC_NM LIKE '%'||#searchTxt#||'%'
					</isEqual>
					<isEqual property="searchType" compareValue="02">
						AND A.SUPP_COMP_ID LIKE '%'||#searchTxt#||'%'
					</isEqual>
				</isNotEmpty>
				)
			<isNotEmpty property="searchTxt">
				<isEqual property="searchType" compareValue="03">
					WHERE SUPP_COMP_ACCESS_NAME LIKE '%'||#searchTxt#||'%'
				</isEqual>
			</isNotEmpty>
	</select>

	<select id="selectSuppCompIdCheck" parameterClass="java.util.HashMap" resultClass="int">
		<![CDATA[
		SELECT COUNT(*) FROM CO_SUPP_COMP_MAST WHERE SUPP_COMP_ID = #suppCompId#
		]]>
	</select>

	<!-- 하위업체관리 목록 건수 -->
	<select id="selectMarketMgrListTotCnt" parameterClass="java.util.HashMap" resultClass="int">
		/* selectMarketMgrListTotCnt */
		<![CDATA[
			SELECT COUNT(0)
			  FROM CO_PAVLN_MAST CPM
			 WHERE HRNK_PAVLN_ID = #pavlnDivCd#
		]]>
		<isNotEmpty property="searchTxt">
		<!-- 나중에 컬럼추가되면 지역 검색추가 -->
		</isNotEmpty>
		<isNotEmpty property="searchTxt">
			<isEqual property="searchType" compareValue="00">
				AND (CPM.PAVLN_NM LIKE '%'||#searchTxt#||'%' OR CPM.PAVLN_ID LIKE '%'||#searchTxt#||'%')
			</isEqual>
			<isEqual property="searchType" compareValue="01">
				AND CPM.PAVLN_NM LIKE '%'||#searchTxt#||'%'
			</isEqual>
			<isEqual property="searchType" compareValue="02">
				AND CPM.PAVLN_ID LIKE '%'||#searchTxt#||'%'
			</isEqual>
		</isNotEmpty>
		<isNotEmpty property="searchStrtYmd">
	   		AND	TO_CHAR(CPM.REG_DATE, 'YYYY-MM-DD') BETWEEN #searchStrtYmd# AND #searchEndYmd#
	    </isNotEmpty>
	    <isNotEmpty property="searchAreaCd">
	   		AND	AREA_CD = #searchAreaCd#
	    </isNotEmpty>
	    <isNotEmpty property="searchSidoCd">
	   		AND	SIDO_CD = #searchSidoCd#
	    </isNotEmpty>
	    <isNotEmpty property="searchDdmPavlnId">
	   		AND DDM_PAVLN_ID LIKE '%'||#searchDdmPavlnId#||'%'
	    </isNotEmpty>
	    <!-- 공급업체가 있는 시장만 검색 -->
	    <isNotEmpty property="suppCompIdYn">
	   		AND EXISTS ( SELECT 1 FROM CO_PAVLN_MGT CPMM WHERE CPM.PAVLN_ID=CPMM.PAVLN_ID )
	    </isNotEmpty>
	</select>

	<!-- 하위업체관리 목록 조회 -->
	<select id="selectMarketMgrList" parameterClass="java.util.HashMap" resultClass="commMap">
		/* selectMarketMgrList */
		<include refid="pagingHeader"/>
		<![CDATA[
			SELECT CPM.PAVLN_ID
			        , CPM.PAVLN_DIV_CD
			        , CPM.AREA_CD
			        , CPM.SIDO_CD
			        , (SELECT COMN_CD_NM FROM CM_COMN_CD WHERE CD_GRP_ID = 'AREA_CD' AND COMN_CD_ID = CPM.AREA_CD) AS AREA_NM
			        , (SELECT COMN_CD_NM FROM CM_COMN_CD WHERE CD_GRP_ID = 'SIDO_CD' AND COMN_CD_ID = CPM.SIDO_CD) AS SIDO_NM
			        , CPM.PAVLN_NM PAVLN_NM
			        , CPM.PAVLN_INTRCN
			        , CPM.ITEMDESC AS CM
			        , CPM.TELNO
			        , CPM.ZIPCD
			        , CPM.ADDR1
			        , CPM.ADDR2
			        , CPM.HRNK_PAVLN_ID
			        , CPM.USE_YN
			        , TO_CHAR(CPM.REG_DATE,'YYYY-MM-DD') AS REG_DATE
			        , TO_CHAR(CPM.CHG_DATE,'YYYY-MM-DD') AS CHG_DATE
			        , CPM.REGER_ID
			        , CPM.CHGER_ID
			        , NVL(M_SMART_GOODS.CNT, 0) AS M_SMART_GOODS_CNT
			        , CPM.DDM_PAVLN_ID
					, (SELECT CDOM.DDM_PAVLN_INTRCN FROM CO_DDM_OR_MGT CDOM WHERE CDOM.DDM_PAVLN_ID = CPM.DDM_PAVLN_ID)AS DDM_PAVLN_INTRCN
                    , CPM.FAXNO
                    , CPM.SALES_DATE
                    , CPM.CLOSED_YMD
                    , CPM.URL
			  FROM CO_PAVLN_MAST CPM
				 , (SELECT PAVLN_ID, COUNT(*) AS CNT FROM OD_MMARKET_SMART_GOODS WHERE DISP_YN = 'Y' GROUP BY PAVLN_ID) M_SMART_GOODS
			 WHERE CPM.PAVLN_ID = M_SMART_GOODS.PAVLN_ID(+)
			   AND HRNK_PAVLN_ID = #pavlnDivCd#
		]]>
		<isNotEmpty property="searchTxt">
		<!-- 나중에 컬럼추가되면 지역 검색추가 -->
		</isNotEmpty>
		<isNotEmpty property="searchTxt">
			<isEqual property="searchType" compareValue="00">
				AND (CPM.PAVLN_NM LIKE '%'||#searchTxt#||'%' OR CPM.PAVLN_ID LIKE '%'||#searchTxt#||'%')
			</isEqual>
			<isEqual property="searchType" compareValue="01">
				AND CPM.PAVLN_NM LIKE '%'||#searchTxt#||'%'
			</isEqual>
			<isEqual property="searchType" compareValue="02">
				AND CPM.PAVLN_ID LIKE '%'||#searchTxt#||'%'
			</isEqual>
		</isNotEmpty>
		<isNotEmpty property="searchStrtYmd">
	   		AND	TO_CHAR(CPM.REG_DATE, 'YYYY-MM-DD') BETWEEN #searchStrtYmd# AND #searchEndYmd#
	    </isNotEmpty>
	    <isNotEmpty property="searchAreaCd">
	   		AND	AREA_CD = #searchAreaCd#
	    </isNotEmpty>
	    <isNotEmpty property="searchSidoCd">
	   		AND	SIDO_CD = #searchSidoCd#
	    </isNotEmpty>
	    <isNotEmpty property="searchUseYn">
	   		AND	USE_YN = #searchUseYn#
	    </isNotEmpty>
	    <isNotEmpty property="searchPavlnNm">
	   		AND CPM.PAVLN_NM LIKE '%'||#searchPavlnNm#||'%'
	    </isNotEmpty>
	    <isNotEmpty property="searchDdmPavlnId">
	   		AND	CPM.DDM_PAVLN_ID LIKE '%'||#searchDdmPavlnId#||'%'
	    </isNotEmpty>
	    <!-- 공급업체가 있는 시장만 검색 -->
	    <isNotEmpty property="suppCompIdYn">
	   		AND EXISTS ( SELECT 1 FROM CO_PAVLN_MGT CPMM WHERE CPM.PAVLN_ID=CPMM.PAVLN_ID )
	    </isNotEmpty>
		<include refid="pagingFooter"/>
	</select>

	<select id="selectmarketExcelList" parameterClass="java.util.HashMap" resultClass="commMap">
		<![CDATA[
			SELECT PAVLN_ID
			        , PAVLN_DIV_CD
			        , AREA_CD
			        , SIDO_CD
			        , (SELECT COMN_CD_NM FROM CM_COMN_CD WHERE CD_GRP_ID = 'AREA_CD' AND COMN_CD_ID = CPM.AREA_CD) AS AREA_NM
			        , (SELECT COMN_CD_NM FROM CM_COMN_CD WHERE CD_GRP_ID = 'SIDO_CD' AND COMN_CD_ID = CPM.SIDO_CD) AS SIDO_NM
			        , PAVLN_NM PAVLN_NM
			        , PAVLN_INTRCN
			        , ITEMDESC AS CM
			        , TELNO
			        , ZIPCD
			        , ADDR1
			        , ADDR2
			        , HRNK_PAVLN_ID
			        , USE_YN
			        , DSPY_NM
					, URL
					, SALES_DATE
					, CLOSED_YMD
					, FAXNO
			        , REG_DATE
			        , CHG_DATE
			        , REGER_ID
			        , CHGER_ID
			        , CPM.DDM_PAVLN_ID
					, (SELECT CDOM.DDM_PAVLN_INTRCN FROM CO_DDM_OR_MGT CDOM WHERE CDOM.DDM_PAVLN_ID = CPM.DDM_PAVLN_ID)AS DDM_PAVLN_INTRCN
			  FROM CO_PAVLN_MAST CPM
			 WHERE HRNK_PAVLN_ID = #pavlnDivCd#
		]]>
		<isNotEmpty property="searchTxt">
		<!-- 나중에 컬럼추가되면 지역 검색추가 -->
		</isNotEmpty>
		<isNotEmpty property="searchTxt">
			<isEqual property="searchType" compareValue="00">
				AND (CPM.PAVLN_NM LIKE '%'||#searchTxt#||'%' OR CPM.PAVLN_ID LIKE '%'||#searchTxt#||'%')
			</isEqual>
			<isEqual property="searchType" compareValue="01">
				AND CPM.PAVLN_NM LIKE '%'||#searchTxt#||'%'
			</isEqual>
			<isEqual property="searchType" compareValue="02">
				AND CPM.PAVLN_ID LIKE '%'||#searchTxt#||'%'
			</isEqual>
		</isNotEmpty>
		<isNotEmpty property="searchStrtYmd">
	   		AND	TO_CHAR(CPM.REG_DATE, 'YYYY-MM-DD') BETWEEN #searchStrtYmd# AND #searchEndYmd#
	    </isNotEmpty>
	    <isNotEmpty property="searchAreaCd">
	   		AND	AREA_CD = #searchAreaCd#
	    </isNotEmpty>
	    <isNotEmpty property="searchSidoCd">
	   		AND	SIDO_CD = #searchSidoCd#
	    </isNotEmpty>
	    <isNotEmpty property="searchDdmPavlnId">
	   		AND	DDM_PAVLN_ID LIKE '%'||#searchDdmPavlnId#||'%'
	    </isNotEmpty>
	</select>

	<select id="selectSuppPavlnidCheck" parameterClass="java.util.HashMap" resultClass="int">
		<![CDATA[
		SELECT COUNT(*) FROM CO_PAVLN_MAST WHERE PAVLN_ID = #pavlnId#
		]]>
	</select>

	<select id="selectPavlnid" parameterClass="java.util.HashMap" resultClass="commMap">
		<![CDATA[
		 SELECT NVL(MAX(PAVLN_ID)+1, 1) AS PAVLN_ID FROM CO_PAVLN_MAST
		 WHERE TRIM(TRANSLATE(PAVLN_ID, '1234567890','          ')) IS NULL
		]]>
	</select>

	<select id="selectPavlnMarketId" parameterClass="java.util.HashMap" resultClass="commMap">
		<![CDATA[
		 SELECT NVL(MAX(PAVLN_ID)+1, 0) FROM CO_PAVLN_MAST WHERE HRNK_PAVLN_ID = 'P05'
		]]>
	</select>

	<select id="selectPavlnb2bId" parameterClass="java.util.HashMap" resultClass="commMap">
		<![CDATA[
		 SELECT NVL(MAX(PAVLN_ID)+1, 0) FROM CO_PAVLN_MAST WHERE HRNK_PAVLN_ID = 'P08'
		]]>
	</select>

	<!-- 공급업체 전시마스터 정보 등록 -->
	<insert id="insertCoPavlnMast" parameterClass="java.util.HashMap">
		<![CDATA[
			INSERT INTO CO_PAVLN_MAST
				(
				PAVLN_ID,
				PAVLN_DIV_CD,
				AREA_CD,
				PAVLN_NM,
				PAVLN_INTRCN,
				TELNO,
				ZIPCD,
				ADDR1,
				ADDR2,
				HRNK_PAVLN_ID,
				USE_YN,
				SIDO_CD,
				ITEMDESC,
				ADD_FILE1,
				ADD_FILE2,
				DSPY_NM,
				URL,
				SALES_DATE,
				CLOSED_YMD,
				FAXNO,
				REG_DATE,
				CHG_DATE,
				REGER_ID,
				CHGER_ID,
				DDM_PAVLN_ID
				 )
			VALUES
				(
				#pavlnId#,
				#pavlnDivCd#,
				#areaCd1#,
				#pavlnNm#,
				#pavlnIntrcn#,
				#telno#,
				#zipcd#,
			    #addr1#,
			    #addr2#,
				#hrnkPavlnId#,
				#useYn#,
				#areaCd2#,
				#itemdesc#,
				#bcncLogoImageFileId#,
				#bcncBasicImageFileId#,
				#dspyNm#,
				#url#,
				#salesDate#,
				#closedYmd#,
				#faxno#,
				SYSDATE,
				SYSDATE,
				#userId#,
				#userId#,
				#ddmPavlnId#
          		)
            ]]>
	</insert>

	<!-- 공급업체 전시마스터 정보 수정 -->
	<update id="updateCoPavlnMast" parameterClass="java.util.HashMap">
		<![CDATA[
		UPDATE 	CO_PAVLN_MAST
		SET     PAVLN_NM                = #pavlnNm#,
				PAVLN_INTRCN            = #pavlnIntrcn#,
				AREA_CD                 = #areaCd1#,
				TELNO                   = #telno#,
				ZIPCD                   = #zipcd#,
			    ADDR1                   = #addr1#,
			    ADDR2                   = #addr2#,
			    USE_YN                  = #useYn#,
			    SIDO_CD                 = #areaCd2#,
				ITEMDESC                = #itemdesc#,
				ADD_FILE1               = #bcncLogoImageFileId#,
				ADD_FILE2               = #bcncBasicImageFileId#,
				DSPY_NM                 = #dspyNm#,
				URL                     = #url#,
				SALES_DATE              = #salesDate#,
				CLOSED_YMD              = #closedYmd#,
				FAXNO                   = #faxno#,
			    CHGER_ID				= #userId#,
				CHG_DATE	            = SYSDATE,
				DDM_PAVLN_ID			= #ddmPavlnId#
		WHERE 	PAVLN_ID                = #pavlnId#
		]]>
	</update>

	<insert id="insertCoPavlnMastUperCode" parameterClass="java.util.HashMap">
		<![CDATA[
			INSERT INTO CO_PAVLN_MAST
				(
				PAVLN_ID,
				PAVLN_DIV_CD,
				PAVLN_NM,
				HRNK_PAVLN_ID,
				REG_DATE,
				CHG_DATE,
				REGER_ID,
				CHGER_ID
				 )
			VALUES
				(
				#pavlnId#,
				#pavlnDivCd#,
				#bcncNm#,
				#uperSuppCompId#,
				SYSDATE,
				SYSDATE,
				#userId#,
				#userId#
          		)
            ]]>
	</insert>

	<update id="updateCoPavlnMastUperCode" parameterClass="java.util.HashMap">
		<![CDATA[
		UPDATE 	CO_PAVLN_MAST
		SET     HRNK_PAVLN_ID           = #uperSuppCompId#,
			    CHGER_ID				= #userId#,
				CHG_DATE	            = SYSDATE
		WHERE 	PAVLN_ID                = #pavlnId#
		]]>
	</update>



	<!-- 담당자1 수정-->
	<update id="updateCompPerson1" parameterClass="java.util.HashMap">
		<![CDATA[
		UPDATE 	MB_SUPP_COMP_MEM_MAST
		SET    	ADMINNM               = #memNm1#,
				EMAIL_ADDR            = #memEmail1#,
				TEL_NO                = #memTelno1#,
				FAX_NO                = #memFaxno1#,
				MOBILE_NO             = #memMobno1#,
				CHG_DATE              = SYSDATE,
				CHGER_ID              = #userId#
		WHERE 	SUPP_COMP_ACCESS_NAME = #memId1#
		]]>
	</update>

	<!-- 담당자1 수정-->
	<update id="updateCompPerson2" parameterClass="java.util.HashMap">
		<![CDATA[
		UPDATE 	MB_SUPP_COMP_MEM_MAST
		SET    	ADMINNM               = #memNm2#,
				EMAIL_ADDR            = #memEmail2#,
				TEL_NO                = #memTelno2#,
				FAX_NO                = #memFaxno2#,
				MOBILE_NO             = #memMobno2#,
				CHG_DATE              = SYSDATE,
				CHGER_ID              = #userId#
		WHERE 	SUPP_COMP_ACCESS_NAME = #memId2#
		]]>
	</update>

	<select id="selectCoPavlnMastCheck" parameterClass="java.util.HashMap" resultClass="int">
		<![CDATA[
		SELECT COUNT(*) FROM CO_PAVLN_MAST WHERE PAVLN_ID = #pavlnId#
		]]>
	</select>

	<select id="selectAreaList" parameterClass="java.util.HashMap" resultClass="commMap">
		<![CDATA[
		SELECT T2.*
	    FROM   CM_COMN_CD_GRP T1
	           , CM_COMN_CD T2
	    WHERE 1=1
	    AND    T1.CD_GRP_ID = T2.CD_GRP_ID
	    AND    T1.CD_GRP_ID = 'SIDO_CD'
	    AND    T2.CD_VAL1 = #areaCd#
	    ORDER BY T2.SORT_ORDER ASC
		]]>
	</select>

	<select id="selectTempCoSuppCompList" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT SUPP_COMP_ID, ADJ_ACC_NO
		FROM CO_SUPP_COMP_MAST
		WHERE MOV_REG_DIV_CD IN ('MMARKET','ESCROW')
		AND ADJ_ACC_NO IS NOT NULL
	</select>
	<select id="selectTempOdRetInterfaceList" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT
			ORDER_ITM_ID
			,CLAIM_REQ_SEQ
			,SEED_REFUND_ACC_NO
		FROM OD_RET_INTERFACE
		WHERE STR_DIV_CD IN ('MMARKET','ESCROW')
		AND SEED_REFUND_ACC_NO IS NOT NULL
		<isEqual property="updateYear" compareValue="emptyValue" prepend="AND">
			CLAIM_REQ_YMD IS NULL
		</isEqual>
		<isNotEqual property="updateYear" compareValue="emptyValue" prepend="AND">
			SUBSTR(CLAIM_REQ_YMD,0,4) = #updateYear#
		</isNotEqual>
	</select>
	<select id="selectTempOdOnlineExPriceList" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT ORDER_ID
			,EXPRICE_ID
			,ACCOUNT_NO
			,ACCOUNT_SEED_NO
		FROM OD_ONLINE_EX_PRICE
		WHERE STR_DIV_CD IN ('MMARKET','ESCROW')
		AND ACCOUNT_SEED_NO IS NOT NULL
	</select>
	<select id="selectTempStAdjRemitInfoList" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT ADJ_START_DAY
			,ADJ_END_DAY
			,ADJ_CHASU
			,SUPP_COMP_ID
			,ACCOUNT_NO
		FROM ST_ADJ_REMIT_INFO
		WHERE ACCOUNT_NO IS NOT NULL
	</select>



	<!-- UPDATE -->
	<update id="updateTempCoSuppCompList" parameterClass="java.util.HashMap">
		UPDATE	CO_SUPP_COMP_MAST
		SET 	ADJ_ACC_NO = #ADJ_ACC_NO#
		WHERE SUPP_COMP_ID = #SUPP_COMP_ID#
	</update>
	<update id="updateTempOdRetInterfaceList" parameterClass="java.util.HashMap">
		UPDATE	OD_RET_INTERFACE
		SET 	SEED_REFUND_ACC_NO = #SEED_REFUND_ACC_NO#
		WHERE	ORDER_ITM_ID = #ORDER_ITM_ID#
		AND 	CLAIM_REQ_SEQ = #CLAIM_REQ_SEQ#
	</update>
	<update id="updateTempOdOnlineExPriceList" parameterClass="java.util.HashMap">
		UPDATE	OD_ONLINE_EX_PRICE
		SET 	ACCOUNT_SEED_NO = #ACCOUNT_SEED_NO#
		WHERE	ORDER_ID = #ORDER_ID#
		AND 	EXPRICE_ID = #EXPRICE_ID#
	</update>
	<update id="updateTempStAdjRemitInfoList" parameterClass="java.util.HashMap">
		UPDATE	ST_ADJ_REMIT_INFO
		SET 	ACCOUNT_NO = #ACCOUNT_NO#
		WHERE	ADJ_START_DAY = #ADJ_START_DAY#
		AND 	ADJ_END_DAY = #ADJ_END_DAY#
		AND 	ADJ_CHASU = #ADJ_CHASU#
		AND 	SUPP_COMP_ID = #SUPP_COMP_ID#
	</update>
	<!-- UPDATE END -->


	<select id="selectTempSuppCompList" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT T.SUPP_COMP_ID
		FROM (
				SELECT
						(SELECT    SUBSTR(XMLAGG(XMLELEMENT(A, ','||P.SUPP_COMP_ACCESS_NAME  )).EXTRACT('//text()').GETSTRINGVAL(),2)
							FROM    MB_SUPP_COMP_MEM_MAST P
							WHERE    P.SUPP_COMP_ID = A.SUPP_COMP_ID
						 )SUPP_COMP_ACCESS_NAME
						,A.SUPP_COMP_ID
				FROM CO_SUPP_COMP_MAST A
			)T
		WHERE T.SUPP_COMP_ACCESS_NAME IS NULL
	</select>

	<!-- 임시 ID 없는 공급업체 ID 추가 (삭제필요) -->
	<insert id="insertTempMbSuppCompMemMastList" parameterClass="java.util.HashMap">
			INSERT INTO MB_SUPP_COMP_MEM_MAST
			(
				SUPP_COMP_ACCESS_NAME
				,SUPP_COMP_ID
				,ADMINNM
				,PASSWD
				,PASSWD_LOCK_YN
				,ADMIN_DIV_CD
				,ADMIN_STUS_CD
				,NTT_RUN_PLCY_AGREE_YN
				,NTT_RUN_PLCY_AGREE_YMD
				,PRSNL_INFO_TREAT_PSSB_YN
				,EMAIL_ADDR
				,EMAIL_RECV_YN
				,PO_ECODE
				,REG_DATE
				,CHG_DATE
				,REGER_ID
				,CHGER_ID
				,MAIN_ID_YN
			)
			SELECT	SUPP_COMP_ID AS SUPP_COMP_ACCESS_NAME
					,SUPP_COMP_ID
					,PRSDT_NM
					,'xMpCOKC5I4INzFCab3WEmw==' AS PASSWD
					,'N' AS PASSWD_LOCK_YN
					,'20' AS ADMIN_DIV_CD
					,'30' AS ADMIN_STUS_CD
					,'N' AS NTT_RUN_PLCY_AGREE_YN
					,'N' AS NTT_RUN_PLCY_AGREE_YMD
					,'N' AS PRSNL_INFO_TREAT_PSSB_YN
					,EMAIL AS EMAIL_ADDR
					,'N' AS EMAIL_RECV_YN
					,PO_ECODE
					,SYSDATE AS REG_DATE
					,SYSDATE AS CHG_DATE
					,#loginId#
					,#loginId#
					,'Y' AS MAIN_ID_YN
			FROM	CO_SUPP_COMP_MAST
			WHERE	SUPP_COMP_ID = #SUPP_COMP_ID#
	</insert>

	<select id="selectSuppCompMemMastInfo" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT SUPP_COMP_ACCESS_NAME
			,SUPP_COMP_ID
			,PASSWD
		FROM MB_SUPP_COMP_MEM_MAST
		WHERE SUPP_COMP_ID = #suppCompId#
		AND ROWNUM = 1
	</select>
</sqlMap>