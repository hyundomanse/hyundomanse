<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="BO.Send">
	<typeAlias  alias="commMap" type="com.devwork.common.map.CommonMap"/>

	<!-- 배송관리 리스트 쿼리 -->
	<sql id="send_list_query">
		SELECT OOM.ORDRR_NM 												/*주문자 성명*/
			  ,OOM.ORDRR_ZIPCD												/*주문자 우편번호*/
			  ,OOM.ORDRR_ADDR1 												/*주문자 주소*/
			  ,OOM.ORDRR_ADDR2 												/*주문자 상세주소*/
			  ,TO_CHAR(OOM.ORDER_DATE, 'YYYY-MM-DD') AS ORDER_DATE			/*주문 일자*/
			  ,OOM.ORDRR_HTELNO												/* 구매자 휴대폰 */
			  ,OOI.ORDER_ITM_ID
			  ,OOI.ORIG_ORDER_ITM_ID
			  ,OOI.ORDER_ID
			  ,OOI.DC_APPLY_PRC
			  ,OOI.PAVLN_ID
			  ,OOI.PAVLN_DIV_NM
			  ,OOI.PAVLN_DIV_CD
			  ,OOI.SUPP_COMP_ID
			  ,OOI.SUPP_COMP_NM
			  ,OOI.SUPP_PO_NM
			  ,OOI.SUPP_COMP_TELNO
			  ,OOI.SEND_MSG_YN
			  ,OOI.GOODS_CD
			  ,OOI.GOODS_NM
			  ,OOI.REQ_CNT
			  ,OOI.SEND_CONF_DATE
			  ,OOI.EXTRA_GOODS_CNT
			  ,OOI.RECPTER_NM
			  ,OOI.RECPTER_ZIPCD
			  ,OOI.RECPTER_ADDR1
			  ,OOI.RECPTER_ADDR2
			  ,OOI.RECPTER_TELNO
			  ,OOI.RECPTER_HTELNO
			  ,OOI.WISH_SEND_DATE
		  FROM (
				SELECT A.ORDER_ITM_ID 					/*주문 아이템 id */
					  ,A.ORIG_ORDER_ITM_ID 				/*원 주문 아이템 id */
					  ,A.ORDER_ID 						/*주문 id */
					  ,A.DC_APPLY_PRC					/*할인가격*/
					  ,A.PAVLN_ID 						/*전시관 id */
					  ,F_GET_COMN_CD_NM('PAVLN_DIV_CD', A.PAVLN_DIV_CD) PAVLN_DIV_NM		/*전시관*/
					  ,A.PAVLN_DIV_CD 					/*전시관 분류 코드 */
					  ,A.SUPP_COMP_ID 					/*공급 업체 id */
					  ,A.SUPP_COMP_NM 					/*공급 업체 명 */
					  ,A.SUPP_PO_NM 					/*공급 우체국 명 */
					  ,(SELECT TELNO FROM CO_SUPP_COMP_MAST WHERE SUPP_COMP_ID = A.SUPP_COMP_ID) AS SUPP_COMP_TELNO		/*공급업체 전화번호 */
					  ,DECODE((SELECT OSM.SEND_MSG_CONT FROM OD_SEND_MSG OSM WHERE OSM.ORDER_ITM_ID = A.ORDER_ITM_ID
								  AND OSM.USEYN='Y' AND OSM.SEND_MSG_TYP_CD='B'), NULL, 'X', 'O') AS SEND_MSG_YN		/*약호여부*/
					  ,A.GOODS_CD 						/*상품 코드 */
					  ,A.GOODS_NM 						/*상품 명 */
					  ,A.REQ_CNT 						/*상품 주문 수량 */
					  ,A.SEND_CONF_DATE 				/*배송 확인 일시 */
					  ,NVL(A.EXTRA_GOODS_CNT, 0) AS EXTRA_GOODS_CNT		/*덤 상품 수량 */
					  ,A.RECPTER_NM 					/*수취인 명 */
					  ,A.RECPTER_ZIPCD 					/*수취인 우편번호 */
					  ,A.RECPTER_ADDR1 					/*수취인 주소1 */
					  ,A.RECPTER_ADDR2 					/*수취인 주소2 */
					  ,A.RECPTER_TELNO 					/*수취인 전화번호 */
					  ,A.RECPTER_HTELNO 				/*수취인 핸드폰번호 */
					  ,NVL(TO_CHAR(A.WISH_SEND_DATE,'YYYYMMDD'),TO_CHAR(B.APPR_DATE,'YYYYMMDD')) WISH_SEND_DATE		/*희망 배송 일시 */
					  ,A.EVENT_ID
				  FROM OD_ORDER_ITM A,
					   OD_ORDER_MAST B,
					   OD_ORDER_SETL C
				 WHERE 1=1
				   AND A.ORDER_ID = B.ORDER_ID
				   AND B.ORDER_ID = C.ORDER_ID
				   AND C.SETL_SEQ = '1'
				   AND C.USE_YN = 'Y'
				/* AND NVL(A.PRSNT_YN,'N') = 'N'
				   AND NVL(A.EXTRA_GOODS_YN,'N') = 'N' */
				 <!--
				   일반주문 / 해외주문 / 자체배송 구분
				   일반주문 : SEND_NATION_CD = 'KR'
				   해외주문 : SEND_NATION_CD != 'KR'
				   자체배송 : SEND_TYP_CD = '05'
				-->
				<isEqual property="tab_gbn" compareValue="01">
				   <!-- AND SEND_NATION_CD = 'KR' -->
				</isEqual>
				<isEqual property="tab_gbn" compareValue="02">
				   AND A.SEND_NATION_CD != 'KR'
				</isEqual>
				<isEqual property="tab_gbn" compareValue="03">
				   AND A.SEND_TYP_CD = '05'
				</isEqual>
				<isNotEmpty property="search_txt">
					<isEqual property="search_type" compareValue="suppPo">
					   AND A.SUPP_PO_NM LIKE '%'||#search_txt#||'%'
					</isEqual>
					<isEqual property="search_type" compareValue="suppComp">
					   AND A.SUPP_COMP_NM LIKE '%'||#search_txt#||'%'
					</isEqual>
					<isEqual property="search_type" compareValue="orderNo">
					   AND A.ORDER_ID LIKE '%'||#search_txt#||'%'
					</isEqual>
					<isEqual property="search_type" compareValue="cust">
					   AND B.ORDRR_NM LIKE '%'||#search_txt#||'%'
					</isEqual>
					<isEqual property="search_type" compareValue="event">
					   AND A.EVENT_ID IN
						<iterate property="searchEventIds" open="("  close=")" conjunction=",">
							#searchEventIds[]#
						</iterate>
					</isEqual>
				</isNotEmpty>
				<isNotEmpty property="searchEventDivCd">
				   AND A.EVENT_DIV_CD = #searchEventDivCd#
				</isNotEmpty>
				<isNotEmpty property="search_pavln_div_cd">
				   AND A.PAVLN_DIV_CD = #search_pavln_div_cd#
				</isNotEmpty>

				/* 배송상태: 주문확인후 */
				<isEqual property="search_status" compareValue="O04">
				   AND A.ORDER_STUS_CD = 'O04'
				</isEqual>

				/* 배송상태: 배송중 */
				<isEqual property="search_status" compareValue="D02">
				   AND A.ORDER_STUS_CD = 'D02'
				</isEqual>

				/* 배송상태: 배송완료 */
				<isEqual property="search_status" compareValue="D03">
				   AND A.ORDER_STUS_CD IN ('D03', 'D04')
				</isEqual>

				/* 배송상태: 전체 */
				<isEmpty property="search_status">
				   AND A.ORDER_STUS_CD IN ('O04', 'D02', 'D03', 'D04')
				</isEmpty>

			) OOI INNER JOIN OD_ORDER_MAST OOM  ON OOM.ORDER_ID = OOI.ORDER_ID
		 WHERE 1=1
		<isNotEmpty property="searchFromDt">
		   AND OOM.ORDER_DATE <![CDATA[>=]]> TO_DATE(#searchFromDt#||'000000', 'YYYYMMDDHH24MISS')
		   AND OOM.ORDER_DATE <![CDATA[<=]]> TO_DATE(#searchToDt#||'235959', 'YYYYMMDDHH24MISS')
		</isNotEmpty>
		<isEqual property="search_type" compareValue="event">
		 ORDER BY OOI.EVENT_ID, OOM.ORDER_DATE DESC
		</isEqual>
		<isNotEqual property="search_type" compareValue="event">
		 ORDER BY OOM.ORDER_DATE DESC
		</isNotEqual>
	</sql>

	<!-- 배송관리 리스트 카운트-->
	<select id="selectSendMgrListCount" parameterClass ="java.util.HashMap" resultClass="int">
		/** SQL_ID : selectSendMgrListCount **/
		SELECT COUNT(*)
		  FROM (
				SELECT A.ORDER_ITM_ID
					  ,B.ORDER_DATE
					  ,B.ORDRR_NM
					  ,A.SUPP_COMP_ID
					  ,A.GOODS_CD
					  ,NVL(TO_CHAR(A.WISH_SEND_DATE,'YYYYMMDD'),TO_CHAR(B.APPR_DATE,'YYYYMMDD')) WISH_SEND_DATE
					  ,A.EVENT_ID
				  FROM OD_ORDER_ITM A
					  ,OD_ORDER_MAST B
					  ,OD_ORDER_SETL C
				 WHERE A.ORDER_ID = B.ORDER_ID
				   AND B.ORDER_ID = C.ORDER_ID
				   AND C.SETL_SEQ = '1'
				   AND C.USE_YN = 'Y'
				/* AND NVL(A.PRSNT_YN,'N') = 'N'
				   AND NVL(A.EXTRA_GOODS_YN,'N') = 'N' */
				<isEqual property="tab_gbn" compareValue="01">
				   <!-- AND SEND_NATION_CD = 'KR' -->
				</isEqual>
				<isEqual property="tab_gbn" compareValue="02">
				   AND SEND_NATION_CD != 'KR'
				</isEqual>
				<isEqual property="tab_gbn" compareValue="03">
				   AND SEND_TYP_CD = '05'
				</isEqual>
				<isNotEmpty property="search_txt">
					<isEqual property="search_type" compareValue="suppPo">
					   AND A.SUPP_PO_NM LIKE '%'||#search_txt#||'%'
					</isEqual>
					<isEqual property="search_type" compareValue="suppComp">
					   AND A.SUPP_COMP_NM LIKE '%'||#search_txt#||'%'
					</isEqual>
					<isEqual property="search_type" compareValue="orderNo">
					   AND A.ORDER_ID LIKE '%'||#search_txt#||'%'
					</isEqual>
					<isEqual property="search_type" compareValue="cust">
					   AND B.ORDRR_NM LIKE '%'||#search_txt#||'%'
					</isEqual>
					<isEqual property="search_type" compareValue="event">
					   AND A.EVENT_ID IN
						<iterate property="searchEventIds" open="("  close=")" conjunction=",">
							#searchEventIds[]#
						</iterate>
					</isEqual>
				</isNotEmpty>
				<isNotEmpty property="searchEventDivCd">
				   AND A.EVENT_DIV_CD = #searchEventDivCd#
				</isNotEmpty>
				<isNotEmpty property="search_pavln_div_cd">
				   AND A.PAVLN_DIV_CD = #search_pavln_div_cd#
				</isNotEmpty>

				/* 배송상태: 주문확인후 */
				<isEqual property="search_status" compareValue="O04">
				   AND A.ORDER_STUS_CD = 'O04'
				</isEqual>

				/* 배송상태: 배송중 */
				<isEqual property="search_status" compareValue="D02">
				   AND A.ORDER_STUS_CD = 'D02'
				</isEqual>

				/* 배송상태: 배송완료 */
				<isEqual property="search_status" compareValue="D03">
				   AND A.ORDER_STUS_CD IN ('D03', 'D04')
				</isEqual>

				/* 배송상태: 전체 */
				<isEmpty property="search_status">
				   AND A.ORDER_STUS_CD IN (<!-- 'O02', 'O03', --> 'O04', 'D01', 'D02', 'D03', 'D04')
				</isEmpty>

			) OOI
		 WHERE 1=1
		<isNotEmpty property="searchFromDt">
		   AND OOI.ORDER_DATE <![CDATA[>=]]> TO_DATE(#searchFromDt#||'000000', 'YYYYMMDDHH24MISS')
		   AND OOI.ORDER_DATE <![CDATA[<=]]> TO_DATE(#searchToDt#||'235959', 'YYYYMMDDHH24MISS')
		</isNotEmpty>
	</select>

	<!-- 이벤트 명으로 검색 시 이벤트 ID 리스트 -->
	<select id="selectEventNmSearchList" parameterClass ="java.util.HashMap" resultClass="commMap">
		SELECT EVENT_ID
		  FROM EV_EVENT_MAST
		 WHERE EVENT_NM LIKE '%'||#search_txt#||'%'
	</select>

	<!-- 배송관리 리스트 -->
	<select id="selectSendMgrList" parameterClass ="java.util.HashMap" resultClass="commMap">
		/** SQL_ID : selectSendMgrList **/
		SELECT RNUM
			  ,ORDER_ID
			  ,ORDER_DATE
			  ,PAVLN_DIV_NM
			  ,GOODS_CD
			  ,GOODS_NM
			  ,TOT_GOODS_CNT
			  ,SUPP_COMP_NM
			  ,SUPP_PO_NM
			  ,EXTRA_GOODS_CNT
			  ,DC_APPLY_PRC
			  ,WISH_SEND_DATE
			  ,SEND_MSG_YN
			  ,BALTSHT_PRT_YN
			  ,ORDER_STUS
			  ,ORDER_STUS_CD
			  ,ORDRR_NM
			  ,ORDRR_ZIPCD
			  ,ORDRR_ADDR1
			  ,ORDRR_ADDR2
			  ,ORDRR_TELNO
			  ,ORDRR_HTELNO
			  ,RECPTER_NM
			  ,RECPTER_ZIPCD
			  ,RECPTER_ADDR1
			  ,RECPTER_ADDR2
			  ,RECPTER_TELNO
			  ,RECPTER_HTELNO
			  ,ORDER_ITM_ID
			  ,PAVLN_ID
			  ,PAVLN_DIV_CD
			  ,SUPP_COMP_ID
			  ,SUPP_COMP_TELNO
			  ,EVENT_DIV_NM
			  ,EVENT_NM
		  FROM (
				SELECT ROWNUM AS RNUM
					  ,T.ORDER_ID
					  ,T.ORDER_DATE
					  ,T.PAVLN_DIV_NM
					  ,T.GOODS_CD
					  ,T.GOODS_NM
					  ,T.TOT_GOODS_CNT
					  ,T.SUPP_COMP_NM
					  ,T.SUPP_PO_NM
					  ,T.EXTRA_GOODS_CNT
					  ,T.DC_APPLY_PRC
					  ,T.WISH_SEND_DATE
					  ,T.SEND_MSG_YN
					  ,T.BALTSHT_PRT_YN
					  ,T.ORDER_STUS
					  ,T.ORDER_STUS_CD
					  ,T.ORDRR_NM
					  ,T.ORDRR_ZIPCD
					  ,T.ORDRR_ADDR1
					  ,T.ORDRR_ADDR2
					  ,NVL2(T.ORDRR_TELNO,F_DIV_TELNO(T.ORDRR_TELNO,'F')||'-'||F_DIV_TELNO(T.ORDRR_TELNO,'M')||'-'||F_DIV_TELNO(T.ORDRR_TELNO,'L'),'') ORDRR_TELNO
					  ,NVL2(T.ORDRR_HTELNO,F_DIV_TELNO(T.ORDRR_HTELNO,'F')||'-'||F_DIV_TELNO(T.ORDRR_HTELNO,'M')||'-'||F_DIV_TELNO(T.ORDRR_HTELNO,'L'),'') ORDRR_HTELNO
					  ,T.RECPTER_NM
					  ,T.RECPTER_ZIPCD
					  ,T.RECPTER_ADDR1
					  ,T.RECPTER_ADDR2
					  ,NVL2(T.RECPTER_TELNO,F_DIV_TELNO(T.RECPTER_TELNO,'F')||'-'||F_DIV_TELNO(T.RECPTER_TELNO,'M')||'-'||F_DIV_TELNO(T.RECPTER_TELNO,'L'),'') RECPTER_TELNO
					  ,NVL2(T.RECPTER_HTELNO,F_DIV_TELNO(T.RECPTER_HTELNO,'F')||'-'||F_DIV_TELNO(T.RECPTER_HTELNO,'M')||'-'||F_DIV_TELNO(T.RECPTER_HTELNO,'L'),'') RECPTER_HTELNO
					  ,T.ORDER_ITM_ID
					  ,T.PAVLN_ID
					  ,T.PAVLN_DIV_CD
					  ,T.SUPP_COMP_ID
					  ,T.SUPP_COMP_TELNO
					  ,T.EVENT_DIV_NM
					  ,T.EVENT_NM
				  FROM (
						SELECT A.ORDER_ID																						/*주문 id			*/
							  ,TO_CHAR(B.ORDER_DATE, 'YYYY-MM-DD') AS ORDER_DATE												/*주문 일자			*/
							  ,F_GET_COMN_CD_NM('PAVLN_DIV_CD', A.PAVLN_DIV_CD) PAVLN_DIV_NM									/*전시관			*/
							  ,A.GOODS_CD																						/*상품 코드			*/
							  ,A.GOODS_NM																						/*상품 명			*/
							  ,1 TOT_GOODS_CNT																					/*상품 주문 수량	*/
							  ,A.SUPP_COMP_NM																					/*공급 업체 명		*/
							  ,A.SUPP_PO_NM																						/*공급 우체국 명	*/
							  ,NVL(A.EXTRA_GOODS_CNT, 0)  EXTRA_GOODS_CNT														/*덤 상품 수량		*/
							  ,A.DC_APPLY_PRC																					/*할인가격			*/
							  ,NVL(TO_CHAR(A.WISH_SEND_DATE,'YYYY-MM-DD'),TO_CHAR(B.APPR_DATE,'YYYY-MM-DD')) WISH_SEND_DATE		/*희망 배송 일시	*/
							  ,DECODE((SELECT OSM.SEND_MSG_CONT FROM OD_SEND_MSG OSM WHERE OSM.ORDER_ITM_ID = A.ORDER_ITM_ID
											  AND OSM.USEYN='Y' AND OSM.SEND_MSG_TYP_CD='B'), NULL, 0, 1) AS SEND_MSG_YN		/*약호여부			*/
							  ,NVL(A.BALTSHT_PRT_YN,'N') BALTSHT_PRT_YN															/*기표지출력여부	*/
							  ,F_GET_COMN_CD_NM('ORDER_STUS_CD',A.ORDER_STUS_CD) ORDER_STUS					/*주문상세상태		*/
							  ,A.ORDER_STUS_CD																			/*주문상세상태코드	*/
							  ,NVL(B.ORDRR_NM,A.SENDER_NM) ORDRR_NM																/*주문자 명			*/
							  ,NVL(B.ORDRR_ZIPCD,A.SENDER_ZIPCD) ORDRR_ZIPCD													/*주문자 우편번호	*/
							  ,NVL(B.ORDRR_ADDR1,A.SENDER_ADDR1) ORDRR_ADDR1													/*주문자 주소		*/
							  ,NVL(B.ORDRR_ADDR2,A.SENDER_ADDR2) ORDRR_ADDR2													/*주문자 상세주소	*/
							  ,NVL(B.ORDRR_TELNO,A.SENDER_TELNO) ORDRR_TELNO													/*주문자 전화번호	*/
							  ,NVL(B.ORDRR_HTELNO,A.SENDER_HTELNO) ORDRR_HTELNO													/*주문자 핸드폰번호	*/
							  ,A.RECPTER_NM																						/*수취인 명			*/
							  ,A.RECPTER_ZIPCD																					/*수취인 우편번호	*/
							  ,A.RECPTER_ADDR1																					/*수취인 주소		*/
							  ,A.RECPTER_ADDR2																					/*수취인 상세주소	*/
							  ,A.RECPTER_TELNO																					/*수취인 전화번호	*/
							  ,A.RECPTER_HTELNO																					/*수취인 핸드폰번호	*/
							  ,A.ORDER_ITM_ID																					/*주문 아이템 id	*/
							  ,A.PAVLN_ID																						/*전시관 id			*/
							  ,A.PAVLN_DIV_CD																					/*전시관 분류 코드	*/
							  ,A.SUPP_COMP_ID																					/*공급 업체 id		*/
							  ,(SELECT TELNO FROM CO_SUPP_COMP_MAST WHERE SUPP_COMP_ID = A.SUPP_COMP_ID) AS SUPP_COMP_TELNO		/*공급업체 전화번호	*/
							  ,F_GET_COMN_CD_NM('EVENT_DIV_CD', A.EVENT_DIV_CD) EVENT_DIV_NM
							  ,(SELECT EVENT_NM FROM EV_EVENT_MAST WHERE EVENT_ID = A.EVENT_ID AND ROWNUM = 1) EVENT_NM
						  FROM OD_ORDER_ITM A,
							   OD_ORDER_MAST B,
							   OD_ORDER_SETL C
						 WHERE 1=1
						   AND A.ORDER_ID = B.ORDER_ID
						   AND B.ORDER_ID = C.ORDER_ID
						   AND C.SETL_SEQ = '1'
						   AND C.USE_YN = 'Y'
						/* AND NVL(A.PRSNT_YN,'N') = 'N'
						   AND NVL(A.EXTRA_GOODS_YN,'N') = 'N' */
						 <!--
						   일반주문 / 해외주문 / 자체배송 구분
						   일반주문 : SEND_NATION_CD = 'KR'
						   해외주문 : SEND_NATION_CD != 'KR'
						   자체배송 : SEND_TYP_CD = '05'
						-->
						<isNotEmpty property="searchFromDt">
						   AND B.ORDER_DATE <![CDATA[>=]]> TO_DATE(#searchFromDt#||'000000', 'YYYYMMDDHH24MISS')
						   AND B.ORDER_DATE <![CDATA[<=]]> TO_DATE(#searchToDt#||'235959', 'YYYYMMDDHH24MISS')
						</isNotEmpty>
						<isEqual property="tab_gbn" compareValue="01">
						   <!-- AND SEND_NATION_CD = 'KR' -->
						</isEqual>
						<isEqual property="tab_gbn" compareValue="02">
						   AND A.SEND_NATION_CD != 'KR'
						</isEqual>
						<isEqual property="tab_gbn" compareValue="03">
						   AND A.SEND_TYP_CD = '05'
						</isEqual>
						<isNotEmpty property="search_txt">
							<isEqual property="search_type" compareValue="suppPo">
							   AND A.SUPP_PO_NM LIKE '%'||#search_txt#||'%'
							</isEqual>
							<isEqual property="search_type" compareValue="suppComp">
							   AND A.SUPP_COMP_NM LIKE '%'||#search_txt#||'%'
							</isEqual>
							<isEqual property="search_type" compareValue="orderNo">
							   AND A.ORDER_ID LIKE '%'||#search_txt#||'%'
							</isEqual>
							<isEqual property="search_type" compareValue="cust">
							   AND B.ORDRR_NM LIKE '%'||#search_txt#||'%'
							</isEqual>
						</isNotEmpty>
						<isNotEmpty property="searchEventDivCd">
						   AND A.EVENT_DIV_CD = #searchEventDivCd#
						</isNotEmpty>
						<isNotEmpty property="search_pavln_div_cd">
						   AND A.PAVLN_DIV_CD = #search_pavln_div_cd#
						</isNotEmpty>

						/* 배송상태: 주문확인후 */
						<isEqual property="search_status" compareValue="O04">
						   AND A.ORDER_STUS_CD = 'O04'
						</isEqual>

						/* 배송상태: 배송중 */
						<isEqual property="search_status" compareValue="D02">
						   AND A.ORDER_STUS_CD = 'D02'
						</isEqual>

						/* 배송상태: 배송완료 */
						<isEqual property="search_status" compareValue="D03">
						   AND A.ORDER_STUS_CD IN ('D03', 'D04')
						</isEqual>

						/* 배송상태: 전체 */
						<isEmpty property="search_status">
						   AND A.ORDER_STUS_CD IN (<!-- 'O02', 'O03', --> 'O04', 'D02', 'D03', 'D04')
						</isEmpty>
						<isEqual property="search_type" compareValue="event">
						 ORDER BY A.EVENT_ID, B.ORDER_DATE DESC
						</isEqual>
						<isNotEqual property="search_type" compareValue="event">
						 ORDER BY B.ORDER_DATE DESC
						</isNotEqual>
					) T
				 WHERE ROWNUM <![CDATA[<=]]> #lastIndex#
			)
		 WHERE RNUM >= #firstIndex#
	</select>

	<!-- 배송관리 카운트 네비 -->
	<select id="selectSendStusCount" parameterClass ="java.util.HashMap" resultClass="commMap">
	/** SQL_ID : selectSendStusCount **/
	SELECT SUM(CNT1) AS CNT1
	          , SUM(CNT2) AS CNT2
	          , SUM(CNT3) AS CNT3
	          , SUM(CNT4) AS CNT4
	          , SUM(CNT5) AS CNT5
	          , SUM(CNT6) AS CNT6

	 FROM (
	    /* 전체 */
	    SELECT COUNT(*) AS CNT1
	              , 0 AS CNT2
	              , 0 AS CNT3
	              , 0 AS CNT4
	              , 0 AS CNT5
	              , 0 AS CNT6
	      FROM OD_ORDER_ITM A
	             , OD_ORDER_MAST B
	             , OD_ORDER_SETL C

	     WHERE  A.ORDER_ID = B.ORDER_ID
		   AND B.ORDER_ID = C.ORDER_ID
		   AND C.SETL_SEQ = '1'
		   AND C.USE_YN = 'Y'
		/* AND NVL(A.PRSNT_YN,'N') = 'N'
		   AND NVL(A.EXTRA_GOODS_YN,'N') = 'N' */
		<isEqual property="tab_gbn" compareValue="01">
		   <!-- AND SEND_NATION_CD = 'KR' -->
		</isEqual>
		<isEqual property="tab_gbn" compareValue="02">
		   AND SEND_NATION_CD != 'KR'
		</isEqual>
		<isEqual property="tab_gbn" compareValue="03">
		   AND SEND_TYP_CD = '05'
		</isEqual>
		<isNotEmpty property="search_txt">
			<isEqual property="search_type" compareValue="suppPo">
			   AND A.SUPP_PO_NM LIKE '%'||#search_txt#||'%'
			</isEqual>
			<isEqual property="search_type" compareValue="suppComp">
			   AND A.SUPP_COMP_NM LIKE '%'||#search_txt#||'%'
			</isEqual>
			<isEqual property="search_type" compareValue="orderNo">
			   AND A.ORDER_ID LIKE '%'||#search_txt#||'%'
			</isEqual>
			<isEqual property="search_type" compareValue="cust">
			   AND B.ORDRR_NM LIKE '%'||#search_txt#||'%'
			</isEqual>
			<isEqual property="search_type" compareValue="event">
			   AND A.EVENT_ID IN
				<iterate property="searchEventIds" open="("  close=")" conjunction=",">
					#searchEventIds[]#
				</iterate>
			</isEqual>
		</isNotEmpty>
		<isNotEmpty property="searchEventDivCd">
		   AND A.EVENT_DIV_CD = #searchEventDivCd#
		</isNotEmpty>
		<isNotEmpty property="search_pavln_div_cd">
		   AND A.PAVLN_DIV_CD = #search_pavln_div_cd#
		</isNotEmpty>
		   AND A.ORDER_STUS_CD IN ('O04', 'D02', 'D03', 'D04')
		<isNotEmpty property="searchFromDt">
		   AND B.ORDER_DATE <![CDATA[>=]]> TO_DATE(#searchFromDt#||'000000', 'YYYYMMDDHH24MISS')
		   AND B.ORDER_DATE <![CDATA[<=]]> TO_DATE(#searchToDt#||'235959', 'YYYYMMDDHH24MISS')
		</isNotEmpty>
	    UNION
	    /* 배송상태: 주문확인후 */
	    SELECT 0 AS CNT1
	              , 0 AS CNT2
	              , COUNT(*) AS CNT3
	              , 0 AS CNT4
	              , 0 AS CNT5
	              , 0 AS CNT6
	      FROM OD_ORDER_ITM A
	             , OD_ORDER_MAST B
	             , OD_ORDER_SETL C
	     WHERE A.ORDER_ID = B.ORDER_ID
		   AND B.ORDER_ID = C.ORDER_ID
		   AND C.SETL_SEQ = '1'
		   AND C.USE_YN = 'Y'
		/* AND NVL(A.PRSNT_YN,'N') = 'N'
		   AND NVL(A.EXTRA_GOODS_YN,'N') = 'N' */
		<isEqual property="tab_gbn" compareValue="01">
		   <!-- AND SEND_NATION_CD = 'KR' -->
		</isEqual>
		<isEqual property="tab_gbn" compareValue="02">
		   AND SEND_NATION_CD != 'KR'
		</isEqual>
		<isEqual property="tab_gbn" compareValue="03">
		   AND SEND_TYP_CD = '05'
		</isEqual>
		<isNotEmpty property="search_txt">
			<isEqual property="search_type" compareValue="suppPo">
			   AND A.SUPP_PO_NM LIKE '%'||#search_txt#||'%'
			</isEqual>
			<isEqual property="search_type" compareValue="suppComp">
			   AND A.SUPP_COMP_NM LIKE '%'||#search_txt#||'%'
			</isEqual>
			<isEqual property="search_type" compareValue="orderNo">
			   AND A.ORDER_ID LIKE '%'||#search_txt#||'%'
			</isEqual>
			<isEqual property="search_type" compareValue="cust">
			   AND B.ORDRR_NM LIKE '%'||#search_txt#||'%'
			</isEqual>
			<isEqual property="search_type" compareValue="event">
			   AND A.EVENT_ID IN
				<iterate property="searchEventIds" open="("  close=")" conjunction=",">
					#searchEventIds[]#
				</iterate>
			</isEqual>
		</isNotEmpty>
		<isNotEmpty property="searchEventDivCd">
		   AND A.EVENT_DIV_CD = #searchEventDivCd#
		</isNotEmpty>
		<isNotEmpty property="search_pavln_div_cd">
		   AND A.PAVLN_DIV_CD = #search_pavln_div_cd#
		</isNotEmpty>
		   AND A.ORDER_STUS_CD = 'O04'
		<isNotEmpty property="searchFromDt">
		   AND B.ORDER_DATE <![CDATA[>=]]> TO_DATE(#searchFromDt#||'000000', 'YYYYMMDDHH24MISS')
		   AND B.ORDER_DATE <![CDATA[<=]]> TO_DATE(#searchToDt#||'235959', 'YYYYMMDDHH24MISS')
		</isNotEmpty>
	    /* 배송상태: 배송중 */
	    UNION
	    SELECT 0 AS CNT1
	              , 0 AS CNT2
	              , 0 AS CNT3
	              , 0 AS CNT4
	              , COUNT(*) AS CNT5
	              , 0 AS CNT6
	      FROM OD_ORDER_ITM A
	             , OD_ORDER_MAST B
	             , OD_ORDER_SETL C

	     WHERE A.ORDER_ID = B.ORDER_ID
		   AND B.ORDER_ID = C.ORDER_ID
		   AND C.SETL_SEQ = '1'
		   AND C.USE_YN = 'Y'
		/* AND NVL(A.PRSNT_YN,'N') = 'N'
		   AND NVL(A.EXTRA_GOODS_YN,'N') = 'N' */
		<isEqual property="tab_gbn" compareValue="01">
		   <!-- AND SEND_NATION_CD = 'KR' -->
		</isEqual>
		<isEqual property="tab_gbn" compareValue="02">
		   AND SEND_NATION_CD != 'KR'
		</isEqual>
		<isEqual property="tab_gbn" compareValue="03">
		   AND SEND_TYP_CD = '05'
		</isEqual>
		<isNotEmpty property="search_txt">
			<isEqual property="search_type" compareValue="suppPo">
			   AND A.SUPP_PO_NM LIKE '%'||#search_txt#||'%'
			</isEqual>
			<isEqual property="search_type" compareValue="suppComp">
			   AND A.SUPP_COMP_NM LIKE '%'||#search_txt#||'%'
			</isEqual>
			<isEqual property="search_type" compareValue="orderNo">
			   AND A.ORDER_ID LIKE '%'||#search_txt#||'%'
			</isEqual>
			<isEqual property="search_type" compareValue="cust">
			   AND B.ORDRR_NM LIKE '%'||#search_txt#||'%'
			</isEqual>
			<isEqual property="search_type" compareValue="event">
			   AND A.EVENT_ID IN
				<iterate property="searchEventIds" open="("  close=")" conjunction=",">
					#searchEventIds[]#
				</iterate>
			</isEqual>
		</isNotEmpty>
		<isNotEmpty property="searchEventDivCd">
		   AND A.EVENT_DIV_CD = #searchEventDivCd#
		</isNotEmpty>
		<isNotEmpty property="search_pavln_div_cd">
		   AND A.PAVLN_DIV_CD = #search_pavln_div_cd#
		</isNotEmpty>
		   AND A.ORDER_STUS_CD = 'D02'
		<isNotEmpty property="searchFromDt">
		   AND B.ORDER_DATE <![CDATA[>=]]> TO_DATE(#searchFromDt#||'000000', 'YYYYMMDDHH24MISS')
		   AND B.ORDER_DATE <![CDATA[<=]]> TO_DATE(#searchToDt#||'235959', 'YYYYMMDDHH24MISS')
		</isNotEmpty>

	    /* 배송상태: 배송완료 */
	    UNION
	    SELECT 0 AS CNT1
	              , 0 AS CNT2
	              , 0 AS CNT3
	              , 0 AS CNT4
	              , 0 AS CNT5
	              , COUNT(*) AS CNT6
	      FROM OD_ORDER_ITM A
	             , OD_ORDER_MAST B
	             , OD_ORDER_SETL C

	     WHERE A.ORDER_ID = B.ORDER_ID
		   AND B.ORDER_ID = C.ORDER_ID
		   AND C.SETL_SEQ = '1'
		   AND C.USE_YN = 'Y'
		/* AND NVL(A.PRSNT_YN,'N') = 'N'
		   AND NVL(A.EXTRA_GOODS_YN,'N') = 'N' */
		<isEqual property="tab_gbn" compareValue="01">
		   <!-- AND SEND_NATION_CD = 'KR' -->
		</isEqual>
		<isEqual property="tab_gbn" compareValue="02">
		   AND SEND_NATION_CD != 'KR'
		</isEqual>
		<isEqual property="tab_gbn" compareValue="03">
		   AND SEND_TYP_CD = '05'
		</isEqual>
		<isNotEmpty property="search_txt">
			<isEqual property="search_type" compareValue="suppPo">
			   AND A.SUPP_PO_NM LIKE '%'||#search_txt#||'%'
			</isEqual>
			<isEqual property="search_type" compareValue="suppComp">
			   AND A.SUPP_COMP_NM LIKE '%'||#search_txt#||'%'
			</isEqual>
			<isEqual property="search_type" compareValue="orderNo">
			   AND A.ORDER_ID LIKE '%'||#search_txt#||'%'
			</isEqual>
			<isEqual property="search_type" compareValue="cust">
			   AND B.ORDRR_NM LIKE '%'||#search_txt#||'%'
			</isEqual>
			<isEqual property="search_type" compareValue="event">
			   AND A.EVENT_ID IN
				<iterate property="searchEventIds" open="("  close=")" conjunction=",">
					#searchEventIds[]#
				</iterate>
			</isEqual>
		</isNotEmpty>
		<isNotEmpty property="searchEventDivCd">
		   AND A.EVENT_DIV_CD = #searchEventDivCd#
		</isNotEmpty>
		<isNotEmpty property="search_pavln_div_cd">
		   AND A.PAVLN_DIV_CD = #search_pavln_div_cd#
		</isNotEmpty>
		   AND A.ORDER_STUS_CD IN ('D03', 'D04')
		<isNotEmpty property="searchFromDt">
		   AND B.ORDER_DATE <![CDATA[>=]]> TO_DATE(#searchFromDt#||'000000', 'YYYYMMDDHH24MISS')
		   AND B.ORDER_DATE <![CDATA[<=]]> TO_DATE(#searchToDt#||'235959', 'YYYYMMDDHH24MISS')
		</isNotEmpty>
	)
	</select>

	<!-- 판매취소 -->
	<update id="updateSendSellCancelMgr" parameterClass="java.util.HashMap">
		UPDATE OD_ORDER_ITM
				SET ORDER_STUS_CD = #orderStusCd#
				WHERE ORDER_ITM_ID = #orderItmId#
	</update>

	<!-- 픽업요청 기업택배고객번호, 주소 조회 -->
	<select id="selectPicupReqFormCorpDtdCsmNo" parameterClass="java.util.HashMap"  resultClass="String">
		SELECT A.PO_HDRY_CNTRAC_NO
			  ,A.SEND_ZIPCD
			  ,A.COMPREG_NO
		  FROM CO_SUPP_COMP_MAST A
			  ,OD_ORDER_ITM B
		 WHERE A.SUPP_COMP_ID = B.SUPP_COMP_ID
		   AND B.ORDER_ITM_ID = #searchOrderItmId#
	</select>

	<!-- 픽업요청 계약승인번호 리스트 -->
	<select id="selectPicupReqContractNoList" parameterClass ="java.util.HashMap" resultClass="commMap">
		SELECT APPRNO CONTRACT_NO
		  FROM PRCTT0040
		 WHERE CUSTNO = #poHdryCntracNo#
		   AND CNTRACDIVCD = '8'
		   AND STUSCD = '1'
	</select>

	<!-- 픽업요청 공급처 정보 -->
	<select id="selectPicupReqSuplyOficeInfo" parameterClass ="java.util.HashMap" resultClass="commMap">
		SELECT OFFICE_SER
			  ,OFFICE_NM
			  ,CASE WHEN LENGTH(OFFICE_ZIPCD) = 5 THEN OFFICE_ZIPCD
					WHEN LENGTH(OFFICE_ZIPCD) = 6 THEN SUBSTR(OFFICE_ZIPCD,1,3) || '-' || SUBSTR(OFFICE_ZIPCD,4)
					ELSE OFFICE_ZIPCD
				END AS OFFICE_ZIPCD
			  ,OFFICE_ZIPCD ZIP_CD
			  ,OFFICE_ZIPCD_ADDR
			  ,OFFICE_DTAIL_ADDR
			  ,OFFICE_CHARG_PRSN_NM
			  ,OFFICE_CHARG_PRSN_EMAIL
			  ,OFFICE_TEL_FNO||OFFICE_TEL_MNO||OFFICE_TEL_LNO OFFICE_TELNO
			  ,OFFICE_FAX_FNO||OFFICE_FAX_MNO||OFFICE_FAX_LNO OFFICE_FAXNO
			  ,OFFICE_CHARG_PRSN_HTEL_FNO||OFFICE_CHARG_PRSN_HTEL_MNO||OFFICE_CHARG_PRSN_HTEL_LNO OFFICE_CHARG_PRSN_HTELNO
		  FROM OFFICE_ADDR_INFO
		 WHERE SHIP_SYS_CUST_NO = #poHdryCntracNo#
		<isNotEmpty  property="#officrSer#">
		   AND OFFICE_SER = #officrSer#
		   AND ROWNUM = 1
		</isNotEmpty>
		   AND OFFICE_AVAIL_YN = 'Y'
		   AND OFFICE_DIV_CD IN ('1', '2')
	</select>

	<!--픽업요청 - 픽업우체국 조회(등기국 정보) -->
	<select id="selectPickupPostSrch" parameterClass ="java.util.HashMap" resultClass="commMap">
		SELECT AA.REGIPOCD
			  ,AA.PICKUPAREANM
			  ,AA.WEEKDAYDIVCD
			  ,AA.PICKUPPARTYNM
			  ,AA.EXPECTTIMEDESCCONT
			  ,AA.REQPSSBHHMI
			  ,AA.PICKUPSTRTHHMI
			  ,AA.PICKUPENDHHMI
			  ,AA.BASICCHRGPRSNID
			  ,AA.PICKUPAREASEQ
			  ,AA.PICKUPPARTYSEQ
			  ,BB.PONM AS REGIPOCDNM
			  ,BB.POFNO AS REGIPOCDPOFNO
			  ,BB.POMNO AS REGIPOCDPOMNO
			  ,BB.POLNO AS REGIPOCDPOLNO
		  FROM (
		 		SELECT ROWNUM RNUM
					  ,B.REGIPOCD
					  ,B.PICKUPAREANM
					  ,C.WEEKDAYDIVCD
					  ,C.PICKUPPARTYNM
					  ,C.EXPECTTIMEDESCCONT
					  ,C.REQPSSBHHMI
					  ,C.PICKUPSTRTHHMI
					  ,C.PICKUPENDHHMI
					  ,B.BASICCHRGPRSNID
					  ,B.PICKUPAREASEQ
					  ,C.PICKUPPARTYSEQ
		 		  FROM PEDUT0030 A, PEDUT0010 B, PEDUT0020 C
				 WHERE REPLACE(#zipcd#,'-') BETWEEN A.STRTZIPCD AND A.ENDZIPCD
				   AND A.PICKUPAREASEQ = B.PICKUPAREASEQ
				   AND B.PICKUPAREASEQ = C.PICKUPAREASEQ
				   AND B.USEYN = 'Y'
				   AND C.TEMPPARTYYN = 'N'
				   AND C.USEYN = 'Y'
				) AA
			  ,PICMT0060 BB
		 WHERE AA.REGIPOCD = BB.REGIPOCD
		   AND BB.REGIPOCD = (
							  SELECT DECODE(MPOREGIPOCD,'66446','60159','69018','69027',MPOREGIPOCD)
								FROM PICMT0060
							   WHERE REGIPOCD = (SELECT DELIVREGIPOCD
												   FROM V_POSTALCODE
												  WHERE ZIPCD = REPLACE(#zipcd#,'-')
													AND USEYN = 'Y'
													AND ROWNUM = 1
												)
								 AND USEYN = 'Y'
								 AND DSCDPOYN = 'N'
							  )
		   AND BB.USEYN = 'Y'
		   AND BB.DSCDPOYN = 'N'
		   AND AA.RNUM = 1
		 ORDER BY AA.WEEKDAYDIVCD, AA.PICKUPSTRTHHMI
	</select>

	<!-- 픽업요청 - 픽업우체국 조회(총괄국 정보) -->
	<select id="selectPickupAllPostSrch" parameterClass ="java.util.HashMap" resultClass="commMap">
		SELECT DECODE(A.MPOREGIPOCD,'66446','60159','69018','69027',A.MPOREGIPOCD) MPOREGIPOCD
			  ,(SELECT Y.PONM FROM PICMT0060 Y
				 WHERE Y.REGIPOCD = DECODE(A.MPOREGIPOCD,'66446','60159','69018','69027',A.MPOREGIPOCD)
				   AND Y.USEYN='Y' AND Y.DSCDPOYN='N' AND ROWNUM=1) REGIPOCDNM
			  ,(SELECT Y.POFNO FROM PICMT0060 Y
				 WHERE Y.REGIPOCD = DECODE(A.MPOREGIPOCD,'66446','60159','69018','69027',A.MPOREGIPOCD)
				   AND Y.USEYN='Y' AND Y.DSCDPOYN='N' AND ROWNUM=1) REGIPOFNO
			  ,(SELECT Y.POMNO FROM PICMT0060 Y
				 WHERE Y.REGIPOCD = DECODE(A.MPOREGIPOCD,'66446','60159','69018','69027',A.MPOREGIPOCD)
				   AND Y.USEYN='Y' AND Y.DSCDPOYN='N' AND ROWNUM=1) REGIPOMNO
			  ,(SELECT Y.POLNO FROM PICMT0060 Y
				 WHERE Y.REGIPOCD = DECODE(A.MPOREGIPOCD,'66446','60159','69018','69027',A.MPOREGIPOCD)
				   AND Y.USEYN='Y' AND Y.DSCDPOYN='N' AND ROWNUM=1) REGIPOLNO
			  ,(SELECT Y.POFNO FROM PICMT0060 Y
				 WHERE Y.REGIPOCD = DECODE(A.MPOREGIPOCD,'66446','60159','69018','69027',A.MPOREGIPOCD)
				   AND Y.USEYN='Y' AND Y.DSCDPOYN='N' AND ROWNUM=1) REGIPOCDPOFNO
			  ,(SELECT Y.POMNO FROM PICMT0060 Y
				 WHERE Y.REGIPOCD = DECODE(A.MPOREGIPOCD,'66446','60159','69018','69027',A.MPOREGIPOCD)
				   AND Y.USEYN='Y' AND Y.DSCDPOYN='N' AND ROWNUM=1) REGIPOCDPOMNO
			  ,(SELECT Y.POLNO FROM PICMT0060 Y
				 WHERE Y.REGIPOCD = DECODE(A.MPOREGIPOCD,'66446','60159','69018','69027',A.MPOREGIPOCD)
				   AND Y.USEYN='Y' AND Y.DSCDPOYN='N' AND ROWNUM=1) REGIPOCDPOLNO
		  FROM PICMT0060 A
		 WHERE A.REGIPOCD = (SELECT DISTINCT DELIVREGIPOCD FROM V_POSTALCODE WHERE ZIPCD = REPLACE(#zipcd#,'-') AND USEYN = 'Y' AND ROWNUM = 1)
		   AND A.USEYN = 'Y'
		   AND A.DSCDPOYN = 'N'
	</select>

	<!-- 픽업요청 - 픽업요청 주문정보 조회 -->
	<select id="selectPicupReqOrderInfo" parameterClass ="java.util.HashMap" resultClass="commMap">
		SELECT A.ORDER_ID
			  ,MAX(A.SUPP_COMP_ID) SUPP_COMP_ID
			  ,A.GOODS_CD
			  ,MAX(A.GOODS_NM) GOODS_NM
			  ,MAX(A.WGHT) WGHT
			  ,MAX(A.VOLM) VOLM
			  ,MAX(A.KIND_DIV_CD) KIND_DIV_CD
			  ,MAX(A.SENDER_NM) SENDER_NM
			  ,MAX(A.SENDER_ZIPCD) SENDER_ZIPCD
			  ,MAX(A.SENDER_ADDR1) SENDER_ADDR1
			  ,MAX(A.SENDER_ADDR2) SENDER_ADDR2
			  ,MAX(A.SENDER_TELNO) SENDER_TELNO
			  ,MAX(A.SENDER_HTELNO) SENDER_HTELNO
			  ,MAX(A.SENDER_EMAIL) SENDER_EMAIL
			  ,MAX(A.RECPTER_NM) RECPTER_NM
			  ,MAX(A.RECPTER_ZIPCD) RECPTER_ZIPCD
			  ,MAX(A.RECPTER_ADDR1) RECPTER_ADDR1
			  ,MAX(A.RECPTER_ADDR2) RECPTER_ADDR2
			  ,MAX(A.RECPTER_TELNO) RECPTER_TELNO
			  ,MAX(A.RECPTER_HTELNO) RECPTER_HTELNO
			  ,MAX(A.RECPTER_EMAIL) RECPTER_EMAIL
			  ,NVL(A.REPRSNT_REGI_NO,A.REGI_NO) REGI_NO
			  ,MAX(A.RECPTER_VIRTL_NO) RECPTER_VIRTL_NO
		  FROM OD_ORDER_ITM A
			  ,OD_ORDER_MAST B
		 WHERE A.ORDER_ID = B.ORDER_ID
		/* AND NVL(A.PRSNT_YN,'N') = 'N'
		   AND NVL(A.EXTRA_GOODS_YN,'N') = 'N' */
		   AND A.ORDER_ID || '/' || A.GOODS_CD || NVL(TO_CHAR(A.WISH_SEND_DATE,'YYYYMMDD'),TO_CHAR(B.APPR_DATE,'YYYYMMDD')) = #orderInfos#
		 GROUP BY A.ORDER_ID, A.GOODS_CD, NVL(A.REPRSNT_REGI_NO,A.REGI_NO)
		 ORDER BY NVL(A.REPRSNT_REGI_NO,A.REGI_NO)
	</select>

	<!-- 집하정보 조회 -->
	<select id="selectPicupReqGatheringInfo" parameterClass ="java.util.HashMap" resultClass="commMap">
		SELECT B.REGIPOCD
			  ,(SELECT PONM FROM PICMT0060 Y WHERE Y.REGIPOCD = B.REGIPOCD AND Y.USEYN = 'Y') REGIPOCDNM
			  ,B.PICKUPAREANM
			  ,C.WEEKDAYDIVCD
			  ,C.PICKUPPARTYNM
			  ,C.EXPECTTIMEDESCCONT
			  ,C.REQPSSBHHMI
			  ,C.PICKUPSTRTHHMI
			  ,C.PICKUPENDHHMI
			  ,B.BASICCHRGPRSNID
			  ,B.PICKUPAREASEQ
			  ,C.PICKUPPARTYSEQ
		  FROM PEDUT0030 A
			  ,PEDUT0010 B
			  ,PEDUT0020 C
		 WHERE REPLACE(#recpterZipcd#,'-') BETWEEN A.STRTZIPCD
		   AND A.ENDZIPCD
		   AND A.PICKUPAREASEQ = B.PICKUPAREASEQ
		   AND B.PICKUPAREASEQ = C.PICKUPAREASEQ
		   AND B.USEYN = 'Y'
		   AND B.REGIPOCD =(SELECT DISTINCT PICKUPREGIPOCD FROM V_POSTALCODE WHERE ZIPCD = REPLACE(#recpterZipcd#,'-') AND USEYN = 'Y' AND ROWNUM = 1)
		   AND C.TEMPPARTYYN = 'N'
		   AND C.USEYN = 'Y'
		<isNotEmpty  property="weekdaydivcd">
		   AND WEEKDAYDIVCD = #weekdaydivcd#
		</isNotEmpty>
		   AND ROWNUM = 1
		 ORDER BY C.WEEKDAYDIVCD, C.PICKUPSTRTHHMI
	</select>

	<!-- 집하정보 조회 -->
	<select id="selectPicupReqGatheringInfo2" parameterClass ="java.util.HashMap" resultClass="commMap">
		SELECT PICKUPREGIPOCD REGIPOCD
		  FROM V_POSTALCODE A
		 WHERE ZIPCD = REPLACE(#recpterZipcd#,'-')
		   AND USEYN = 'Y'
		   AND ROWNUM = 1
	</select>

	<!-- 집하날짜 조회 -->
	<select id="selectPicupReqGatheringDateList" parameterClass ="java.util.HashMap" resultClass="commMap">
		<![CDATA[
		SELECT WORKCALEYMD
			  ,WEEKDAYCD
		  FROM (
				SELECT WORKCALEYMD, WEEKDAYCD
				  FROM PICMT0130
				 WHERE WORKCALEYMD >= TO_CHAR(SYSDATE,'YYYYMMDD')
				   AND RCOCD = (SELECT RCOCD FROM PICMT0060 WHERE REGIPOCD = #regipocd# AND USEYN = 'Y' AND DSCDPOYN = 'N')
				   AND HOLDAYYN = 'N'
				 ORDER BY WORKCALEYMD )
		 WHERE ROWNUM < 8
		]]>
	</select>

	<!--기업택배 요금 조회-->
	<select id="selectPicupReqFeeInfo" parameterClass ="java.util.HashMap" resultClass="commMap">
		SELECT PRCPAYMETHCD
			  ,TOTALCNTRACPRC
			  ,CNTRACWGHT1PRC
			  ,CNTRACWGHTPRC2
			  ,CNTRACWGHTPRC5
			  ,CNTRACWGHTPRC10
			  ,CNTRACWGHTPRC20
			  ,CNTRACWGHTPRC30
			  ,CNTRACWGHT500PRC
		  FROM PRCTT0040
		 WHERE APPRNO = #contractNo#
		   AND CNTRACDIVCD = '8'
		   AND STUSCD = '1'
	</select>

	<!-- 국내지역구분코드 조회 -->
	<select id="selectAreaDivCd" parameterClass ="java.util.HashMap" resultClass="String">
		SELECT DOMAREADIVCD FROM V_POSTALCODE WHERE ZIPCD = REPLACE(#zipcd#,'-') AND USEYN='Y' AND ROWNUM = 1
	</select>

	<!-- 일반택배 요금 조회 -->
	<select id="selectPicupReqFeeInfoForNorm" parameterClass ="java.util.HashMap" resultClass="String">
	<![CDATA[
		SELECT DOMFRNPRC
		  FROM PIPMT0010
		 WHERE PRCLARGEDIVCD = 'P05'
		   AND PRCMIDDIVCD = '02'
		   AND PRCSMALLDIVCD = #kindDivCd#
		   AND DOMFRNPRC =( SELECT MIN(DOMFRNPRC)
							  FROM PIPMT0010
							 WHERE PRCLARGEDIVCD = 'P05'
							   AND PRCMIDDIVCD = '02'
							   AND PRCSMALLDIVCD = #kindDivCd#
							   AND (PRCCALSTDWGHT >= #wght#
							   AND PRCCALSTDVOLM >= #volm# )
		   AND APPLYSTRTYMD < TO_CHAR(SYSDATE, 'YYYYMMDD')
		   AND APPLYENDYMD > TO_CHAR(SYSDATE, 'YYYYMMDD') )
		   AND ROWNUM = 1
	]]>
	</select>

	<!-- 픽업요청 -->
	<update id="insertPicupReqAjax"  parameterClass ="java.util.HashMap">
		INSERT INTO SEND_AMT_LEDGER
			(
			 VISIT_RECEV_RES_SER
			,SHIP_SYS_CUST_NO
			,APPR_NO
			,EXCHG_YN
			,RECEV_REQ_YMD
			,RECEV_REQ_HHMI
			,SEND_REQ_DIVCD
			,SEND_REQ_PATH_DIVCD
			,ORDER_PRSN_NM
			,ORDER_TEL_FNO
			,ORDER_TEL_MNO
			,ORDER_TEL_LNO
			,ORDER_HTEL_FNO
			,ORDER_HTEL_MNO
			,ORDER_HTEL_LNO
			,SEND_PLC_SER
			,RET_PLC_SER
			,SEND_PLC_NM
			,SEND_PLC_PRSN_NM
			,SEND_PLC_EMAIL
			,SEND_ZIPCD
			,SEND_ZIPCD_ADDR
			,SEND_DETAIL_ADDR
			,SEND_TEL_FNO
			,SEND_TEL_MNO
			,SEND_TEL_LNO
			,SEND_HTEL_FNO
			,SEND_HTEL_MNO
			,SEND_HTEL_LNO
			,REGI_NO
			,DELIV_PRSN_NM
			,DELIV_ZIPCD
			,DELIV_ZIPCD_ADDR
			,DELIV_DETAIL_ADDR
			,DELIV_TEL_FNO
			,DELIV_TEL_MNO
			,DELIV_TEL_LNO
			,DELIV_HTEL_FNO
			,DELIV_HTEL_MNO
			,DELIV_HTEL_LNO
			,GOOD_CD
			,GOOD_NM
			,WG
			,VOL
			,CONT_AMT
			,FEE
			,DELIV_FEE_YN
			,WISH_VISIT_YMD
			,WISH_DELIV_YMD
			,PICKUP_REGI_PO_CD
			,DELIV_REGI_PO_CD
			,TREAT_EVENT_CODE
			,ADB_SEQUENCE
			,ADB_TIMESTAMP
			,ADB_OPCODE
			,ADB_REF_OBJECT
			,ADB_L_DELIVERY_STATUS
			,RAISE_SEQ
			,IF_ID
			,INIT_TIME
			,DEAL_STATE
			,WRK_GBN
			,IMAGINETELYN
			,IMAGINE_TEL_NO
			)
			VALUES
			(
			 TO_CHAR(SYSDATE,'YYYYMMDD')||'4'||SUBSTR(#regiNo#,-7,7)
			,#poHdryCntracNo#
			,#contractNo#
			,'N'
			,TO_CHAR(SYSDATE,'YYYYMMDD')
			,TO_CHAR(SYSDATE,'HH24MISS')
			,'01'
			,'04'
			,#senderNm#
			,F_DIV_TELNO(#senderTelno#,'F')
			,F_DIV_TELNO(#senderTelno#,'M')
			,F_DIV_TELNO(#senderTelno#,'L')
			,F_DIV_TELNO(#senderHtelno#,'F')
			,F_DIV_TELNO(#senderHtelno#,'M')
			,F_DIV_TELNO(#senderHtelno#,'L')
			,#officeSer#
			,#officeSer#
			,#officeNm#
			,#officeChargPrsnNm#
			,#officeChargPrsnEmail#
			,REPLACE(#officeZipcd#,'-','')
			,#officeZipcdAddr#
			,#officeDtailAddr#
			,F_DIV_TELNO(#officeTelno#,'F')
			,F_DIV_TELNO(#officeTelno#,'M')
			,F_DIV_TELNO(#officeTelno#,'L')
			,F_DIV_TELNO(#officeChargPrsnHtelno#,'F')
			,F_DIV_TELNO(#officeChargPrsnHtelno#,'M')
			,F_DIV_TELNO(#officeChargPrsnHtelno#,'L')
			,#regiNo#
			,#recpterNm#
			,REPLACE(#recpterZipcd#,'-','')
			,#recpterAddr1#
			,#recpterAddr2#
			,F_DIV_TELNO(#recpterTelno#,'F')
			,F_DIV_TELNO(#recpterTelno#,'M')
			,F_DIV_TELNO(#recpterTelno#,'L')
			,F_DIV_TELNO(#recpterHtelno#,'F')
			,F_DIV_TELNO(#recpterHtelno#,'M')
			,F_DIV_TELNO(#recpterHtelno#,'L')
			,#goodsCd#
			,#goodsNm#
			,#wght#
			,#volm#
			,'1'
			,#fee#
			,DECODE(#kindDivCd#,16,'Y','N')
			,TO_CHAR(SYSDATE,'YYYYMMDD')
			,TO_CHAR(SYSDATE+1,'YYYYMMDD')
			,SUBSTR(#contractNo#,1,5)
			,(SELECT DELIVREGIPOCD FROM V_POSTALCODE WHERE ZIPCD = #officeZipcd# AND USEYN ='Y' AND ROWNUM = 1)
			,'01'
			,SEQ_SEND_AMT_LEDGER.NEXTVAL
			,TO_CHAR(SYSDATE,'YYYYMMDD')
			,'1'
			,'04'
			,'N'
			,SEQ_SEND_AMT_LEDGER_ESB.NEXTVAL
			,'IF-SPADED-003-P04I'
			,SYSDATE
			,'N'
			,'1'
			,DECODE(#recpterVirtlNo#,'','N','Y')
			,#recpterVirtlNo#
			)
	</update>

	<!-- 픽업요청 -->
	<update id="insertPicupReqForNormAjax"  parameterClass ="java.util.HashMap">
		INSERT INTO NORM_AMT_LEDGER
			(
			 VISIT_RECEV_RES_SER
			,SEND_SEQ
			,REC_SEQ
			,REQ_REGI_PO_CD
			,TREAT_REGI_PO_CD
			,PICKUP_YMD
			,PICKUP_PARTY_SEQ
			,PICKUP_STRT_HHMI
			,PICKUP_END_HHMI
			,PICKUP_AREA_SEQ
			,PICKUP_PRSN_ID
			,REQ_YMD
			,REQ_HHMI
			,ALERT_CONF_YN
			,ORD_ZIPCD
			,ORD_ZIPCD_ADDR
			,ORD_DETAIL_ADDR
			,ORD_NM
			,ORD_TEL_FNO
			,ORD_TEL_MNO
			,ORD_TEL_LNO
			,ORD_HTEL_FNO
			,ORD_HTEL_MNO
			,ORD_HTEL_LNO
			,ORD_EMAIL
			,SEND_ZIPCD
			,SEND_ZIPCD_ADDR
			,SEND_DETAIL_ADDR
			,SEND_NM
			,SEND_TEL_FNO
			,SEND_TEL_MNO
			,SEND_TEL_LNO
			,SEND_HTEL_FNO
			,SEND_HTEL_MNO
			,SEND_HTEL_LNO
			,SEND_EMAIL
			,REGI_NO
			,WORK_LEVEL_CD
			,DELIV_PRINT_YN
			,CANCEL_YN
			,PRC_PAY_METH_CD
			,AREA_DIV_CD
			,KIND_DIV_CD
			,MAIL_WGHT
			,MAIL_VOLM
			,RECEV_PRC
			,MAIL_CONT
			,DELIV_ZIPCD
			,DELIV_ZIPCD_ADDR
			,DELIV_DETAIL_ADDR
			,DELIV_NM
			,DELIV_TEL_FNO
			,DELIV_TEL_MNO
			,DELIV_TEL_LNO
			,DELIV_HTEL_FNO
			,DELIV_HTEL_MNO
			,DELIV_HTEL_LNO
			,DELIV_EMAIL
			,WRITE_DATE
			,ADB_OPCODE1
			,ADB_OPCODE2
			,ADB_OPCODE3
			,TAX_PUBYN
			,TAX_COMPNO
			,ADB_SEQUENCE
			,ADB_TIMESTAMP
			,ADB_OPCODE
			,ADB_REF_OBJECT
			,ADB_L_DELIVERY_STATUS
			,RAISE_SEQ
			,IF_ID
			,INIT_TIME
			,DEAL_STATE
			,WRK_GBN
			,IMAGINETELYN
			,IMAGINE_TEL_NO
			)
			VALUES
			(
			 TO_CHAR(SYSDATE,'YYYYMMDD')||'4'||SUBSTR(#regiNo#,-7,7)
			,'001'
			,'00001'
			,(SELECT PICKUPREGIPOCD FROM V_POSTALCODE WHERE ZIPCD = #officeZipcd# and USEYN ='Y' AND rownum = 1)
			,(SELECT PICKUPREGIPOCD FROM V_POSTALCODE WHERE ZIPCD = #officeZipcd# and USEYN ='Y' AND rownum = 1)
			,#pickupymd#
			,#pickuppartyseq#
			,#pickupstrthhmi#
			,#pickupendhhmi#
			,#pickupareaseq#
			,#pickupprsnid#
			,TO_CHAR(SYSDATE,'YYYYMMDD')
			,TO_CHAR(SYSDATE,'HH24MI')
			,'N'
			,REPLACE(#senderZipcd#,'-','')
			,#senderAddr1#
			,#senderAddr2#
			,#senderNm#
			,F_DIV_TELNO(#senderTelno#,'F')
			,F_DIV_TELNO(#senderTelno#,'M')
			,F_DIV_TELNO(#senderTelno#,'L')
			,F_DIV_TELNO(#senderHtelno#,'F')
			,F_DIV_TELNO(#senderHtelno#,'M')
			,F_DIV_TELNO(#senderHtelno#,'L')
			,#senderEmail#
			,REPLACE(#officeZipcd#,'-','')
			,#officeZipcdAddr#
			,#officeDtailAddr#
			,#officeNm#
			,F_DIV_TELNO(#officeTelno#,'F')
			,F_DIV_TELNO(#officeTelno#,'M')
			,F_DIV_TELNO(#officeTelno#,'L')
			,F_DIV_TELNO(#officeChargPrsnHtelno#,'F')
			,F_DIV_TELNO(#officeChargPrsnHtelno#,'M')
			,F_DIV_TELNO(#officeChargPrsnHtelno#,'L')
			,#officeChargPrsnEmail#
			,#regiNo#
			,'01'
			,'N'
			,'N'
			,'10'
			,#areaDivCd#
			,#kindDivCd#
			,#wght#
			,#volm#
			,#fee#
			,#goodsNm#
			,REPLACE(#recpterZipcd#,'-','')
			,#recpterAddr1#
			,#recpterAddr2#
			,#recpterNm#
			,F_DIV_TELNO(#recpterTelno#,'F')
			,F_DIV_TELNO(#recpterTelno#,'M')
			,F_DIV_TELNO(#recpterTelno#,'L')
			,F_DIV_TELNO(#recpterHtelno#,'F')
			,F_DIV_TELNO(#recpterHtelno#,'M')
			,F_DIV_TELNO(#recpterHtelno#,'L')
			,#recpterEmail#
			,SYSDATE
			,'1'
			,'1'
			,'1'
			,#taxPubyn#
			,#taxCompno#
			,SEQ_NORM_AMT_LEDGER.NEXTVAL
			,SYSDATE
			,'1'
			,'04'
			,'N'
			,SEQ_NORM_AMT_LEDGER_ESB.NEXTVAL
			,'IF-SHADED-001-P04I'
			,SYSDATE
			,'N'
			,'1'
			,DECODE(#recpterVirtlNo#,'','N','Y')
			,#recpterVirtlNo#
			)
	</update>

	<!-- 픽업요청 주문아이템상태변경 -->
	<update id="updatePicupReqOrderDtailStusChg"  parameterClass ="java.util.HashMap">
		UPDATE OD_ORDER_ITM
		   SET ORDER_STUS_CD = 'D01'
		 WHERE ORDER_ID = #searchOrderId#
		   AND NVL(REPRSNT_REGI_NO,REGI_NO) = #regiNo#
		   AND ORDER_STUS_CD = 'O04'
	</update>

	<!--픽업요청 주문상태변경 -->
	<update id="updatePicupReqOrderStusChg"  parameterClass ="java.util.HashMap">
		UPDATE OD_ORDER_MAST
		   SET ORDER_STUS_CD = 'D01'
		 WHERE ORDER_ID = #searchOrderId#
		   AND ORDER_STUS_CD IN ('O01','O02','O04')
	</update>

	<!-- 기표지출력대상조회 include1 -->
	<sql id="selectPrtInclude1">
		<!-- <isEqual property="searchSuppDivCd" compareValue="02">	/* 통보구분: 통보 */ -->
			<isEqual property="searchBaltshtPrtYn" compareValue="N">
				<!-- <isEqual property="searchSuppRegiCd" compareValue="001">	/* 전체 */ -->
					AND B.ORDER_STUS_CD IN ('O04', 'D02', 'D03') AND NVL(B.BALTSHT_PRT_YN,'N') = 'N'
					<!-- AND A.ORDER_CONF_DATE BETWEEN nvl(#searchFromDt#, TO_CHAR(SYSDATE,'yyyymmdd')) ||'000000' AND #searchToDt# ||'999999' AND A.ORDER_DTAIL_STUS_CD IN ('R02','D01','D02','D03')  AND A.REGI_NO_CREATE_DIV_CD = #RegiNoCreateDivCd# AND NVL(A.BALTSHT_PRT_YN,'N') = 'N' -->
				<!-- </isEqual>
				<isEqual property="searchSuppRegiCd" compareValue="003">	/* 발송 */
					AND A.ORDER_CONF_DATE BETWEEN nvl(#searchFromDt#, TO_CHAR(SYSDATE,'yyyymmdd')) ||'000000' AND #searchToDt# ||'999999' AND A.ORDER_DTAIL_STUS_CD='D02'  AND A.REGI_NO_CREATE_DIV_CD = #RegiNoCreateDivCd# AND NVL(A.BALTSHT_PRT_YN,'N') = 'N'
				</isEqual>
				<isEqual property="searchSuppRegiCd" compareValue="005">	/* 미발송 */
					AND A.ORDER_CONF_DATE BETWEEN nvl(#searchFromDt#, TO_CHAR(SYSDATE,'yyyymmdd')) ||'000000' AND #searchToDt# ||'999999' AND A.ORDER_DTAIL_STUS_CD='R02'  AND A.REGI_NO_CREATE_DIV_CD = #RegiNoCreateDivCd# AND NVL(A.BALTSHT_PRT_YN,'N') = 'N'
				</isEqual> -->
			</isEqual>
			<isEqual property="searchBaltshtPrtYn" compareValue="Y">
				<!-- <isEqual property="searchSuppRegiCd" compareValue="001">	/* 전체 */ -->
					AND B.ORDER_STUS_CD IN ('O04', 'D02', 'D03') AND NVL(B.BALTSHT_PRT_YN,'N') = 'Y'
					<!-- AND A.ORDER_CONF_DATE BETWEEN nvl(#searchFromDt#, TO_CHAR(SYSDATE,'yyyymmdd')) ||'000000' AND #searchToDt# ||'999999' AND A.ORDER_DTAIL_STUS_CD IN ('R02','D01','D02','D03')  AND A.REGI_NO_CREATE_DIV_CD = #RegiNoCreateDivCd# -->
				<!-- </isEqual>
				<isEqual property="searchSuppRegiCd" compareValue="003">	/* 발송 */
					AND A.ORDER_CONF_DATE BETWEEN nvl(#searchFromDt#, TO_CHAR(SYSDATE,'yyyymmdd')) ||'000000' AND #searchToDt# ||'999999' AND A.ORDER_DTAIL_STUS_CD='D02'  AND A.REGI_NO_CREATE_DIV_CD = #RegiNoCreateDivCd#
				</isEqual>
				<isEqual property="searchSuppRegiCd" compareValue="005">	/* 미발송 */
					AND A.ORDER_CONF_DATE BETWEEN nvl(#searchFromDt#, TO_CHAR(SYSDATE,'yyyymmdd')) ||'000000' AND #searchToDt# ||'999999' AND A.ORDER_DTAIL_STUS_CD='R02'  AND A.REGI_NO_CREATE_DIV_CD = #RegiNoCreateDivCd#
				</isEqual> -->
			</isEqual>
		<!-- </isEqual> -->
		<isNotEmpty property="searchSuppCompId">
			AND B.SUPP_COMP_ID = #searchSuppCompId#
		</isNotEmpty>
		<isNotEmpty property="searchGoodsCd">
			AND B.GOODS_CD = #searchGoodsCd#
		</isNotEmpty>
		<isNotEmpty property="searchSuppWishDate">
			AND NVL(TO_CHAR(B.WISH_SEND_DATE, 'YYYYMMDD'), TO_CHAR(A.APPR_DATE, 'YYYYMMDD')) = REPLACE(#searchSuppWishDate#,'-','')
		</isNotEmpty>
		<isNotEmpty property="searchStartNo">
			<isEqual property="searchSuppDivCd" compareValue="002">
				<isEqual property="searchSortDivCd" compareValue="2">	/* 정렬기준: 업체+상품+접수번호 */
					AND NVL(B.REPRSNT_REGI_NO, B.REGI_NO) <![CDATA[>=]]>= #searchStartNo#
				</isEqual>
			</isEqual>
			<isEqual property="searchSortDivCd" compareValue="1">	/* 정렬기준: 접수번호+업체+상품 */
				AND A.ORDER_ID <![CDATA[>=]]> #searchStartNo#
			</isEqual>
		</isNotEmpty>
		<isNotEmpty property="searchEndNo">
			<isEqual property="searchSuppDivCd" compareValue="002">
				<isEqual property="searchSortDivCd" compareValue="2">	/* 정렬기준: 업체+상품+접수번호 */
					AND NVL(B.REPRSNT_REGI_NO, B.REGI_NO) <![CDATA[<=]]>= #searchEndNo#
				</isEqual>
			</isEqual>
			<isEqual property="searchSortDivCd" compareValue="1">	/* 정렬기준: 접수번호+업체+상품 */
				AND A.ORDER_ID <![CDATA[<=]]> #searchEndNo#
			</isEqual>
		</isNotEmpty>
		<isNotEmpty property="searchRecevSysDivCd">
			<isEqual property="searchRecevSysDivCd" compareValue="01">	/* 접수시스템: 창구 */
				AND A.ORDER_MDA_DIV_CD = '05'
			</isEqual>
			<isEqual property="searchRecevSysDivCd" compareValue="02">	/* 접수시스템: ePOST */
				AND A.ORDER_MDA_DIV_CD != '05'
			</isEqual>
		</isNotEmpty>
		<isNotEmpty property="searchSuppNoticDdPerSeq">	/* 통보순번 */
			AND B.SUPP_NOTIC_DD_PER_SEQ = #searchSuppNoticDdPerSeq#
		</isNotEmpty>
		<isNotEmpty property="searchOrderIds">	/* 주문번호 */
			AND A.ORDER_ID IN
				<iterate property="orderIds" open="("  close=")" conjunction=",">
					#orderIds[]#
				</iterate>
			AND B.ORDER_ID || '/'||B.GOODS_CD||NVL(TO_CHAR(B.WISH_SEND_DATE, 'YYYYMMDD'), TO_CHAR(A.APPR_DATE, 'YYYYMMDD')) IN
				<iterate property="orderInfos" open="("  close=")" conjunction=",">
					#orderInfos[]#
				</iterate>
		</isNotEmpty>
	</sql>

	<!-- 기표지출력대상조회 include2 -->
	<sql id="selectPrtInclude2">
		<isEqual property="wrokGbn" compareValue="list">
			<isEqual property="searchSortGB" compareValue="2">
			ORDER BY B.SUPP_COMP_ID, B.GOODS_CD, B.ORDER_ID, MIN(B.REGI_NO)
			</isEqual>
			<isEqual property="searchSortGB" compareValue="3">
			ORDER BY B.SUPP_COMP_ID, B.GOODS_CD, DECODE(CTRLCNPOREGIPOCD,'10177',1,'49132',2,'49043',3,4),CTRLCNPOREGIPONM, MIN(B.REGI_NO)
			</isEqual>
			<isEqual property="searchSortGB" compareValue="4">
			ORDER BY B.SUPP_COMP_ID, B.GOODS_CD, B.RECPTER_ZIPCD, MIN(B.REGI_NO)
			</isEqual>
			<isEqual property="searchSortGB" compareValue="5">
			ORDER BY B.SUPP_COMP_ID, B.RECPTER_ZIPCD, B.GOODS_CD,  MIN(B.REGI_NO)
			</isEqual>
			<isEqual property="searchSortGB" compareValue="6">
			ORDER BY B.SUPP_COMP_ID,DECODE(CTRLCNPOREGIPOCD,'10177',1,'49132',2,'49043',3,4),CTRLCNPOREGIPONM, B.GOODS_CD, MIN(B.REGI_NO)
			</isEqual>
		</isEqual>
		<isEqual property="wrokGbn" compareValue="label">
			<isEqual property="searchSortGB" compareValue="2">
			ORDER BY B.SUPP_COMP_ID, B.GOODS_CD, B.ORDER_ID,MIN(B.REGI_NO)
			</isEqual>
			<isEqual property="searchSortGB" compareValue="3">
			ORDER BY B.SUPP_COMP_ID, B.GOODS_CD, DECODE(CTRLCNPOREGIPOCD,'10177',1,'49132',2,'49043',3,4),CTRLCNPOREGIPONM, MIN(B.REGI_NO)
			</isEqual>
			<isEqual property="searchSortGB" compareValue="4">
			ORDER BY B.SUPP_COMP_ID, B.GOODS_CD, B.RECPTER_ZIPCD, MIN(B.REGI_NO)
			</isEqual>
			<isEqual property="searchSortGB" compareValue="5">
			ORDER BY B.SUPP_COMP_ID, B.RECPTER_ZIPCD, B.GOODS_CD, MIN(B.REGI_NO)
			</isEqual>
			<isEqual property="searchSortGB" compareValue="6">
			ORDER BY B.SUPP_COMP_ID, DECODE(CTRLCNPOREGIPOCD,'10177',1,'49132',2,'49043',3,4),CTRLCNPOREGIPONM, B.GOODS_CD, MIN(B.REGI_NO)
			</isEqual>
		</isEqual>
	</sql>

	<!-- 기표지출력 대상 수량 조회 -->
	<select id="selectSuppGoodsPrintTotCnt" parameterClass ="java.util.HashMap" resultClass="Integer">
		SELECT COUNT(*)
		  FROM (
				SELECT ROW_NUMBER() OVER (ORDER BY SUPP_COMP_ID,SUPP_COMP_NM, GOODS_CD,GOODS_NM) RNUM
					  ,SUPP_COMP_ID
					  ,SUPP_COMP_NM
					  ,GOODS_CD
					  ,GOODS_NM
					  ,SUM(TOT_GOODS_CNT) TOT_GOODS_CNT
					  ,WISH_SEND_DATE
					  ,WISH_YN
					  ,MAX(CONG_MSG_CNT) CONG_MSG_CNT
				  FROM (
						SELECT B.SUPP_COMP_ID
							  ,B.SUPP_COMP_NM
							  ,B.GOODS_CD
							  ,B.GOODS_NM
							  ,COUNT(1) TOT_GOODS_CNT
							  ,NVL(TO_CHAR(B.WISH_SEND_DATE, 'YYYYMMDD'), TO_CHAR(A.APPR_DATE, 'YYYYMMDD')) WISH_SEND_DATE
							  ,DECODE((SELECT NVL(COUNT(1), 0) FROM OD_FIX_RESRV_ORDER ODR WHERE B.ORDER_ID = ODR.ORDER_ID AND NVL(ODR.USEYN, 'Y') != 'N'), 0, 'N', 'Y') WISH_YN
							  ,MAX(DECODE(B.CRRGR_CARD_USE_YN,'Y',1,'N',0,0)) CONG_MSG_CNT
						  FROM OD_ORDER_MAST A
							  ,OD_ORDER_ITM B
							  ,OD_ORDER_SETL C
						 WHERE A.ORDER_ID = B.ORDER_ID
						   AND B.ORDER_ID = C.ORDER_ID
						   AND C.USE_YN = 'Y'
						/* AND NVL(B.PRSNT_YN,'N') = 'N'
						   AND NVL(B.EXTRA_GOODS_YN,'N') = 'N' */
						<include refid="selectPrtInclude1" />
						GROUP BY B.SUPP_COMP_ID,B.SUPP_COMP_NM, B.GOODS_CD,B.GOODS_NM ,B.ORDER_ID, NVL(TO_CHAR(B.WISH_SEND_DATE, 'YYYYMMDD'), TO_CHAR(A.APPR_DATE, 'YYYYMMDD'))
					)
				 GROUP BY SUPP_COMP_ID
				 		 ,SUPP_COMP_NM
				 		 ,GOODS_CD
				 		 ,GOODS_NM
				 		 ,WISH_SEND_DATE
				 		 ,WISH_YN
				 ORDER BY SUPP_COMP_ID
						 ,GOODS_CD
			)
	</select>

	<!-- 기표지출력 대상 목록 조회 -->
	<select id="selectSuppGoodsPrintList" parameterClass ="java.util.HashMap" resultClass="commMap">
		SELECT SUPP_COMP_ID
			  ,SUPP_COMP_NM
			  ,GOODS_CD
			  ,GOODS_NM
			  ,TOT_RECPRSN_CNT
			  ,TOT_GOODS_CNT
			  ,WISH_SEND_DATE
			  ,WISH_YN
			  ,CONG_MSG_CNT
		  FROM (
				SELECT ROW_NUMBER() OVER (ORDER BY SUPP_COMP_ID,SUPP_COMP_NM, GOODS_CD,GOODS_NM) RNUM
					  ,SUPP_COMP_ID
					  ,SUPP_COMP_NM
					  ,GOODS_CD
					  ,GOODS_NM
					  ,SUM(TOT_RECPRSN_CNT) TOT_RECPRSN_CNT
					  ,SUM(TOT_GOODS_CNT) TOT_GOODS_CNT
					  ,WISH_SEND_DATE
					  ,WISH_YN
					  ,MAX(CONG_MSG_CNT) CONG_MSG_CNT
				  FROM (
						SELECT B.SUPP_COMP_ID
							  ,B.SUPP_COMP_NM
							  ,B.GOODS_CD
							  ,B.GOODS_NM
							  ,USSF_GET_WISHRECPRSNCNT(B.ORDER_ID, B.GOODS_CD, NVL(TO_CHAR(B.WISH_SEND_DATE, 'YYYYMMDD'), TO_CHAR(A.APPR_DATE, 'YYYYMMDD'))) TOT_RECPRSN_CNT
							  ,COUNT(1) TOT_GOODS_CNT
							  ,TO_CHAR(TO_DATE(NVL(TO_CHAR(B.WISH_SEND_DATE, 'YYYYMMDD'), TO_CHAR(A.APPR_DATE, 'YYYYMMDD')),'YYYY-MM-DD'),'YYYY-MM-DD') WISH_SEND_DATE
							  ,DECODE((SELECT NVL(COUNT(1), 0) FROM OD_FIX_RESRV_ORDER ODR WHERE B.ORDER_ID = ODR.ORDER_ID AND NVL(ODR.USEYN, 'Y') != 'N'), 0, 'N', 'Y') WISH_YN
							  ,MAX(DECODE(B.CRRGR_CARD_USE_YN,'Y',1,'N',0,0)) CONG_MSG_CNT
						  FROM OD_ORDER_MAST A
							  ,OD_ORDER_ITM B
							  ,OD_ORDER_SETL C
						 WHERE A.ORDER_ID = B.ORDER_ID
						   AND B.ORDER_ID = C.ORDER_ID
						   AND C.USE_YN = 'Y'
						/* AND NVL(B.PRSNT_YN,'N') = 'N'
						   AND NVL(B.EXTRA_GOODS_YN,'N') = 'N' */
						<include refid="selectPrtInclude1" />
						GROUP BY B.SUPP_COMP_ID,B.SUPP_COMP_NM, B.GOODS_CD,B.GOODS_NM ,B.ORDER_ID, NVL(TO_CHAR(B.WISH_SEND_DATE, 'YYYYMMDD'), TO_CHAR(A.APPR_DATE, 'YYYYMMDD'))
					)
				 GROUP BY SUPP_COMP_ID
				 		 ,SUPP_COMP_NM
				 		 ,GOODS_CD
				 		 ,GOODS_NM
				 		 ,WISH_SEND_DATE
				 		 ,WISH_YN
				 ORDER BY SUPP_COMP_ID
						 ,GOODS_CD
			)
		 WHERE RNUM <![CDATA[<=]]> #lastIndex#
		   AND RNUM <![CDATA[>=]]> #firstIndex#
	</select>

	<!-- 대표등기번호 기준 기표지출력 대상 리스트 조회 -->
	<select id="selectSuppBriefGoodsForPrntTxt" parameterClass ="java.util.HashMap" resultClass="commMap" >
		SELECT /* 파일명[파일설명] : SrmFoOrderMgr_SQL.xml[기표지출력 대상 리스트 조회] SQL ID : selectSuppBriefGoodsForPrntTxt */
				 NVL(AA.SUPPO_RGIST_POCD,'')  SUPPO_RGIST_POCD
				,NVL(AA.SUPPO_RGIST_PONM,'') SUPPO_RGIST_PONM
				,NVL(AA.GOODS_CD,'') GOODS_CD
				,NVL(AA.GOODS_NM,'') GOODS_NM
				,NVL(AA.SUPP_COMP_ID,'') SUPP_COMP_ID
				,NVL(AA.SUPP_COMP_NM,'') SUPP_COMP_NM
				,NVL(AA.APPR_DATE,'') APPR_DATE
				,NVL(AA.ORDER_ID,'') ORDER_ID
				,NVL(AA.ORDER_ITM_ID,'') ORDER_ITM_ID
				,NVL(AA.SETL_MEAN_NM,'') SETL_MEAN_NM
				,NVL(AA.TOT_GOODS_CNT,0) TOT_GOODS_CNT
				,NVL(AA.PRCL_AMT,0) PRCL_AMT
				,NVL(AA.GOODS_PER_REC_PRSN_SEQ,'') GOODS_PER_REC_PRSN_SEQ
				,NVL(AA.DELIV_CERT_YN,'N') DELIV_CERT_YN
				,NVL(AA.SENDER_NM,'') SENDER_NM
				,NVL(AA.SENDER_TELNO,'') SENDER_TELNO
				,NVL(AA.SENDER_TELFNO,'') SENDER_TELFNO
				,NVL(AA.SENDER_TELMNO,'') SENDER_TELMNO
				,NVL(AA.SENDER_TELLNO,'') SENDER_TELLNO
				,NVL(AA.SENDER_HTELNO,'') SENDER_HTELNO
				,NVL(AA.SENDER_HTELFNO,'') SENDER_HTELFNO
				,NVL(AA.SENDER_HTELMNO,'') SENDER_HTELMNO
				,NVL(AA.SENDER_HTELLNO,'') SENDER_HTELLNO
				,NVL(AA.SENDER_ZIPCD,'') SENDER_ZIPCD
				,NVL(AA.SENDER_ZIPCD_DISP,'') SENDER_ZIPCD_DISP
				,NVL(AA.SENDER_ADDR1,'') SENDER_ADDR1
				,NVL(AA.SENDER_ADDR2,'') SENDER_ADDR2
				,NVL(AA.RECPTER_NM,'') RECPTER_NM
				,NVL(AA.RECPTER_TELNO,'') RECPTER_TELNO
				,NVL(AA.RECPTER_TELFNO,'') RECPTER_TELFNO
				,NVL(AA.RECPTER_TELMNO,'') RECPTER_TELMNO
				,NVL(AA.RECPTER_TELLNO,'') RECPTER_TELLNO
				,NVL(AA.RECPTER_HTELNO,'') RECPTER_HTELNO
				,NVL(AA.RECPTER_HTELFNO,'') RECPTER_HTELFNO
				,NVL(AA.RECPTER_HTELMNO,'') RECPTER_HTELMNO
				,NVL(AA.RECPTER_HTELLNO,'') RECPTER_HTELLNO
				,NVL(AA.RECPTER_ZIPCD,'') RECPTER_ZIPCD
				,NVL(AA.RECPTER_ZIPCD_DISP,'') RECPTER_ZIPCD_DISP
				,NVL(AA.RECPTER_ADDR1,'') RECPTER_ADDR1
				,NVL(AA.RECPTER_ADDR2,'') RECPTER_ADDR2
				,NVL(AA.WGHT,0) WGHT
				,NVL(AA.VOLM,0) VOLM
				,NVL(AA.GOODSDIVNM,'') GOODSDIVNM
				,NVL(AA.REGI_NO,'') REGI_NO
				,NVL(AA.BEFPRTREGINOSEQ,'') BEFPRTREGINOSEQ
				,NVL(AA.DOM_EXP_YN,'N') DOM_EXP_YN
				,NVL(AA.KIND_DIV_CD,'') KIND_DIV_CD
				,NVL(AA.KIND_DIV_NM,'') KIND_DIV_NM
				,NVL(AA.STD_DIV_CD,'') STD_DIV_CD
				,NVL(AA.ORDER_CONF_DATE,'') ORDER_CONF_DATE
				,NVL(AA.CTRLCNPOREGIPOCD,'') CTRLCNPOREGIPOCD
				,NVL(AA.FRN_EXP_DIV_CD,'') FRN_EXP_DIV_CD
				,NVL(AA.CTRLCNPOREGIPONM,'') CTRLCNPOREGIPONM
				,NVL(AA.WISH_YN,'N') WISH_YN
				,NVL(AA.WISH_SEND_DATE,'') WISH_SEND_DATE
				,NVL(AA.DELIVPOREGIPOCD,'') DELIVPOREGIPOCD
				,NVL(AA.REPRSNT_REGI_NO_YN,'N') REPRSNT_REGI_NO_YN
				,DECODE(AA.REPRSNT_REGI_NO_YN,'Y',NVL(AA.START_END_REGI_NO,''),NVL(AA.REPRSNT_REGI_NO,'')) AS START_END_REGI_NO
				,NVL(AA.REPRSNT_REGI_NO,'') REPRSNT_REGI_NO
				,DECODE(AA.BOXTOT, 0, 1, NULL, 1, AA.BOXTOT) BOXTOT
				,DECODE(AA.GOODSTOT, 0, 1, NULL, 1, AA.GOODSTOT) GOODSTOT
				,NVL(AA.PAVLN_DIV_CD,'') PAVLN_DIV_CD
				,SUBSTR(NVL(AA.CNPONO,''),0,2) AS CNPONO1
				,SUBSTR(NVL(AA.CNPONO,''),3,3) AS CNPONO2
				,SUBSTR(NVL(AA.CNPONO,''),6,2) AS CNPONO3
				,SUBSTR(NVL(AA.CNPONO,''),8,2) AS CNPONO4
				,DECODE(AA.WISH_YN,'Y',
                '※ 예약주문 희망발송일자 : '||SUBSTR(AA.WISH_SEND_DATE,0,4)||'/'||SUBSTR(AA.WISH_SEND_DATE,5,2)||'/'||SUBSTR(AA.WISH_SEND_DATE,7,2),
                '') AS STR_CUST_PHRS_CONT
                ,NVL(AA.SEND_ADDR_SEQ,'') SEND_ADDR_SEQ
                ,NVL(AA.BALTSHT_PRT_YN,'N') BALTSHT_PRT_YN
				,NVL(AA.SEND_MSG_DIV_CD,'') SEND_MSG_DIV_CD
				,NVL(AA.SEND_MSG_DIV_NM,'') SEND_MSG_DIV_NM
				,NVL(AA.SEND_MSG_DLIV_FOM,'') SEND_MSG_DLIV_FOM
				,NVL(AA.SEND_MSG_CONT,'') SEND_MSG_CONT
				,NVL(AA.SEND_MSG,'') SEND_MSG
				,NVL(AA.RECPTER_VIRTL_YN,'') RECPTER_VIRTL_YN
				,NVL(AA.SENDER_VIRTL_YN,'') SENDER_VIRTL_YN
				,USSF_GET_WISHRECPRSNCNT(AA.ORDER_ID, AA.GOODS_CD, AA.WISH_SEND_DATE) TOT_RECPRSN_CNT /* 수취인수 */
				,NVL(AA.ORDER_TOT,0) ORDER_TOT
		  FROM
			   (SELECT
					   B.SUPPO_RGIST_POCD
					  ,(SELECT Y.PONM FROM PICMT0060 Y WHERE Y.REGIPOCD = B.SUPPO_RGIST_POCD AND Y.USEYN='Y') SUPPO_RGIST_PONM
					  ,B.GOODS_CD
					  ,(SELECT Y.GOODS_NM||' '||Y.UNIT FROM GD_GOODS_MAST Y WHERE Y.GOODS_CD = B.GOODS_CD) GOODS_NM
					  ,B.SUPP_COMP_ID
					  ,B.SUPP_COMP_NM
					  ,TO_CHAR(A.APPR_DATE, 'YYYYMMDD') APPR_DATE
					  ,B.ORDER_ID
					  ,B.ORDER_ITM_ID
					  ,F_GET_COMN_CD_NM('SETL_MEAN_CD', C.SETL_MEAN_CD) SETL_MEAN_NM
					  ,COUNT(1) TOT_GOODS_CNT
					  ,SUM(B.PRCL_AMT) PRCL_AMT
					  ,ROW_NUMBER() OVER(PARTITION BY B.ORDER_ID, B.GOODS_CD ORDER BY B.SUPP_COMP_ID, B.GOODS_CD, B.ORDER_ID, B.REGI_NO) as GOODS_PER_REC_PRSN_SEQ
					  ,NVL(B.DELIV_CERT_YN, 'N') DELIV_CERT_YN
					  ,B.SENDER_NM
					  ,NVL(B.SENDER_VIRTL_NO, B.SENDER_TELNO) AS SENDER_TELNO
					  ,F_DIV_TELNO(NVL(B.SENDER_VIRTL_NO, B.SENDER_TELNO),'F') SENDER_TELFNO
					  ,F_DIV_TELNO(NVL(B.SENDER_VIRTL_NO, B.SENDER_TELNO),'M') SENDER_TELMNO
					  ,F_DIV_TELNO(NVL(B.SENDER_VIRTL_NO, B.SENDER_TELNO),'L') SENDER_TELLNO
					  ,B.SENDER_HTELNO
					  ,F_DIV_TELNO(B.SENDER_HTELNO,'F') SENDER_HTELFNO
					  ,F_DIV_TELNO(B.SENDER_HTELNO,'M') SENDER_HTELMNO
					  ,F_DIV_TELNO(B.SENDER_HTELNO,'L') SENDER_HTELLNO
					  ,DECODE(B.SENDER_VIRTL_NO,NULL,'N','','N','Y') AS SENDER_VIRTL_YN
					  ,REPLACE(B.SENDER_ZIPCD,'-','') AS SENDER_ZIPCD
					  ,CASE WHEN LENGTH(B.SENDER_ZIPCD) = 5 THEN B.SENDER_ZIPCD
							WHEN LENGTH(B.SENDER_ZIPCD) = 6 THEN SUBSTR(B.SENDER_ZIPCD,1,3) || '-' || SUBSTR(B.SENDER_ZIPCD,4)
							ELSE B.SENDER_ZIPCD END AS SENDER_ZIPCD_DISP
					  ,B.SENDER_ADDR1
					  ,B.SENDER_ADDR2
					  ,B.RECPTER_NM
					  ,NVL(B.RECPTER_VIRTL_NO, B.RECPTER_TELNO) AS RECPTER_TELNO
					  ,F_DIV_TELNO(NVL(B.RECPTER_VIRTL_NO, B.RECPTER_TELNO),'F') RECPTER_TELFNO
					  ,F_DIV_TELNO(NVL(B.RECPTER_VIRTL_NO, B.RECPTER_TELNO),'M') RECPTER_TELMNO
					  ,F_DIV_TELNO(NVL(B.RECPTER_VIRTL_NO, B.RECPTER_TELNO),'L') RECPTER_TELLNO
					  ,B.RECPTER_HTELNO
					  ,F_DIV_TELNO(B.RECPTER_HTELNO,'F') RECPTER_HTELFNO
					  ,F_DIV_TELNO(B.RECPTER_HTELNO,'M') RECPTER_HTELMNO
					  ,F_DIV_TELNO(B.RECPTER_HTELNO,'L') RECPTER_HTELLNO
					  ,DECODE(B.RECPTER_VIRTL_NO,NULL,'N','','N','Y') AS RECPTER_VIRTL_YN
					  ,REPLACE(B.RECPTER_ZIPCD,'-','') AS RECPTER_ZIPCD
					  ,CASE WHEN LENGTH(B.RECPTER_ZIPCD) = 5 THEN B.RECPTER_ZIPCD
							WHEN LENGTH(B.RECPTER_ZIPCD) = 6 THEN SUBSTR(B.RECPTER_ZIPCD,1,3) || '-' || SUBSTR(B.RECPTER_ZIPCD,4)
							ELSE B.RECPTER_ZIPCD END AS RECPTER_ZIPCD_DISP
					  ,B.RECPTER_ADDR1
					  ,B.RECPTER_ADDR2
					  ,B.WGHT
					  ,B.VOLM
					  ,'' GOODSDIVNM
					  ,B.REGI_NO
					  ,'1' BEFPRTREGINOSEQ
					  ,NVL(DECODE(B.TDAY_EXP_YN,'Y',B.TDAY_EXP_YN,B.DOM_EXP_YN),'N') DOM_EXP_YN
					  ,B.KIND_DIV_CD
					  ,F_GET_COMN_CD_NM('KIND_DIV_CD',B.KIND_DIV_CD) KIND_DIV_NM
					  ,DECODE(B.STD_DIV_CD, '3', '제주(익일배달)','4','제주(D+2)', '') STD_DIV_CD
					  ,TO_CHAR(B.ORDER_CONF_DATE, 'YYYYMMDD') ORDER_CONF_DATE
					  ,(SELECT PRCLARRIVCNPOREGIPOCD
						  FROM PICMT0060 K, V_POSTALCODE H
						 WHERE K.USEYN = 'Y' AND H.USEYN = 'Y'
						   AND REPLACE(B.RECPTER_ZIPCD,'-','') = H.ZIPCD
						   AND H.DELIVREGIPOCD = K.REGIPOCD
						   AND ROWNUM <![CDATA[<=]]> 1
						) CTRLCNPOREGIPOCD
					  ,DECODE(B.FRN_EXP_DIV_CD,'31','EMS','12','SP') FRN_EXP_DIV_CD
					  ,(SELECT KN.POSHORTNM
						  FROM PICMT0060 KN, PICMT0060 k, V_POSTALCODE H
						 WHERE K.USEYN = 'Y' AND H.USEYN = 'Y' AND KN.USEYN = 'Y'
						   AND REPLACE(B.RECPTER_ZIPCD,'-','') = H.ZIPCD
						   AND H.DELIVREGIPOCD = K.REGIPOCD
						   AND K.PRCLARRIVCNPOREGIPOCD = KN.REGIPOCD
						   AND ROWNUM <![CDATA[<=]]> 1
						) CTRLCNPOREGIPONM
					  ,DECODE((SELECT NVL(COUNT(1), 0) FROM OD_FIX_RESRV_ORDER ODR WHERE B.ORDER_ID = ODR.ORDER_ID AND NVL(ODR.USEYN, 'Y') != 'N'), 0, 'N', 'Y') WISH_YN
					  ,NVL(TO_CHAR(B.WISH_SEND_DATE, 'YYYYMMDD'), TO_CHAR(A.APPR_DATE, 'YYYYMMDD')) AS WISH_SEND_DATE
					  ,(SELECT K.POSHORTNM
						  FROM PICMT0060 K, V_POSTALCODE H
						 WHERE K.USEYN = 'Y' AND H.USEYN = 'Y'
						   AND REPLACE(B.RECPTER_ZIPCD,'-','') = H.ZIPCD
						   AND H.DELIVREGIPOCD = K.REGIPOCD
						   AND ROWNUM <![CDATA[<=]]> 1
						) DELIVPOREGIPOCD
					  ,DECODE(TRIM(NVL(B.REPRSNT_REGI_NO,'N')),'N','N','','N','Y') REPRSNT_REGI_NO_YN
					  ,(SELECT MAX(X.REPRSNT_REGI_NO)||'~'||MAX(X.REGI_NO)||' ('||COUNT(1)||'개)' START_END_REGI_NO
					     FROM OD_ORDER_ITM X
					    WHERE X.ORDER_ID = B.ORDER_ID
					       AND X.REPRSNT_REGI_NO IS NOT NULL
						   AND X.REPRSNT_REGI_NO = B.REPRSNT_REGI_NO
						   AND X.SEND_ADDR_SEQ = B.SEND_ADDR_SEQ
						   AND X.GOODS_CD = B.GOODS_CD
						   AND X.GOODS_CANCEL_YN='N') START_END_REGI_NO
					  ,B.REPRSNT_REGI_NO
					  ,NVL((SELECT COUNT(X.REPRSNT_REGI_NO) FROM OD_ORDER_ITM X
						 WHERE X.ORDER_ID = B.ORDER_ID
						   AND X.REPRSNT_REGI_NO IS NOT NULL
						   AND X.REPRSNT_REGI_NO = B.REPRSNT_REGI_NO
						   AND X.SEND_ADDR_SEQ = B.SEND_ADDR_SEQ
						   AND X.GOODS_CD = B.GOODS_CD
						   AND X.GOODS_CANCEL_YN='N'),0) BOXTOT
					  ,NVL((SELECT COUNT(X.REPRSNT_REGI_NO) FROM OD_ORDER_ITM X
						 WHERE X.ORDER_ID = B.ORDER_ID
						   AND X.REPRSNT_REGI_NO IS NOT NULL
						   AND X.REPRSNT_REGI_NO = B.REPRSNT_REGI_NO
						   AND X.SEND_ADDR_SEQ = B.SEND_ADDR_SEQ
						   AND X.GOODS_CD = B.GOODS_CD
						   AND X.GOODS_CANCEL_YN='N'),0) GOODSTOT
					  ,NVL((SELECT COUNT(1) FROM OD_ORDER_ITM X
                         WHERE X.ORDER_ID = B.ORDER_ID
                         AND X.GOODS_CD = B.GOODS_CD
                         AND X.GOODS_CANCEL_YN='N'),0) ORDER_TOT
					  ,B.PAVLN_DIV_CD
					  , DECODE((SELECT KN.CNPONO
								  FROM PICMT0060 KN, PICMT0060 K, V_POSTALCODE H
								 WHERE K.USEYN = 'Y'
								   AND H.USEYN = 'Y'
								   AND KN.USEYN = 'Y'
								   AND REPLACE(B.RECPTER_ZIPCD,'-','') = H.ZIPCD
								   AND H.DELIVREGIPOCD = K.REGIPOCD
								   AND K.PRCLARRIVCNPOREGIPOCD = KN.REGIPOCD
								   AND ROWNUM <![CDATA[<=]]> 1), '', '', (SELECT KN.CNPONO
																FROM PICMT0060 KN, PICMT0060 K, V_POSTALCODE H
															   WHERE K.USEYN = 'Y'
																 AND H.USEYN = 'Y'
																 AND KN.USEYN = 'Y'
																 AND REPLACE(B.RECPTER_ZIPCD,'-','') = H.ZIPCD
																 AND H.delivregipocd = K.REGIPOCD
																 AND K.PRCLARRIVCNPOREGIPOCD = KN.REGIPOCD
																 AND ROWNUM <![CDATA[<=]]> 1
															  ) || (SELECT MAX(NVL(DSCRNNO,'000') || NVL(PRCLTEAMCODE,'00') || NVL(PRCLDAREACD,'00'))
																	  FROM V_POSTALCODE
																	 WHERE ZIPCD = REPLACE(B.RECPTER_ZIPCD,'-','')
																	   AND USEYN = 'Y')
						  ) AS CNPONO
					  ,B.SEND_ADDR_SEQ
					  ,B.BALTSHT_PRT_YN
					  ,(SELECT NVL(D.SEND_MSG_DIV_CD,'')
						  FROM OD_SEND_MSG D, CM_SEND_MSG_CD E
						 WHERE D.ORDER_ITM_ID = B.ORDER_ITM_ID
						   AND D.SEND_MSG_CD = E.SEND_MSG_CD
						   AND D.SEND_MSG_DIV_CD = E.SEND_MSG_DIV_CD
						   AND D.SEND_MSG_TYP_CD = E.SEND_MSG_TYP_CD
						   AND D.SEND_MSG_DLIV_FOM IN ('001','002')
						   AND ROWNUM = 1) SEND_MSG_DIV_CD
					  ,(SELECT NVL(E.SEND_MSG_DIV_NM,'')
						  FROM OD_SEND_MSG D, CM_SEND_MSG_CD E
						 WHERE D.ORDER_ITM_ID = B.ORDER_ITM_ID
						   AND D.SEND_MSG_CD = E.SEND_MSG_CD
						   AND D.SEND_MSG_DIV_CD = E.SEND_MSG_DIV_CD
						   AND D.SEND_MSG_TYP_CD = E.SEND_MSG_TYP_CD
						   AND D.SEND_MSG_DLIV_FOM IN ('001','002')
						   AND ROWNUM = 1) SEND_MSG_DIV_NM
					  ,(SELECT NVL(D.SEND_MSG_DLIV_FOM,'')
						  FROM OD_SEND_MSG D
						 WHERE D.ORDER_ITM_ID = B.ORDER_ITM_ID
						   AND D.SEND_MSG_DLIV_FOM IN ('001','002')
						   AND ROWNUM = 1) SEND_MSG_DLIV_FOM
					  ,(SELECT NVL(D.SEND_MSG_CONT,'')
						  FROM OD_SEND_MSG D
						 WHERE D.ORDER_ITM_ID = B.ORDER_ITM_ID
						   AND D.SEND_MSG_DLIV_FOM IN ('001','002')
						   AND ROWNUM = 1) SEND_MSG_CONT
					  ,MAX(B.SEND_MSG) SEND_MSG
				  FROM OD_ORDER_MAST A, OD_ORDER_ITM B, OD_ORDER_SETL C
				 WHERE A.ORDER_ID = B.ORDER_ID
				   AND A.ORDER_ID = C.ORDER_ID
				   AND C.USE_YN = 'Y'
				   AND B.SUPPO_RGIST_POCD IN (SELECT SUPPO_RGIST_POCD FROM CO_SUPP_COMP_MAST WHERE SUPP_COMP_ID IN (#searchSuppCompId#, #loginId#))
				/* AND NVL(B.PRSNT_YN,'N') = 'N'
				   AND NVL(B.EXTRA_GOODS_YN,'N') = 'N' */
				<include refid="selectPrtInclude1" />
				<isNotEmpty property="searchPrtOrderNos">	/* 기표지 선택상품 */
					AND (1,B.GOODS_CD || NVL(TO_CHAR(B.WISH_SEND_DATE,'YYYYMMDD'),TO_CHAR(A.APPR_DATE,'YYYYMMDD'))) IN
						<iterate property="searchPrtOrderNos" open="("  close=")" conjunction=",">
							(1,#searchPrtOrderNos[]#)
						</iterate>
				</isNotEmpty>
				 GROUP BY B.SUPPO_RGIST_POCD
						 ,B.GOODS_CD
						 ,B.GOODS_NM
						 ,B.SUPP_COMP_ID
						 ,B.SUPP_COMP_NM
						 ,A.APPR_DATE
						 ,B.ORDER_ID
						 ,B.ORDER_ITM_ID
						 ,C.SETL_MEAN_CD
						 ,C.SETL_APPR_AMT
						 ,C.TOT_DELIV_CERT_FEE
						 ,C.TOT_CONG_CARD_FEE
						 ,B.SENDER_NM
						 ,B.SENDER_TELNO
						 ,B.SENDER_VIRTL_NO
						 ,B.SENDER_HTELNO
						 ,B.SENDER_ZIPCD
						 ,B.SENDER_ADDR1
						 ,B.SENDER_ADDR2
						 ,B.RECPTER_NM
						 ,B.RECPTER_TELNO
						 ,B.RECPTER_VIRTL_NO
						 ,B.RECPTER_HTELNO
						 ,B.RECPTER_ZIPCD
						 ,B.RECPTER_ADDR1
						 ,B.RECPTER_ADDR2
						 ,B.TDAY_EXP_YN
						 ,B.DOM_EXP_YN
						 ,B.KIND_DIV_CD
						 ,B.STD_DIV_CD
						 ,B.SEND_ADDR_SEQ
						 ,B.FRN_EXP_DIV_CD
						 ,NVL(B.DELIV_CERT_YN, 'N')
						 ,B.REPRSNT_REGI_NO
						 ,B.REGI_NO
						 ,NVL(TO_CHAR(B.WISH_SEND_DATE, 'YYYYMMDD'), TO_CHAR(A.APPR_DATE, 'YYYYMMDD'))
						 ,B.BALTSHT_PRT_YN
						 ,B.PAVLN_DIV_CD
						 ,B.ORDER_CONF_DATE
						 ,B.WGHT
						 ,B.VOLM
				 <include refid="selectPrtInclude2" />
				) AA
	</select>

<!-- 기표지출력 이력 대상 ORDER_ITM_ID 리스트 조회 -->
	<select id="selectSuppBriefOrderItmIdForPrntTxt" parameterClass ="java.util.HashMap" resultClass="String" >
		SELECT /* 파일명[파일설명] : SrmFoOrderMgr_SQL.xml[기표지출력 대상 리스트 조회] SQL ID : selectSuppBriefOrderItmIdForPrntTxt */
			   B.ORDER_ITM_ID
		  FROM OD_ORDER_MAST A, OD_ORDER_ITM B, OD_ORDER_SETL C
		 WHERE A.ORDER_ID = B.ORDER_ID
		   AND A.ORDER_ID = C.ORDER_ID
		   AND C.USE_YN = 'Y'
		   AND B.SUPPO_RGIST_POCD IN (SELECT SUPPO_RGIST_POCD FROM CO_SUPP_COMP_MAST WHERE SUPP_COMP_ID IN (#searchSuppCompId#, #loginId#))
		/* AND NVL(B.PRSNT_YN,'N') = 'N'
		   AND NVL(B.EXTRA_GOODS_YN,'N') = 'N' */
		<include refid="selectPrtInclude1" />
		<isNotEmpty property="searchPrtOrderNos">	/* 기표지 선택상품 */
			AND (1,B.GOODS_CD || NVL(TO_CHAR(B.WISH_SEND_DATE,'YYYYMMDD'),TO_CHAR(A.APPR_DATE,'YYYYMMDD'))) IN
				<iterate property="searchPrtOrderNos" open="("  close=")" conjunction=",">
					(1,#searchPrtOrderNos[]#)
				</iterate>
		</isNotEmpty>
	</select>

	<!-- 기표지출력 인터페이스 등록 대상 ORDER_ITM_ID 리스트 조회 -->
	<select id="selectSuppBriefOrderItmIdForIF" parameterClass ="java.util.HashMap" resultClass="String" >
		SELECT /* 파일명[파일설명] : SrmFoOrderMgr_SQL.xml[기표지출력 대상 리스트 조회] SQL ID : selectSuppBriefOrderItmIdForPrntTxt */
			   B.ORDER_ITM_ID
		  FROM OD_ORDER_MAST A, OD_ORDER_ITM B, OD_ORDER_SETL C
		 WHERE A.ORDER_ID = B.ORDER_ID
		   AND A.ORDER_ID = C.ORDER_ID
		   AND C.USE_YN = 'Y'
		   AND B.SUPPO_RGIST_POCD IN (SELECT SUPPO_RGIST_POCD FROM CO_SUPP_COMP_MAST WHERE SUPP_COMP_ID IN (#searchSuppCompId#, #loginId#))
		/* AND NVL(B.PRSNT_YN,'N') = 'N'
		   AND NVL(B.EXTRA_GOODS_YN,'N') = 'N' */
		   AND NVL(B.BALTSHT_PRT_YN,'N') = 'N'
		<include refid="selectPrtInclude1" />
		<isNotEmpty property="searchPrtOrderNos">	/* 기표지 선택상품 */
			AND (1,B.GOODS_CD || NVL(TO_CHAR(B.WISH_SEND_DATE,'YYYYMMDD'),TO_CHAR(A.APPR_DATE,'YYYYMMDD'))) IN
				<iterate property="searchPrtOrderNos" open="("  close=")" conjunction=",">
					(1,#searchPrtOrderNos[]#)
				</iterate>
		</isNotEmpty>
		   AND B.PAVLN_DIV_CD NOT IN ('02', '03', '05', '08')
	</select>

	<!-- 기표지출력 REGI_NO 리스트 조회 -->
	<select id="selectSuppBriefRegiNoForPrntTxt" parameterClass ="java.util.HashMap" resultClass="String" >
		SELECT /* 파일명[파일설명] : SrmFoOrderMgr_SQL.xml[기표지출력 대상 리스트 조회] SQL ID : selectSuppBriefRegiNoForPrntTxt */
			   B.REGI_NO
		  FROM OD_ORDER_MAST A, OD_ORDER_ITM B, OD_ORDER_SETL C
		 WHERE A.ORDER_ID = B.ORDER_ID
		   AND A.ORDER_ID = C.ORDER_ID
		   AND C.USE_YN = 'Y'
		   AND B.SUPPO_RGIST_POCD IN (SELECT SUPPO_RGIST_POCD FROM CO_SUPP_COMP_MAST WHERE SUPP_COMP_ID IN (#searchSuppCompId#, #loginId#))
		/* AND NVL(B.PRSNT_YN,'N') = 'N'
		   AND NVL(B.EXTRA_GOODS_YN,'N') = 'N' */
		   AND NVL(B.BALTSHT_PRT_YN,'N') = 'N'
		<include refid="selectPrtInclude1" />
		<isNotEmpty property="searchPrtOrderNos">	/* 기표지 선택상품 */
			AND (1,B.GOODS_CD || NVL(TO_CHAR(B.WISH_SEND_DATE,'YYYYMMDD'),TO_CHAR(A.APPR_DATE,'YYYYMMDD'))) IN
				<iterate property="searchPrtOrderNos" open="("  close=")" conjunction=",">
					(1,#searchPrtOrderNos[]#)
				</iterate>
		</isNotEmpty>
	</select>

	<!-- 기표지출력 인터페이스 등록 대상 ORDER_ITM_ID 리스트 조회2 -->
	<select id="selectSuppBriefOrderItmIdForIF_PCJUT0280_SEQ" parameterClass ="java.util.HashMap" resultClass="String" >
		SELECT /* 파일명[파일설명] : SrmFoOrderMgr_SQL.xml[기표지출력 인터페이스 등록 대상 ORDER_ITM_ID 리스트 조회2] SQL ID : selectSuppBriefOrderItmIdForIF_PCJUT0280_SEQ */
			   B.ORDER_ITM_ID
		  FROM OD_ORDER_MAST A, OD_ORDER_ITM B, OD_ORDER_SETL C
		 WHERE A.ORDER_ID = B.ORDER_ID
		   AND A.ORDER_ID = C.ORDER_ID
		   AND C.USE_YN = 'Y'
		   AND B.SUPPO_RGIST_POCD IN (SELECT SUPPO_RGIST_POCD FROM CO_SUPP_COMP_MAST WHERE SUPP_COMP_ID IN (#searchSuppCompId#, #loginId#))
		/* AND NVL(B.PRSNT_YN,'N') = 'N'
		   AND NVL(B.EXTRA_GOODS_YN,'N') = 'N' */
		   AND NVL(B.BALTSHT_PRT_YN,'N') = 'N'
		<include refid="selectPrtInclude1" />
		<isNotEmpty property="searchPrtOrderNos">	/* 기표지 선택상품 */
			AND (1,B.GOODS_CD || NVL(TO_CHAR(B.WISH_SEND_DATE,'YYYYMMDD'),TO_CHAR(A.APPR_DATE,'YYYYMMDD'))) IN
				<iterate property="searchPrtOrderNos" open="("  close=")" conjunction=",">
					(1,#searchPrtOrderNos[]#)
				</iterate>
		</isNotEmpty>
		   AND B.PAVLN_DIV_CD NOT IN ('02', '03', '05', '08')
		   AND B.REPRSNT_REGI_NO IS NOT NULL
	</select>

	<!-- 기표지출력 이력 시퀀스 조회 -->
	<select id="selectPrintHistorySeq" parameterClass ="java.util.HashMap" resultClass="String" >
		/* 파일명[파일설명] : SrmFoOrderMgr_SQL.xml[기표지출력 이력 시퀀스 조회] SQL ID : selectPrintHistorySeq */
		SELECT NVL(MAX(TO_NUMBER(PRT_SEQ)),0) FROM PRT_HISTORY_MGMT
	</select>

	<!-- 기표지 이력관리 저장 -->
	<insert id="createPrintHistory" parameterClass ="java.util.HashMap">
		/** SQL_ID : BO.SrmFoOrder.createPrintHistory **/
		INSERT INTO PRT_HISTORY_MGMT
			(
				PRT_SEQ ,PURCHASE_ID,COMPLETE_DATE,GOODS_CODE,GOODS_NAME,
				BIZ_CODE,BIZ_NAME,TOT_GOODS_CNT,PRCL_PRC,GOODS_PER_REC_PRSN_SEQ,
				GOODS_CNT,DELIV_CERT_YN,REQ_PRSN_NM,REQ_TELEPHONE_1,REQ_TELEPHONE_2,
				REQ_TELEPHONE_3,REQ_MOBILE_1,REQ_MOBILE_2,REQ_MOBILE_3,REQ_POST_CODE,
				REQ_ADDRESS_1,REQ_ADDRESS_2,REC_PRSN_NM,REC_TELEPHONE_1,REC_TELEPHONE_2,
				REC_TELEPHONE_3,REC_MOBILE_1,REC_MOBILE_2,REC_MOBILE_3,REC_POST_CODE,
				REC_ADDRESS_1,REC_ADDRESS_2,GOODS_WGHT,GOODS_VOLM,MSG_CODE,
				CD_ADDR_NM,CDADDR_KINDCD,CARD_CONTENTS,GOODS_DIV_NM,TRACKING_NUMBER,
				BEF_PRT_REGINO_SEQ,SUPP_PO_REGIPONM,DOM_EXPYN,STDDIVCD,CHKDATE,
				CTRLCN_PO_REGIPOCD,CTRLCN_PO_REGIPONM,MSG,GUBUN,DELIV_PO_REGIPONM,
				FILE_RT_NM,PRT_TYPE,PRT_MODE,PRT_METHOD,PRT_GUBUN,
				PRT_DATE,PRT_PRSN_ID
			)
			SELECT TO_NUMBER(#prtHistorySeq#) + ROWNUM AS PRT_HISTORY_SEQ
				  ,A.ORDER_ID
				  ,TO_CHAR(A.APPR_DATE, 'YYYYMMDD') APPR_DATE
				  ,B.GOODS_CD
				  ,(SELECT SUBSTRB(Y.GOODS_NM||' '||Y.UNIT,1,200) FROM GD_GOODS_MAST Y WHERE Y.GOODS_CD = B.GOODS_CD) GOODS_NM
				  ,B.SUPP_COMP_ID
				  ,B.SUPP_COMP_NM
				  ,1 TOT_GOODS_CNT
				  ,B.PRCL_AMT PRCL_AMT
				  ,ROW_NUMBER() OVER(PARTITION BY B.ORDER_ID, B.GOODS_CD ORDER BY B.SUPP_COMP_ID, B.GOODS_CD, B.ORDER_ID, B.REGI_NO) as GOODS_PER_REC_PRSN_SEQ
				  ,1 TOT_GOODS_CNT
				  ,NVL(B.DELIV_CERT_YN, 'N') DELIV_CERT_YN
				  ,B.SENDER_NM
				  ,F_DIV_TELNO(NVL(B.SENDER_VIRTL_NO, B.SENDER_TELNO),'F') SENDER_TELFNO
				  ,F_DIV_TELNO(NVL(B.SENDER_VIRTL_NO, B.SENDER_TELNO),'M') SENDER_TELMNO
				  ,F_DIV_TELNO(NVL(B.SENDER_VIRTL_NO, B.SENDER_TELNO),'L') SENDER_TELLNO
				  ,F_DIV_TELNO(B.SENDER_HTELNO,'F') SENDER_HTELFNO
				  ,F_DIV_TELNO(B.SENDER_HTELNO,'M') SENDER_HTELMNO
				  ,F_DIV_TELNO(B.SENDER_HTELNO,'L') SENDER_HTELLNO
				  ,REPLACE(B.SENDER_ZIPCD,'-','') AS SENDER_ZIPCD
				  ,B.SENDER_ADDR1
				  ,B.SENDER_ADDR2
				  ,B.RECPTER_NM
				  ,F_DIV_TELNO(NVL(B.RECPTER_VIRTL_NO, B.RECPTER_TELNO),'F') RECPTER_TELFNO
				  ,F_DIV_TELNO(NVL(B.RECPTER_VIRTL_NO, B.RECPTER_TELNO),'M') RECPTER_TELMNO
				  ,F_DIV_TELNO(NVL(B.RECPTER_VIRTL_NO, B.RECPTER_TELNO),'L') RECPTER_TELLNO
				  ,F_DIV_TELNO(B.RECPTER_HTELNO,'F') RECPTER_HTELFNO
				  ,F_DIV_TELNO(B.RECPTER_HTELNO,'M') RECPTER_HTELMNO
				  ,F_DIV_TELNO(B.RECPTER_HTELNO,'L') RECPTER_HTELLNO
				  ,REPLACE(B.RECPTER_ZIPCD,'-','') AS RECPTER_ZIPCD
				  ,B.RECPTER_ADDR1
				  ,B.RECPTER_ADDR2
				  ,B.WGHT
				  ,B.VOLM
				  ,(SELECT NVL(D.SEND_MSG_DIV_CD,'')
					  FROM OD_SEND_MSG D, CM_SEND_MSG_CD E
					 WHERE D.ORDER_ITM_ID = B.ORDER_ITM_ID
					   AND D.SEND_MSG_CD = E.SEND_MSG_CD
					   AND D.SEND_MSG_DIV_CD = E.SEND_MSG_DIV_CD
					   AND D.SEND_MSG_TYP_CD = E.SEND_MSG_TYP_CD
					   AND D.SEND_MSG_DLIV_FOM IN ('001','002')
					   AND ROWNUM = 1) SEND_MSG_DIV_CD
				  ,(SELECT NVL(E.SEND_MSG_DIV_NM,'')
					  FROM OD_SEND_MSG D, CM_SEND_MSG_CD E
					 WHERE D.ORDER_ITM_ID = B.ORDER_ITM_ID
					   AND D.SEND_MSG_CD = E.SEND_MSG_CD
					   AND D.SEND_MSG_DIV_CD = E.SEND_MSG_DIV_CD
					   AND D.SEND_MSG_TYP_CD = E.SEND_MSG_TYP_CD
					   AND D.SEND_MSG_DLIV_FOM IN ('001','002')
					   AND ROWNUM = 1) SEND_MSG_DIV_NM
				  ,(SELECT NVL(D.SEND_MSG_DLIV_FOM,'')
					  FROM OD_SEND_MSG D
					 WHERE D.ORDER_ITM_ID = B.ORDER_ITM_ID
					   AND D.SEND_MSG_DLIV_FOM IN ('001','002')
					   AND ROWNUM = 1) SEND_MSG_DLIV_FOM
				  ,(SELECT NVL(D.SEND_MSG_CONT,'')
					  FROM OD_SEND_MSG D
					 WHERE D.ORDER_ITM_ID = B.ORDER_ITM_ID
					   AND D.SEND_MSG_DLIV_FOM IN ('001','002')
					   AND ROWNUM = 1) SEND_MSG_CONT
				  ,'' GOODSDIVNM
				  ,B.REGI_NO
				  ,'1' BEFPRTREGINOSEQ
				  ,(SELECT Y.PONM FROM PICMT0060 Y WHERE Y.REGIPOCD = B.SUPPO_RGIST_POCD AND Y.USEYN='Y') SUPPO_RGIST_PONM
				  ,NVL(DECODE(B.TDAY_EXP_YN,'Y',B.TDAY_EXP_YN,B.DOM_EXP_YN),'N') DOM_EXP_YN
				  ,DECODE(B.STD_DIV_CD, '3', '제주(익일배달)','4','제주(D+2)', '') STD_DIV_CD
				  ,TO_CHAR(B.ORDER_CONF_DATE, 'YYYYMMDD') ORDER_CONF_DATE
				  ,(SELECT PRCLARRIVCNPOREGIPOCD
					  FROM PICMT0060 K, V_POSTALCODE H
					 WHERE K.USEYN = 'Y' AND H.USEYN = 'Y'
					   AND REPLACE(B.RECPTER_ZIPCD,'-','') = H.ZIPCD
					   AND H.DELIVREGIPOCD = K.REGIPOCD
					   AND ROWNUM <![CDATA[<=]]> 1
					) CTRLCNPOREGIPOCD
				  ,(SELECT KN.POSHORTNM
					  FROM PICMT0060 KN, PICMT0060 k, V_POSTALCODE H
					 WHERE K.USEYN = 'Y' AND H.USEYN = 'Y' AND KN.USEYN = 'Y'
					   AND REPLACE(B.RECPTER_ZIPCD,'-','') = H.ZIPCD
					   AND H.DELIVREGIPOCD = K.REGIPOCD
					   AND K.PRCLARRIVCNPOREGIPOCD = KN.REGIPOCD
					   AND ROWNUM <![CDATA[<=]]> 1
					) CTRLCNPOREGIPONM
				  ,B.SEND_MSG
				  ,'K'
				  ,(SELECT K.POSHORTNM
					  FROM PICMT0060 K, V_POSTALCODE H
					 WHERE K.USEYN = 'Y' AND H.USEYN = 'Y'
					   AND REPLACE(B.RECPTER_ZIPCD,'-','') = H.ZIPCD
					   AND H.DELIVREGIPOCD = K.REGIPOCD
					   AND ROWNUM <![CDATA[<=]]> 1
					) DELIVPOREGIPOCD
				  ,#fileRtNm#
				  ,#prtType#
				  ,#prtMode#
				  ,#prtMethod#
				  ,#prtGubun#
				  ,SYSDATE
				  ,#prsnId#
		  FROM OD_ORDER_MAST A, OD_ORDER_ITM B, OD_ORDER_SETL C
		 WHERE A.ORDER_ID = B.ORDER_ID
		   AND A.ORDER_ID = C.ORDER_ID
		   AND C.USE_YN = 'Y'
		/* AND NVL(B.PRSNT_YN,'N') = 'N'
		   AND NVL(B.EXTRA_GOODS_YN,'N') = 'N' */
		<include refid="selectPrtInclude1" />
		<isNotEmpty property="searchPrtOrderNos">	/* 기표지 선택상품 */
			AND (1,B.GOODS_CD || NVL(TO_CHAR(B.WISH_SEND_DATE,'YYYYMMDD'),TO_CHAR(A.APPR_DATE,'YYYYMMDD'))) IN
				<iterate property="searchPrtOrderNos" open="("  close=")" conjunction=",">
					(1,#searchPrtOrderNos[]#)
				</iterate>
		</isNotEmpty>
	</insert>

	<!-- 등기관리테이블사용여부관리 -->
	<update id="updateTxorderPrtSet" parameterClass ="java.util.HashMap">
		/** SQL_ID : BO.SrmFoOrder.updateTxorderPrtSet **/
		UPDATE OD_TRACKING_NUMBER_MGMT
		   SET BALTSHT_PRT_YN = 'Y'
		 WHERE (1,REGI_NO) IN
				<iterate property="searchRegiNos" open="("  close=")" conjunction=",">
					(1,#searchRegiNos[]#)
				</iterate>
		   AND NVL(USE_YN,'N') = 'Y'
	</update>

	<!-- 주문아이템 기표지출력 상태 변경 -->
	<update id="updateOrderItmLabelPrintState" parameterClass ="java.util.HashMap">
		/** SQL_ID : BO.SrmFoOrder.updateOrderItmLabelPrintState **/
		UPDATE OD_ORDER_ITM
		   SET BALTSHT_PRT_YN = 'Y'
		 WHERE (1,ORDER_ID) IN
				<iterate property="orderIds" open="("  close=")" conjunction=",">
					(1,#orderIds[]#)
				</iterate>
		   AND (1,ORDER_ITM_ID) IN
				<iterate property="forPrntOrderItmIdList" open="("  close=")" conjunction=",">
					(1,#forPrntOrderItmIdList[]#)
				</iterate>
		   AND NVL(BALTSHT_PRT_YN,'N') = 'N'
	</update>

	<update id="createSuppDataToEpostRecev" parameterClass ="java.util.HashMap">
		/** SQL_ID : BO.SrmFoOrder.createSuppDataToEpostRecev **/
		INSERT INTO IFS_PRRWT0410 T
			(
			 epostRecevNo, epostRecevSeq, EPOSTBIZCD, apprNo, Reqprsnnm,
			 Reqprsnzipcd, Reqprsnaddr, Reqprsndtailaddr, Reqprsntelfno, Reqprsntelmno,
			 Reqprsntellno, Reqprsnemailid, Reqprsnhtelfno, Reqprsnhtelmno, Reqprsnhtellno,
			 Recprsnnm, Recprsnzipcd, Recprsnaddr, Recprsndtailaddr, Recprsntelfno,
			 Recprsntelmno, Recprsntellno, Recprsnemailid, Recprsnhtelfno, Recprsnhtelmno,
			 Recprsnhtellno, suppCompNm, Suppcompzipcd, Suppcompaddr, Suppcompdtailaddr,
			 Suppcomptelfno, Suppcomptelmno, Suppcomptellno, Suppcompfaxfno, suppCompfaxmno,
			 Suppcompfaxlno, CERTDOCORNM,  EpostrecevYmd, Dommaildivcd, Kinddivcd,
			 delivCertYn, domExpYn, Recevpoedpscd, Setlamt, Setltypecd,
			 Mailtlgphdivcd, Goodscd, Ordergoodsnm, GoodsAmt, Prclwght,
			 Prclvolm, Prclcont, WrapYn, regiNo, suppCompCd,
			 Workstuscd, origEpostRecevNo, writeDate, writeprsnid, thisDdDelivYn,
			 stdDivCd, smsUseYn, prclContCd, RAISE_SEQ, IF_ID,
			 INIT_TIME, DEAL_STATE, WRK_GBN, REPRSNTREGINO
			)
		SELECT B.ORDER_ITM_ID
			  ,ROWNUM
			  ,'C'
			  ,(SELECT AFTPMN_TREAT_APPR_NO FROM CO_SUPP_COMP_MAST Y WHERE Y.SUPP_COMP_ID = B.SUPP_COMP_ID) APPRNO
			  ,SUBSTRB(B.SENDER_NM,1,40)
			  ,SUBSTRB(REPLACE(B.SENDER_ZIPCD,'-',''),1,6)
			  ,SUBSTRB(B.SENDER_ADDR1,1,60)
			  ,SUBSTRB(B.SENDER_ADDR2,1,100)
			  ,F_DIV_TELNO(B.SENDER_TELNO,'F') SENDER_TELFNO
			  ,F_DIV_TELNO(B.SENDER_TELNO,'M') SENDER_TELMNO
			  ,F_DIV_TELNO(B.SENDER_TELNO,'L') SENDER_TELLNO
			  ,B.SENDER_EMAIL
			  ,F_DIV_TELNO(B.SENDER_HTELNO,'F') SENDER_HTELFNO
			  ,F_DIV_TELNO(B.SENDER_HTELNO,'M') SENDER_HTELMNO
			  ,F_DIV_TELNO(B.SENDER_HTELNO,'L') SENDER_HTELLNO
			  ,SUBSTRB(B.RECPTER_NM,1,40)
			  ,SUBSTRB(REPLACE(B.RECPTER_ZIPCD,'-',''),1,6)
			  ,SUBSTRB(B.RECPTER_ADDR1,1,60)
			  ,SUBSTRB(B.RECPTER_ADDR2,1,100)
			  ,F_DIV_TELNO(B.RECPTER_TELNO,'F') RECPTER_TELFNO
			  ,F_DIV_TELNO(B.RECPTER_TELNO,'M') RECPTER_TELMNO
			  ,F_DIV_TELNO(B.RECPTER_TELNO,'L') RECPTER_TELLNO
			  ,B.RECPTER_EMAIL
			  ,F_DIV_TELNO(B.RECPTER_HTELNO,'F') RECPTER_HTELFNO
			  ,F_DIV_TELNO(B.RECPTER_HTELNO,'M') RECPTER_HTELMNO
			  ,F_DIV_TELNO(B.RECPTER_HTELNO,'L') RECPTER_HTELLNO
			  ,SUBSTRB(B.SUPP_COMP_NM,1,40)
			  ,SUBSTRB(REPLACE(E.ZIPCD,'-',''),1,6)
			  ,SUBSTRB(E.ADDR1,1,60)
			  ,SUBSTRB(E.ADDR2,1,100)
			  ,F_DIV_TELNO(E.TELNO,'F')
			  ,F_DIV_TELNO(E.TELNO,'M')
			  ,F_DIV_TELNO(E.TELNO,'L')
			  ,F_DIV_TELNO(E.FAXNO,'F')
			  ,F_DIV_TELNO(E.FAXNO,'M')
			  ,F_DIV_TELNO(E.FAXNO,'L')
			  ,USSF_GET_GOODSCNT(B.ORDER_ID, B.GOODS_CD)
			  ,TO_CHAR(SYSDATE,'YYYYMMDD')
			  ,'02'
			  ,B.KIND_DIV_CD
			  ,B.DELIV_CERT_YN
			  ,B.DOM_EXP_YN
			  ,(SELECT Y.EDPSCD FROM PICMT0060 Y WHERE Y.REGIPOCD = B.SUPPO_RGIST_POCD AND Y.USEYN='Y' AND Y.DSCDPOYN = 'N')
			  ,A.SETL_APPR_TOT_AMT
			  ,A.SETL_MEAN_CD
			  ,'1'
			  ,B.GOODS_CD
			  ,B.GOODS_NM
			  ,B.DC_APPLY_PRC
			  ,B.WGHT
			  ,B.VOLM
			  ,B.GOODS_NM
			  ,DECODE(NVL(B.EXTRA_GOODS_YN,'N'),'Y','Y','N')
			  ,B.REGI_NO
			  ,B.SUPP_COMP_ID
			  ,'0'
			  ,B.REGI_NO
			  ,SYSDATE
			  ,#prsnId#
			  ,B.TDAY_EXP_YN
			  ,B.STD_DIV_CD
			  ,B.SMS_RECV_YN
			  ,(SELECT Y.PRCL_INMATL_CD FROM GD_GOODS_MAST Y WHERE Y.GOODS_CD = B.GOODS_CD)
			  ,SEQ_IFS_PRRWT0410.NEXTVAL
			  ,'IF-PSHESH-012-P04I'
			  ,TO_CHAR(SYSDATE,'YYYYMMDDHH24MISS')
			  ,'N'
			  ,'1'
			  ,B.REPRSNT_REGI_NO
		  FROM OD_ORDER_MAST A, OD_ORDER_ITM B, OD_ORDER_SETL C, CO_SUPP_COMP_MAST E
		 WHERE A.ORDER_ID = B.ORDER_ID
		   AND A.ORDER_ID = C.ORDER_ID
		   AND C.USE_YN = 'Y'
		   AND B.SUPP_COMP_ID = E.SUPP_COMP_ID(+)
		   AND (1,A.ORDER_ID) IN
				<iterate property="orderIds" open="("  close=")" conjunction=",">
					(1,#orderIds[]#)
				</iterate>
		   AND (1,B.ORDER_ITM_ID) IN
				<iterate property="forIFOrderItmIdList" open="("  close=")" conjunction=",">
					(1,#forIFOrderItmIdList[]#)
				</iterate>
		   AND B.PAVLN_DIV_CD NOT IN ('02', '03', '05', '08')
	</update>

	<!-- 대표등기번호 집배연계 테이블에 등록되어있을 경우 사용여부 N으로 업데이트-->
	<update id="updateSpcltySuppGoodsRepresentNotoCMS" parameterClass ="java.util.HashMap">
		/** SQL_ID : BO.SrmFoOrder.updateSpcltySuppGoodsRepresentNotoCMS **/
		UPDATE IF_PCJUT0280
		   SET USEYN		= #useYn#
			  ,WRK_GBN		= #wrkGbn#
			  ,LASTCHGDATE	= SYSDATE
		 WHERE (1,REGINO) IN
				<iterate property="searchRegiNos" open="("  close=")" conjunction=",">
					(1,#searchRegiNos[]#)
				</iterate>
		   AND NVL(USEYN,'N') = 'Y'
	</update>


	<!-- 대표등기번호 집배연계 시퀀스 조회 -->
	<select id="selectIfPcjut0280Seq" parameterClass ="java.util.HashMap" resultClass="String" >
		/* 파일명[파일설명] : SrmFoOrderMgr_SQL.xml[대표등기번호 집배연계 시퀀스 조회] SQL ID : selectIfPcjut0280Seq */
		SELECT NVL(MAX(RAISE_SEQ),0) FROM IF_PCJUT0280
	</select>

	<!-- 대표등기번호 집배연계 테이블에 저장 -->
	<insert id="registerSpcltySuppGoodsRepresentNotoCMS" parameterClass ="java.util.HashMap">
		/** SQL_ID : BO.SrmFoOrder.registerSpcltySuppGoodsRepresentNotoCMS **/
		INSERT INTO IF_PCJUT0280
			(
				 RAISE_SEQ
				,REGINO
				,REPRSNTREGINO
				,CREATEDATE
				,LASTCHGDATE
				,USEYN
				,IF_ID
				,INIT_TIME
				,DEAL_STATE
				,WRK_GBN
			)
		SELECT TO_NUMBER(#ifPcjut0280Seq#) + ROWNUM AS RAISE_SEQ
			  ,B.REGI_NO
			  ,B.REPRSNT_REGI_NO
			  ,SYSDATE
			  ,SYSDATE
			  ,#useYn#
			  ,'IF-ESHPSH-031-P01I'
			  ,TO_CHAR(SYSDATE,'YYYYMMDDHH24MISS')
			  ,'N'
			  ,#wrkGbn#
		  FROM OD_ORDER_MAST A, OD_ORDER_ITM B, OD_ORDER_SETL C
		 WHERE A.ORDER_ID = B.ORDER_ID
		   AND A.ORDER_ID = C.ORDER_ID
		   AND C.USE_YN = 'Y'
		   AND B.SUPPO_RGIST_POCD IN (SELECT SUPPO_RGIST_POCD FROM CO_SUPP_COMP_MAST WHERE SUPP_COMP_ID IN (#searchSuppCompId#, #loginId#))
		   AND (1,A.ORDER_ID) IN
				<iterate property="orderIds" open="("  close=")" conjunction=",">
					(1,#orderIds[]#)
				</iterate>
		   AND (1,B.ORDER_ITM_ID) IN
				<iterate property="forIFOrderItmIdList" open="("  close=")" conjunction=",">
					(1,#forIFOrderItmIdList[]#)
				</iterate>
		/* AND NVL(B.PRSNT_YN,'N') = 'N'
		   AND NVL(B.EXTRA_GOODS_YN,'N') = 'N' */
		   AND B.REPRSNT_REGI_NO IS NOT NULL
	</insert>

	<!-- 주문/통보_기표지 출력 시퀀스 조회 -->
	<select id="selectPrtSeq" parameterClass="java.util.HashMap" resultClass="String">
		/** SQL_ID : BO.SrmFoOrder.selectPrtSeq **/
		SELECT SEQ
		  FROM OD_SEND_SEQ
		 WHERE SEQ_GRP_ID = #searchSeqGrpId#
		   FOR UPDATE
	</select>

	<!-- 주문/통보_특산품공급관리 등기번호 시퀀스 테이블 update -->
	<insert id="updatePrtSeqTbl" parameterClass="java.util.HashMap">
		/** SQL_ID : BO.SrmFoOrder."updatePrtSeqTbl" **/
		MERGE INTO OD_SEND_SEQ
			USING DUAL
			ON (SEQ_GRP_ID = #searchSeqGrpId# AND REGI_DIV_CD = 'PRT')
		WHEN MATCHED THEN
			UPDATE
			SET SEQ = #newSeq#
		WHEN NOT MATCHED THEN
			INSERT (
				 SEQ_GRP_ID
				,REGI_DIV_CD
				,SEQ
			)
			VALUES (
				 #searchSeqGrpId#
				,'PRT'
				,#initSeq#
			)
	</insert>

	<!-- 기표지출력 대상 리스트 조회 -->
	<select id="selectSuppGoodsListPrint" parameterClass ="java.util.HashMap" resultClass="commMap">
		SELECT A.SUPPO_RGIST_POCD,
			  ,(SELECT Y.PONM FROM PICMT0060 Y WHERE Y.REGIPOCD = A.SUPPO_RGIST_POCD AND Y.USEYN='Y') SUPPO_RGIST_PONM
			  ,A.GOODS_CD
			  ,A.GOODS_NM
			  ,A.SUPP_COMP_ID
			  ,A.SUPP_COMP_NM
			  ,TO_CHAR(B.APPR_DATE, 'YYYYMMDD') APPR_DATE
			  ,A.ORDER_ID
			  ,(SELECT Z.NAME FROM CM_COMN_CD Z WHERE Z.CD_GRP_ID = 'SETL_MEAN_CD' AND Z.COMN_CD_ID = B.SETL_MEAN_CD) SETL_MEAN_NM
			  ,C.AMOUNT_CASH
			  ,C.AMOUNT_CARD
			  ,COUNT(1) TOT_GOODS_CNT
			  ,B.SETL_APPR_TOT_AMT
			  ,C.TOT_DELIV_CERT_FEE
			  ,C.TOT_CONG_CARD_FEE
			  ,SUM(A.PRCL_AMT) PRCL_AMT
			  ,A.SENDER_NM
			  ,A.SENDER_TELNO
			  ,A.SENDER_HTELNO
			  ,REPLACE(A.SENDER_ZIPCD,'-','') AS SENDER_ZIPCD
			  ,CASE WHEN LENGTH(A.SENDER_ZIPCD) = 5 THEN A.ORDRR_ZIPCD
					WHEN LENGTH(A.SENDER_ZIPCD) = 6 THEN SUBSTR(A.SENDER_ZIPCD,1,3) || '-' || SUBSTR(A.SENDER_ZIPCD,4)
					ELSE A.SENDER_ZIPCD END AS SENDER_ZIPCD_DISP
			  ,A.SENDER_ADDR1
			  ,A.SENDER_ADDR2
			  ,ROW_NUMBER() OVER(PARTITION BY A.ORDER_ID, A.GOODS_CD ORDER BY A.SUPP_COMP_ID, A.GOODS_CD, A.ORDER_ID, MIN(A.REGI_NO)) as GOODS_PER_REC_PRSN_SEQ
			  ,A.RECPTER_NM
			  ,A.RECPTER_TELNO
			  ,A.RECPTER_HTELNO
			  ,REPLACE(A.RECPTER_ZIPCD,'-','') AS RECPTER_ZIPCD
			  ,CASE WHEN LENGTH(A.RECPTER_ZIPCD) = 5 THEN A.RECPTER_ZIPCD
					WHEN LENGTH(A.RECPTER_ZIPCD) = 6 THEN SUBSTR(A.RECPTER_ZIPCD,1,3) || '-' || SUBSTR(A.RECPTER_ZIPCD,4)
					ELSE A.RECPTER_ZIPCD END AS RECPTER_ZIPCD_DISP
			  ,A.RECPTER_ADDR1
			  ,A.RECPTER_ADDR2
			  ,NVL(A.DELIV_CERT_YN, 'N') DELIV_CERT_YN
			  ,A.REGI_NO
			  ,(SELECT SEND_MSG_TYP_NM
				  FROM OD_SEND_MSG D, CM_SEND_MSG_CD E
				 WHERE D.ORDER_ITM_ID = A.ORDER_ITM_ID
				   AND D.SEND_MSG_CD = E.SEND_MSG_CD
				   AND D.SEND_MSG_DIV_CD = E.SEND_MSG_DIV_CD
				   AND D.SEND_MSG_TYP_CD = E.SEND_MSG_TYP_CD
				   AND ROWNUM = 1) SEND_MSG_TYP_NM
			  ,(SELECT SEND_MSG_DIV_NM
				  FROM OD_SEND_MSG D, CM_SEND_MSG_CD E
				 WHERE D.ORDER_ITM_ID = A.ORDER_ITM_ID
				   AND D.SEND_MSG_CD = E.SEND_MSG_CD
				   AND D.SEND_MSG_DIV_CD = E.SEND_MSG_DIV_CD
				   AND D.SEND_MSG_TYP_CD = E.SEND_MSG_TYP_CD
				   AND ROWNUM = 1) SEND_MSG_DIV_NM
			  ,(SELECT SEND_MSG
				  FROM OD_SEND_MSG D, CM_SEND_MSG_CD E
				 WHERE D.ORDER_ITM_ID = A.ORDER_ITM_ID
				   AND D.SEND_MSG_CD = E.SEND_MSG_CD
				   AND D.SEND_MSG_DIV_CD = E.SEND_MSG_DIV_CD
				   AND D.SEND_MSG_TYP_CD = E.SEND_MSG_TYP_CD
				   AND ROWNUM = 1) SEND_MSG
		  FROM OD_ORDER_ITM A, OD_ORDER_MAST B, OD_ORDER_SETL C
		 WHERE A.ORDER_ID = B.ORDER_ID
		   AND B.ORDER_ID = C.ORDER_ID
		   AND C.SETL_SEQ = '1'
		   AND C.USE_YN = 'Y'
		   <!-- AND A.SUPPO_RGIST_POCD = #searchSuppPoRegipocd# -->
		/* AND NVL(A.PRSNT_YN,'N') = 'N'
		   AND NVL(A.EXTRA_GOODS_YN,'N') = 'N' */
		   AND A.ORDER_ID = #orderId#
		<include refid="selectPrtInclude1" />
		 GROUP BY A.SUPPO_RGIST_POCD
				 ,A.GOODS_CD
				 ,A.GOODS_NM
				 ,A.SUPP_COMP_ID
				 ,A.SUPP_COMP_NM
				 ,B.APPR_DATE
				 ,A.ORDER_ID
				 ,C.SETL_MEAN_NM
				 ,C.AMOUNT_CASH
				 ,C.AMOUNT_CARD
				 ,C.SETL_APPR_AMT
				 ,C.TOT_DELIV_CERT_FEE
				 ,C.TOT_CONG_CARD_FEE
				 ,A.SENDER_NM
				 ,A.SENDER_TELNO
				 ,A.SENDER_HTELNO
				 ,A.SENDER_ZIPCD
				 ,A.SENDER_ADDR1
				 ,A.SENDER_ADDR2
				 ,A.RECPTER_NM
				 ,A.RECPTER_TELNO
				 ,A.RECPTER_HTELNO
				 ,A.RECPTER_ZIPCD
				 ,A.RECPTER_ADDR1
				 ,A.RECPTER_ADDR2
				 ,NVL(A.DELIV_CERT_YN, 'N')
				 ,A.REGI_NO
		 ORDER BY A.GOODS_CD, A.REGI_NO
	</select>

	<!-- 배송관리 배송완료 상태 변경 임시버튼 -->
	<select id="selectSendCompleteImsiAjax" parameterClass ="java.util.HashMap" resultClass="commMap">
		SELECT ORDER_ITM_ID
		  FROM OD_ORDER_ITM A
			  ,OD_ORDER_MAST B
		 WHERE A.ORDER_ID = B.ORDER_ID
		   AND A.ORDER_ID IN
				<iterate property="searchOrderIds" open="("  close=")" conjunction=",">
					#searchOrderIds[]#
				</iterate>
		   AND A.ORDER_ID || '/'||A.GOODS_CD||NVL(TO_CHAR(A.WISH_SEND_DATE, 'YYYYMMDD'), TO_CHAR(B.APPR_DATE, 'YYYYMMDD')) IN
				<iterate property="searchOrderInfos" open="("  close=")" conjunction=",">
					#searchOrderInfos[]#
				</iterate>
		   AND A.ORDER_STUS_CD = 'D02'
	</select>

	<!-- 배송관리 배송완료 상태 변경 임시버튼 -->
	<update id="sendCompleteImsiAjax" parameterClass ="java.util.HashMap">
		UPDATE OD_ORDER_ITM
		   SET ORDER_STUS_CD = 'D03'
			  ,SEND_DONE_DATE = SYSDATE
		 WHERE ORDER_ITM_ID = #orderItmId#
		   AND ORDER_STUS_CD = 'D02'
		/* AND NVL(PRSNT_YN,'N')       = 'N'
		   AND NVL(EXTRA_GOODS_YN,'N') = 'N' */
	</update>

	<!-- 공급업체 기표지 출력 설정 조회 -->
	<select id="selectSuppLabelPrtSetting" parameterClass ="java.util.HashMap" resultClass="java.util.HashMap" >
		<![CDATA[
			SELECT /* 파일명[파일설명] : SendMgr_SQL.xml[공급업체 기표지 출력 설정 조회] SQL ID : selectSuppLabelPrtSetting */
				    LABEL_TYPE_CD
				   ,LABEL_SORT_MTH_CD
				   ,LABEL_PRT_SPACE_WIDTH
				   ,LABEL_PRT_SPACE_HEIGHT
				   ,LABEL_PRT_CD
				   ,LABEL_PRT_NM
			FROM   CO_SUPP_COMP_MAST
			WHERE  SUPP_COMP_ID = #searchSuppCompId#
		]]>
	</select>

	<!-- 공급업체 기표지 출력 설정 등록 및 수정 -->
	<update id="updateSuppLabelPrtSetting" parameterClass ="java.util.HashMap" >
		<![CDATA[
		UPDATE /* 파일명[파일설명] : SendMgr_SQL.xml[공급업체 기표지 출력 설정 등록 및 수정] SQL ID : updateSuppLabelPrtSetting */
		CO_SUPP_COMP_MAST
		SET	LABEL_TYPE_CD = #labelTypeCd#
		]]>
		<isNotEmpty property="labelSortMthCd">
			<![CDATA[ ,LABEL_SORT_MTH_CD = #labelSortMthCd# ]]>
		</isNotEmpty>
		<isNotEmpty property="labelPrtSpaceWidth">
			<![CDATA[ ,LABEL_PRT_SPACE_WIDTH = #labelPrtSpaceWidth# ]]>
		</isNotEmpty>
		<isNotEmpty property="labelPrtSpaceHeight">
			<![CDATA[ ,LABEL_PRT_SPACE_HEIGHT = #labelPrtSpaceHeight# ]]>
		</isNotEmpty>
		<isNotEmpty property="labelPrtCd">
			<![CDATA[ ,LABEL_PRT_CD = #labelPrtCd# ]]>
		</isNotEmpty>
		<isNotEmpty property="labelPrtNm">
			<![CDATA[ ,LABEL_PRT_NM = #labelPrtNm# ]]>
		</isNotEmpty>
		<![CDATA[
		WHERE SUPP_COMP_ID = #suppCompId#
		]]>
	</update>

</sqlMap>
